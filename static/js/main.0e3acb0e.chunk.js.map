{"version":3,"sources":["Store/constantes.js","Utils/index.js","Components/common.js","Utils/createSetOptionAdapter.js","Store/options/index.js","Store/actions.js","Store/pendientes/selectors.js","Store/sectores/actions.js","Components/Estado/styles.module.css","Components/Icons/styles.module.css","Store/semaforos/selectors.js","Components/Celda/styles.module.css","Store/sectores/selectors.js","Store/trenes/actions.js","Store/celdas/selectors.js","Store/options/actions.js","Store/alertas/actions.js","Store/bloques/selectors.js","Store/semaforos/actions.js","Components/Semaforo/styles.module.css","Store/bloques/actions.js","Store/celdas/actions.js","Store/enclavamientos/selectors.js","Store/bloques/adapter.js","Store/celdas/adapter.js","Store/semaforos/adapter.js","Components/Trenes/styles.module.css","Components/Teletipo/styles.module.css","Store/alertas/selectors.js","Store/trenes/selectors.js","Store/automatizaciones/actions.js","Store/pendientes/actions.js","Store/automatizaciones/adapter.js","Store/enclavamientos/adapter.js","Store/sectores/adapter.js","Store/automatizaciones/selectors.js","Store/options/selectors.js","Components/Icons/loading.gif","Components/Alarma/styles.module.css","Components/Enclavamientos/styles.module.css","Components/Sector/styles.module.css","Components/Animador/styles.module.css","Store/data/_salida lazy /^/.//.*$/ groupOptions: {} namespace object","Store/alertas/reducer.js","Store/bloques/reducer.js","Store/celdas/reducer.js","Store/automatizaciones/reducer.js","Store/enclavamientos/reducer.js","Store/options/reducer.js","Store/pendientes/reducer.js","Store/sectores/reducer.js","Store/semaforos/reducer.js","Store/trenes/reducer.js","Store/bloques/hooks.js","Store/celdas/hooks.js","Store/enclavamientos/hooks.js","Store/automatizaciones/hooks.js","Store/options/hooks.js","Store/sectores/hooks.js","Store/semaforos/hooks.js","Store/trenes/hooks.js","Store/index.js","Components/Icons/index.jsx","Components/Teletipo/index.jsx","Store/alertas/hooks.js","Components/Semaforo/index.jsx","Components/Celda/Tramo.jsx","Components/Celda/Linea.jsx","Components/Celda/Cambio.jsx","Components/Celda/Paragolpe.jsx","Components/Celda/Cruce.jsx","Components/Celda/Empalme.jsx","Components/Trenes/Despachador.jsx","Components/Trenes/Tren.jsx","Components/Enclavamientos/index.jsx","Components/Celda/index.jsx","Components/Sector/index.jsx","Components/Estado/Cambio.jsx","Components/Estado/Semaforo.jsx","Components/Estado/index.jsx","Components/Alarma/index.jsx","Components/Mimico/index.jsx","Components/Animador/index.jsx","Components/Menu/index.jsx","Components/App/index.jsx","serviceWorker.js","index.js"],"names":["LINEA","CAMBIO","CRUCE","PARAGOLPE","EMPALME","SEMAFORO","LIBRE","PRECAUCION","ALTO","AUTOMATICO","MANIOBRA","BLOQUEADO","NORMAL","DESVIADO","ALTERNATIVA","IZQ","CENTRO","DER","N","NE","E","SE","S","SW","W","NW","BLOQUE","FIJO","INFO","WARNING","DANGER","UNLOADED","LOADING","LOADED","useLongPress","onClick","onLongPress","ms","timerRef","useRef","eventRef","callback","useCallback","current","start","ev","isPlainClick","persist","setTimeout","stop","clearTimeout","useMemo","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","stopProp","stopPropagation","holdPropagation","button","shiftKey","altKey","metaKey","ctrlKey","preventDefault","buildId","idSector","x","y","dir","join","replace","buildIdBloque","bloque","useResize","useState","width","window","innerWidth","height","innerHeight","size","setSize","useEffect","handleResize","addEventListener","removeEventListener","nombreEntity","entity","nombre","ANCHO_CELDA","CENTRO_CELDA","X","Y","ANG","CICLOS_POR_SEGUNDO","createSetOptionAdapter","name","defaultValue","options","sliceName","selector","state","action","createAction","reducer","payload","dispatch","useDispatch","useSelector","value","default","toString","playRate","currentSector","showConfig","showCoords","automatizacionesActive","showTeletipo","selPendiente","id","pendientes","includes","loadSectores","createAsyncThunk","then","data","condition","_","getState","selSectoresLoading","loadSector","selSectorLoading","module","exports","selectors","adapter","getSelectors","semaforos","selSemaforo","selectById","selModoSemaforo","createSelector","semaforo","modo","selSemaforos","selectAll","celda","ss","filter","length","sectorAdapter","sectores","selSector","loadStatusEachSector","selErrorSector","errorSector","selSectores","loadStatusSectores","selErrorSectores","errorSectores","doAddTren","maxSpeed","idTren","numero","idCelda","speed","falta","addTren","setAviso","addTrenToCelda","runAutomatizaciones","doDelTren","delTren","tren","selCelda","removeTrenFromCelda","delTrenes","selTrenes","forEach","setTren","moveTren","selTren","nextCoords","newX","newY","newDir","nextSpeed","oldCelda","newIdCelda","newIdSemaforo","newCelda","tipo","otro","newSemaforo","newPermiso","reduce","permiso","senal","Math","min","Error","newTren","setAlarma","trenEnBloque","selBloqueOcupado","idBloque","nextDir","other","puntas","punta","ramas","posicion","rebota","linea1","linea2","solveNewDir","longitud","moveTrenes","Promise","all","map","celdas","selCeldas","e","selCeldaIsManual","manual","showEstado","hideEstado","doSetAlarma","msg","fecha","Date","now","clearAlarma","nivel","clearAvisos","clearAviso","bloques","selBloque","updateSemaforo","doSetAspectoSenal","idSemaforo","aspecto","setAspectoSenal","clearPendientes","setModoSemaforo","s","setBloqueOcupado","vecino","updateCelda","doSetPosicion","rawSetPosicion","setPendiente","setPosicion","doSetCambioManual","setCambioManual","doRemoveTrenFromCelda","doAddTrenToCelda","setRebota","enclavamientos","selEnclavamientos","selEnclavamiento","selCondicionesFaltantes","encl","deps","salida","dep","concat","createEntityAdapter","selectId","selAlarma","alertas","alarma","selAvisos","avisos","Object","values","trenes","automate","idTarget","autom","celdaTarget","p1","idSource","celdaSource","alt","alts","find","cuando","posicionEsperada","r1","resolve","automatizacionesCambio","semaforoTarget","aspectoEsperado","izq","centro","der","keys","max","semaforoSource","estadoSource","senales","senalAfectada","p2","r2","automatizacionesSemaforo","bloqueTarget","p3","bloqueSource","automatizacionesBloque","runAutomatizacion","a","selAutomatizacion","idOrigen","browseAutomatizaciones","selAutomatizaciones","p","r","countDown","automatizacion","idAutom","sortComparer","b","enclavamiento","idEncl","sector","sa","sb","descrA","descrCorta","toUpperCase","descrB","automatizaciones","selShowEstado","webpackAsyncContext","req","__webpack_require__","o","code","ids","createReducer","unshift","idx","findIndex","av","splice","getInitialState","fulfilled","addMany","upsertOne","show","push","pending","setAll","rejected","error","meta","arg","loadStatus","useBloqueOcupado","useCelda","useSetPosicion","useCondicionesFaltantes","useRunAutomatizaciones","useEstado","estado","hideEstadoAction","args","showEstadoAction","usePlayRate","useCurrentSector","useShowConfig","useShowCoords","useAutomatizacionesActive","useShowTeletipo","useSector","loading","load","useSemaforo","useModoSemaforo","modoSemaforo","useAddTren","configureStore","CambioNormal","viewBox","className","styles","svg","d","main","CambioDesviado","TripleIzq","TripleNormal","TripleDer","Item","toLocaleString","colSpan","Teletipo","useAvisos","mensajes","setShowTeletipo","info","setInfo","Table","fixed","Label","Input","type","checked","onChange","i","buttons","Button","close","title","row","key","estilosAspectos","Semaforo","placement","longPressProps","soloManiobra","classNames","maniobra","blink","x1","y1","x2","y2","cy","cx","xTope","Tramo","estilo","Linea","ocupado","index","Cambio","Paragolpe","fill","transform","Cruce","Empalme","otraCelda","textAnchor","empalme","whyDidYouRender","MenuTrenes","cerrar","descr","despachar","currentTarget","dataset","Popover","isOpen","target","PopoverHeader","PopoverBody","ListGroup","ListGroupItem","data-tipo","ActualDespachador","bloqueOcupado","setOpen","trenDespachador","flechaDespachador","Despachador","Array","isArray","despachador","Tren","relSpeed","color","ListaFaltantes","faltantes","CondicionesFaltantes","setShowFaltantes","ActualCelda","minX","maxX","cellWidth","minY","maxY","padLeft","padTop","toggleRebota","useToggleRebota","condicionesFaltantes","showFaltantes","Renderer","dirs","coords","rect","style","left","top","text","Celda","rest","ActualSector","ancho","alto","ceil","document","attrs","c","Sector","JSON","stringify","src","loadingIcon","EstadoCambio","celdaIsManual","toggleCeldaManual","useCeldaManual","onSetCambioNormal","onSetCambioDesviado","disableCambio","ButtonGroup","cambio","disabled","EstadoSenal","onSetAspecto","vertical","EstadoSemaforo","useSetAspectoSenal","Container","Row","Col","pushDown","hidden","Estado","more","EstadoPopover","oldId","setOldId","useSelEnclavamiento","activeTab","setActiveTab","activeElement","toggle","tab","Command","Nav","pills","solapas","NavItem","NavLink","classnames","solapa","active","TabContent","TabPane","tabId","Alarma","useAlarma","useDelTrenes","Mimico","useParams","currentIdSector","setCurrentIdSector","Animador","useMoveTrenes","setPlayRate","timer","setTimer","setInterval","clearInterval","rate","outline","ActualMenu","setIsOpen","match","useRouteMatch","params","setAutomatizaciones","setShowCoords","setShowConfig","oldIdSector","setOldIdSector","onClickSector","Navbar","light","expand","NavbarBrand","href","process","NavbarToggler","Collapse","navbar","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","DropdownMenu","sect","DropdownItem","tag","Link","to","Menu","useSectores","App","username","photoURL","basename","path","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","store","getElementById","URL","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.0e3acb0e.chunk.js","sourcesContent":["// Tipos de celda\nexport const LINEA = 'linea';\nexport const CAMBIO = 'cambio';\nexport const CRUCE = 'cruce';\nexport const PARAGOLPE = 'paragolpe';\nexport const EMPALME = 'empalme';\nexport const SEMAFORO = 'semaforo';\n// Aspectos señales:\nexport const LIBRE = 1;\nexport const PRECAUCION = 2;\nexport const ALTO = 3;\n// Modos Semaforos\nexport const AUTOMATICO = 0;\nexport const MANIOBRA = 1;\nexport const BLOQUEADO = 2;\n// Cambio:\nexport const NORMAL = 0;\nexport const DESVIADO = 1;\nexport const ALTERNATIVA = 2;\n// Señales\nexport const IZQ = 'izq';\nexport const CENTRO = 'centro';\nexport const DER = 'der';\n// Direcciones:\nexport const N = 'N';\nexport const NE = 'NE';\nexport const E = 'E';\nexport const SE = 'SE';\nexport const S = 'S';\nexport const SW = 'SW';\nexport const W = 'W';\nexport const NW = 'NW';\n// para tipo de automatización\n// se reutilizan CAMBIO y SEMAFORO de antes\nexport const BLOQUE = 'bloque';\nexport const FIJO = 'fijo';\n// Tipos de avisos\nexport const INFO = 'info';\nexport const WARNING = 'warning';\nexport const DANGER = 'danger';\n// Estados de carga de datos\nexport const UNLOADED = 'unloaded';\nexport const LOADING = 'loading';\nexport const LOADED = 'loaded';\n","import { useState, useEffect, useCallback, useRef, useMemo } from 'react';\n\n/* Usage:\n\nhttps://stackoverflow.com/questions/48048957/react-long-press-eventRef\n\nfunction MyComponent (props) {\n  const longPressProps = useLongPress({\n    onClick: () => void console.log('on click'),\n    onLongPress: () => void console.log('long press'),\n  });\n\n\n  return (\n      <button {...longPressProps} >\n        click me\n      </button>  );\n};\n*/\n\nexport function useLongPress({ onClick, onLongPress, ms = 300 } = {}) {\n  const timerRef = useRef(false);\n  const eventRef = useRef({});\n\n  const callback = useCallback(() => {\n    if (typeof onLongPress === 'function') {\n      onLongPress(eventRef.current);\n    }\n    eventRef.current = {};\n    timerRef.current = false;\n  }, [onLongPress]);\n\n  const start = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        timerRef.current = setTimeout(callback, ms);\n      }\n    },\n    [callback, ms]\n  );\n\n  const stop = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        if (timerRef.current) {\n          clearTimeout(timerRef.current);\n          if (typeof onClick === 'function') {\n            onClick(ev);\n          }\n          timerRef.current = false;\n          eventRef.current = {};\n        }\n      }\n    },\n    [onClick]\n  );\n\n  return useMemo(\n    () => ({\n      onMouseDown: start,\n      onMouseUp: stop,\n      onMouseLeave: stop,\n      onTouchStart: start,\n      onTouchEnd: stop,\n    }),\n    [start, stop]\n  );\n}\n\nconst stopProp = (ev) => ev.stopPropagation();\n\nexport const holdPropagation = {\n  onMouseDown: stopProp,\n  onMouseUp: stopProp,\n  onMouseLeave: stopProp,\n  onTouchStart: stopProp,\n  onTouchEnd: stopProp,\n};\n\nexport const isPlainClick = (ev) => {\n  if (ev.button || ev.shiftKey || ev.altKey || ev.metaKey || ev.ctrlKey)\n    return false;\n  ev.stopPropagation();\n  ev.preventDefault();\n  return true;\n};\n\n// Ids should be valid DOM id attributes.\n// Ids starting with a digit are prefixed with an underscore\nexport const buildId = ({ idSector, x, y, dir }) =>\n  (dir ? [idSector, x, y, dir].join('_') : [idSector, x, y].join('_'))\n    .replace(/\\W/g, '_')\n    .replace(/(^\\d)/, '_$1');\n\nexport const buildIdBloque = (idSector, bloque) =>\n  `${idSector}__${bloque}`.replace(/\\W/g, '_').replace(/(^\\d)/, '_$1');\n\nexport function useResize() {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () =>\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return size;\n}\n\nexport function nombreEntity(entity) {\n  return (\n    entity.nombre ||\n    `[${entity.x},${entity.y}]` + (entity.dir ? `-${entity.dir}` : '')\n  );\n}\n","export const ANCHO_CELDA = 100;\nexport const CENTRO_CELDA = ANCHO_CELDA / 2;\nexport const X = {\n  N: CENTRO_CELDA,\n  NE: ANCHO_CELDA,\n  E: ANCHO_CELDA,\n  SE: ANCHO_CELDA,\n  S: CENTRO_CELDA,\n  SW: 0,\n  W: 0,\n  NW: 0,\n};\nexport const Y = {\n  N: 0,\n  NE: 0,\n  E: CENTRO_CELDA,\n  SE: ANCHO_CELDA,\n  S: ANCHO_CELDA,\n  SW: ANCHO_CELDA,\n  W: CENTRO_CELDA,\n  NW: 0,\n};\nexport const ANG = {\n  N: 270,\n  NE: 315,\n  E: 0,\n  SE: 45,\n  S: 90,\n  SW: 135,\n  W: 180,\n  NW: 225,\n};\nexport const DIR = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n\nexport const CICLOS_POR_SEGUNDO = 10;\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createAction } from '@reduxjs/toolkit';\n\nexport default function createSetOptionAdapter(\n  name,\n  defaultValue,\n  options = {}\n) {\n  const { sliceName = 'options' } = options;\n\n  const selector = (state) => state[sliceName][name];\n  const action = createAction(name);\n  const reducer = (state, action) => {\n    state[name] = action.payload;\n  };\n  const useState = () => {\n    const dispatch = useDispatch();\n    return [\n      useSelector(selector),\n      useCallback((value) => dispatch(action(value)), [dispatch]),\n    ];\n  };\n\n  return {\n    selector,\n    action,\n    reducer,\n    useState,\n    default: defaultValue,\n    toString: () => name,\n  };\n}\n","import createSetOptionAdapter from 'Utils/createSetOptionAdapter';\n\nexport const playRate = createSetOptionAdapter('playRate', 1);\nexport const currentSector = createSetOptionAdapter('currIdSector');\nexport const showConfig = createSetOptionAdapter('showConfig', false);\nexport const showCoords = createSetOptionAdapter('showCoords', true);\nexport const automatizacionesActive = createSetOptionAdapter(\n  'automatizacionesActive',\n  true\n);\nexport const showTeletipo = createSetOptionAdapter('showTeletipo', true);\n","export * from './alertas/actions';\nexport * from './bloques/actions';\nexport * from './celdas/actions';\nexport * from './automatizaciones/actions';\nexport * from './enclavamientos/actions';\nexport * from './options/actions';\nexport * from './pendientes/actions';\nexport * from './sectores/actions';\nexport * from './semaforos/actions';\nexport * from './trenes/actions';\n","export const selPendiente = (state, id) => state.pendientes.includes(id);\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { selSectoresLoading, selSectorLoading } from './selectors';\nimport { UNLOADED } from 'Store/constantes';\nexport const loadSectores = createAsyncThunk(\n  'loadSectores',\n  () =>\n    import(\n      /* webpackChunkName: \"sectores\" */ 'Store/data/_salida/_sectores'\n    ).then((data) => data.default),\n  {\n    condition: (_, { getState }) => {\n      return selSectoresLoading(getState()) === UNLOADED;\n    },\n  }\n);\n\nexport const loadSector = createAsyncThunk(\n  'loadSector',\n  (idSector) =>\n    import(\n      /* webpackChunkName: \"[request]\" */ `Store/data/_salida/${idSector}`\n    ),\n  {\n    condition: (_, { getState }) => {\n      return selSectorLoading(getState()) === UNLOADED;\n    },\n  }\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"styles_label__3r56c\",\"pushDown\":\"styles_pushDown__1r8Ml\",\"cambio\":\"styles_cambio__K-Ynx\",\"manual\":\"styles_manual__1SN6-\",\"hidden\":\"styles_hidden__1mPWU\",\"close\":\"styles_close__1b-CL\",\"faltantes\":\"styles_faltantes__1Xom7\",\"disabled\":\"styles_disabled__3q6v_\",\"solapas\":\"styles_solapas__1cybr\",\"solapa\":\"styles_solapa__1ZYE5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"styles_main__QJA2q\",\"alt\":\"styles_alt__EQPaw\",\"svg\":\"styles_svg__6vY_Q\",\"filled\":\"styles_filled__2ZKFa\"};","import { createSelector } from '@reduxjs/toolkit';\nimport { AUTOMATICO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.semaforos);\n\nexport const selSemaforo = selectors.selectById;\n\nexport const selModoSemaforo = createSelector(\n  selectors.selectById,\n  (semaforo) => (semaforo && semaforo.modo) || AUTOMATICO\n);\n\nexport const selSemaforos = createSelector(\n  selectors.selectAll,\n  (_, celda) => celda,\n  (semaforos, celda) => {\n    const ss = semaforos.filter(\n      (semaforo) =>\n        semaforo.idSector === celda.idSector &&\n        semaforo.x === celda.x &&\n        semaforo.y === celda.y\n    );\n    if (ss.length) return ss;\n    return null;\n  }\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rect\":\"styles_rect__1zG3J\",\"manual\":\"styles_manual__139ZI\",\"text\":\"styles_text__JdA5Q\",\"svg\":\"styles_svg__rOGuq\",\"tramo-normal\":\"styles_tramo-normal__JZdRz\",\"tramo-muerto\":\"styles_tramo-muerto__LXymi\",\"tramo-ocupado\":\"styles_tramo-ocupado__LrGlb\",\"tramo-empalme\":\"styles_tramo-empalme__QAGef\",\"rebota\":\"styles_rebota__323Gf\",\"close\":\"styles_close__I-x5K\",\"empalme\":\"styles_empalme__1gk8t\"};","import sectorAdapter from './adapter';\nimport { UNLOADED } from 'Store/constantes';\nconst selectors = sectorAdapter.getSelectors((state) => state.sectores);\n\nexport const selSector = selectors.selectById;\nexport const selSectorLoading = (state, idSector) =>\n  state.sectores.loadStatusEachSector[idSector] || UNLOADED;\nexport const selErrorSector = (state) => state.sectores.errorSector;\n\nexport const selSectores = selectors.selectAll;\nexport const selSectoresLoading = (state) => state.sectores.loadStatusSectores;\nexport const selErrorSectores = (state) => state.sectores.errorSectores;\n","import { createAction } from '@reduxjs/toolkit';\nimport { selCelda, selSemaforo } from 'Store/selectors';\nimport {\n  removeTrenFromCelda,\n  addTrenToCelda,\n  setAlarma,\n  runAutomatizaciones,\n  setAviso,\n} from 'Store/actions';\nimport { currentSector } from 'Store/options';\nimport { buildId, nombreEntity } from 'Utils';\n\nimport {\n  LINEA,\n  CAMBIO,\n  CRUCE,\n  PARAGOLPE,\n  EMPALME,\n  IZQ,\n  CENTRO,\n  DER,\n  ALTO,\n  PRECAUCION,\n  LIBRE,\n  N,\n  NE,\n  E,\n  SE,\n  S,\n  SW,\n  W,\n  NW,\n  INFO,\n  WARNING,\n} from 'Store/constantes';\nimport { selTren, selTrenes, selBloqueOcupado } from 'Store/selectors';\nimport { CICLOS_POR_SEGUNDO } from 'Components/common';\n\nlet id = 100;\nexport const doAddTren = createAction(\n  'addTren',\n  (celda, dir, maxSpeed, idTren, numero) => ({\n    payload: {\n      idCelda: celda.idCelda,\n      x: celda.x,\n      y: celda.y,\n      dir,\n      speed: maxSpeed,\n      falta: CICLOS_POR_SEGUNDO / maxSpeed,\n      maxSpeed,\n      idTren,\n      idSector: celda.idSector,\n      numero,\n    },\n  })\n);\n\nexport function addTren(celda, dir, maxSpeed = 1) {\n  return (dispatch) => {\n    const numero = id;\n    id += 2;\n    const idTren = `_tren_${numero}`;\n    const { idCelda } = celda;\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Parte tren ${numero} desde ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doAddTren(celda, dir, maxSpeed, idTren, numero));\n    dispatch(addTrenToCelda(idCelda, idTren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport const doDelTren = createAction('doDelTren');\n\nexport function delTren(tren) {\n  return (dispatch, getState) => {\n    const { idCelda, numero } = tren;\n    const celda = selCelda(getState(), idCelda);\n    if (idCelda) dispatch(removeTrenFromCelda(idCelda));\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Borrado el tren ${numero} en ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doDelTren(tren.idTren));\n  };\n}\n\nexport function delTrenes() {\n  return (dispatch, getState) => {\n    selTrenes(getState()).forEach((tren) => dispatch(delTren(tren)));\n  };\n}\n\nexport const setTren = createAction('setTren');\n\nfunction nextCoords({ x, y, dir }, getState) {\n  switch (dir) {\n    case N:\n      return [x, y - 1, S];\n    case NE:\n      return [x + 1, y - 1, SW];\n    case E:\n      return [x + 1, y, W];\n    case SE:\n      return [x + 1, y + 1, NW];\n    case S:\n      return [x, y + 1, N];\n    case SW:\n      return [x - 1, y + 1, NE];\n    case W:\n      return [x - 1, y, E];\n    case NW:\n      return [x - 1, y - 1, SE];\n    default:\n  }\n}\n\nfunction solveNewDir(newDir, newCelda) {\n  function other({ puntas }) {\n    if (puntas.includes(newDir)) {\n      return puntas[0] === newDir ? puntas[1] : puntas[0];\n    } else return;\n  }\n  switch (newCelda.tipo) {\n    case LINEA:\n      return other(newCelda);\n    case CAMBIO:\n      if (newCelda.punta === newDir) return newCelda.ramas[newCelda.posicion];\n      else if (newCelda.ramas[newCelda.posicion] === newDir)\n        return newCelda.punta;\n      else return;\n    case PARAGOLPE:\n      if (newCelda.rebota) return newCelda.punta;\n      if (newCelda.punta === newDir) return 'X';\n      else return;\n    case CRUCE:\n      return other(newCelda.linea1) || other(newCelda.linea2);\n    default:\n      break;\n  }\n}\n\nexport function moveTren(idTren) {\n  return (dispatch, getState) => {\n    const tren = selTren(getState(), idTren);\n    if (!tren) return;\n    if (tren.dir === 'X') {\n      return dispatch(delTren(tren));\n    }\n\n    if (tren.falta) {\n      dispatch(\n        setTren({\n          idTren,\n          falta: tren.speed > tren.falta ? 0 : tren.falta - tren.speed,\n        })\n      );\n      return;\n    }\n    const [newX, newY, newDir] = nextCoords(tren, getState);\n    let nextSpeed = tren.speed;\n\n    const oldCelda = selCelda(getState(), tren.idCelda);\n\n    if (oldCelda.x !== newX || oldCelda.y !== newY) {\n      let newIdCelda = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n      });\n      let newIdSemaforo = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n        dir: newDir,\n      });\n      let newCelda = selCelda(getState(), newIdCelda);\n\n      if (newCelda && newCelda.tipo === EMPALME) {\n        newIdCelda = buildId({\n          idSector: oldCelda.idSector,\n          x: newCelda.otro.x,\n          y: newCelda.otro.y,\n        });\n        newIdSemaforo = buildId({\n          ...newCelda,\n          dir: newCelda.otro.dir,\n        });\n        newCelda = selCelda(getState(), newIdCelda);\n      }\n      if (newCelda) {\n        const newSemaforo = selSemaforo(getState(), newIdSemaforo);\n        if (newSemaforo) {\n          const newPermiso = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in newSemaforo\n              ? Math.min(permiso, newSemaforo[senal])\n              : permiso;\n          }, ALTO);\n          switch (newPermiso) {\n            case ALTO:\n              if (tren.speed)\n                dispatch(\n                  setAviso(\n                    WARNING,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} detenido en ${nombreEntity(oldCelda)}`\n                  )\n                );\n              dispatch(setTren({ idTren, speed: 0 }));\n\n              return;\n            case PRECAUCION:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed / 2 }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed / 2;\n              break;\n            case LIBRE:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed;\n              break;\n            default:\n              throw new Error(\n                `Semáforo ${newIdSemaforo} dá semáforo imposible ${newPermiso}`\n              );\n          }\n        }\n\n        if (newCelda.idTren) {\n          const newTren = selTren(getState(), newCelda.idTren);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Colisión en ${nombreEntity(newCelda)} entre trenes ${\n                tren.numero\n              } y ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const trenEnBloque = selBloqueOcupado(getState(), newCelda.idBloque);\n        if (trenEnBloque && trenEnBloque !== idTren) {\n          const newTren = selTren(getState(), trenEnBloque);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Tren ${tren.numero} invade el bloque ${newCelda.idBloque} ocupado por el tren ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const nextDir = solveNewDir(newDir, newCelda);\n        if (!nextDir) {\n          dispatch(\n            setAlarma(\n              newCelda.idCelda,\n              tren.numero,\n              `Tren ${\n                tren.numero\n              } no encuentra vía correspondiente en celda ${nombreEntity(\n                newCelda\n              )}`\n            )\n          );\n          return;\n        }\n        dispatch(removeTrenFromCelda(oldCelda.idCelda));\n        dispatch(addTrenToCelda(newIdCelda, idTren));\n        dispatch(\n          setTren({\n            idTren,\n            dir: nextDir,\n            x: newX,\n            y: newY,\n            speed: nextSpeed,\n            idCelda: newIdCelda,\n            falta: (newCelda.longitud || 1) * (CICLOS_POR_SEGUNDO / nextSpeed),\n          })\n        );\n      } else {\n        dispatch(delTren(tren));\n      }\n    } else dispatch(setTren(tren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport function moveTrenes() {\n  return (dispatch, getState) => {\n    const idSector = currentSector.selector(getState());\n    return Promise.all(\n      selTrenes(getState(), idSector).map((tren) =>\n        dispatch(moveTren(tren.idTren))\n      )\n    );\n  };\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { NORMAL, CAMBIO } from 'Store/constantes';\n\nimport { currentSector } from 'Store/options';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.celdas);\n\nexport const selCeldas = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (celdas, idSector) => celdas.filter((e) => e.idSector === idSector)\n);\n\nexport const selCelda = createSelector(selectors.selectById, (celda) => {\n  if (celda)\n    return celda.tipo === CAMBIO\n      ? {\n          posicion: NORMAL,\n          ...celda,\n        }\n      : celda;\n});\n\nexport const selCeldaIsManual = createSelector(\n  selectors.selectById,\n  (celda) => celda && celda.manual\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const showEstado = createAction('showEstado');\nexport const hideEstado = createAction('hideEstado');\n","import { createAction } from '@reduxjs/toolkit';\nimport { playRate } from 'Store/options';\nimport { DANGER } from 'Store/constantes';\n\nexport const doSetAlarma = createAction('doSetAlarma');\n\nexport function setAlarma(idCelda, numero, msg) {\n  return (dispatch) => {\n    dispatch(setAviso(DANGER, idCelda, numero, msg));\n    dispatch(doSetAlarma({ idCelda, numero, msg, fecha: Date.now() }));\n    dispatch(playRate.action(0));\n  };\n}\n\nexport const clearAlarma = createAction('clearAlarma');\n\nexport const setAviso = createAction(\n  'setAviso',\n  (nivel, idCelda, numero, msg) => ({\n    payload: {\n      nivel,\n      idCelda,\n      numero,\n      msg,\n      fecha: Date.now(),\n    },\n  })\n);\n\nexport const clearAvisos = createAction('clearAvisos');\n\nexport const clearAviso = createAction('clearAviso');\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.bloques);\n\nexport const selBloque = selectors.selectById;\n\nexport const selBloqueOcupado = createSelector(\n  selectors.selectById,\n  (bloque) => bloque && bloque.idTren\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { clearPendientes, runAutomatizaciones } from 'Store/actions';\nimport { selModoSemaforo, selSemaforo } from './selectors';\nimport {\n  AUTOMATICO,\n  BLOQUEADO,\n  ALTO,\n  IZQ,\n  CENTRO,\n  DER,\n} from 'Store/constantes';\n\nconst UPDATE_SEMAFORO = 'updateSemaforo';\nexport const updateSemaforo = createAction(UPDATE_SEMAFORO);\n\nexport function doSetAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (!semaforo[senal]) {\n      throw new Error(`Semaforo ${idSemaforo} no tiene senal ${senal}`);\n    }\n    if (semaforo[senal] === aspecto) return false;\n    return dispatch(\n      updateSemaforo({\n        ...semaforo,\n        [senal]: aspecto,\n      })\n    );\n  };\n}\n\nexport function setAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    dispatch(doSetAspectoSenal(idSemaforo, senal, aspecto));\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones(idSemaforo));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport function setModoSemaforo(idSemaforo, modo) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (modo === BLOQUEADO) {\n      dispatch(\n        updateSemaforo(\n          [IZQ, CENTRO, DER].reduce(\n            (s, dir) => (dir in semaforo ? { ...s, [dir]: ALTO } : s),\n            { idSemaforo, modo }\n          )\n        )\n      );\n    } else {\n      dispatch(updateSemaforo({ idSemaforo, modo }));\n    }\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"semaforo\":\"styles_semaforo__1oD_-\",\"verde\":\"styles_verde__3jxOB\",\"rojo\":\"styles_rojo__19OcT\",\"amarillo\":\"styles_amarillo__EBZgn\",\"maniobra\":\"styles_maniobra__1WLEL\",\"blink\":\"styles_blink__1pyu2\",\"blinker\":\"styles_blinker__2Ms7j\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const setBloqueOcupado = createAction(\n  'setBloqueOcupado',\n  (idBloque, idTren, vecino) => ({\n    payload: {\n      idBloque,\n      idTren,\n      vecino,\n    },\n  })\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  setPendiente,\n  runAutomatizaciones,\n  clearPendientes,\n  setBloqueOcupado,\n} from 'Store/actions';\nimport { selCelda, selPendiente, selCeldaIsManual } from 'Store/selectors';\nimport { CAMBIO } from 'Store/constantes';\n\nconst UPDATE_CELDA = 'updateCelda';\nexport const updateCelda = createAction(UPDATE_CELDA);\n\nconst doSetPosicion = createAction(UPDATE_CELDA, (idCelda, posicion) => ({\n  payload: {\n    idCelda,\n    posicion,\n  },\n}));\n\nexport function rawSetPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    const celda = selCelda(getState(), idCelda);\n    if (celda.tipo !== CAMBIO) {\n      throw new Error(`Celda ${idCelda}  no es un cambio`);\n    }\n    if (celda.posicion === posicion) {\n      return false;\n    }\n    if (selPendiente(getState(), idCelda)) return false;\n    dispatch(setPendiente(idCelda));\n    return dispatch(doSetPosicion(idCelda, posicion));\n  };\n}\n\nexport function setPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    dispatch(rawSetPosicion(idCelda, posicion));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones(idCelda));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport const doSetCambioManual = createAction(\n  UPDATE_CELDA,\n  (idCelda, manual) => ({\n    payload: {\n      idCelda,\n      manual,\n    },\n  })\n);\n\nexport function setCambioManual(idCelda, manual) {\n  return (dispatch, getState) => {\n    dispatch(doSetCambioManual(idCelda, manual));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n\nexport const doRemoveTrenFromCelda = createAction(UPDATE_CELDA, (idCelda) => ({\n  payload: {\n    idCelda,\n    idTren: null,\n  },\n}));\n\nexport function removeTrenFromCelda(idCelda) {\n  return (dispatch, getState) => {\n    dispatch(doRemoveTrenFromCelda(idCelda));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, false));\n    }\n  };\n}\n\nexport const doAddTrenToCelda = createAction(\n  UPDATE_CELDA,\n  (idCelda, idTren) => ({\n    payload: {\n      idCelda,\n      idTren,\n    },\n  })\n);\n\nexport function addTrenToCelda(idCelda, idTren) {\n  return (dispatch, getState) => {\n    dispatch(doAddTrenToCelda(idCelda, idTren));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, idTren));\n    }\n  };\n}\n\nexport const setRebota = createAction(UPDATE_CELDA, (idCelda, rebota) => ({\n  payload: {\n    idCelda,\n    rebota,\n  },\n}));\n","import { createSelector } from '@reduxjs/toolkit';\nimport { currentSector } from 'Store/options';\nimport { selBloqueOcupado } from 'Store/bloques/selectors';\nimport { selSemaforo } from 'Store/semaforos/selectors';\nimport { selCelda } from 'Store/celdas/selectors';\nimport { buildId, buildIdBloque } from 'Utils';\nimport { BLOQUE, SEMAFORO, IZQ, CENTRO, DER, ALTO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.enclavamientos);\n\nexport const selEnclavamientos = selectors.selectAll;\nexport const selEnclavamiento = selectors.selectById;\n\nexport const selCondicionesFaltantes = createSelector(\n  (state) => state,\n  currentSector.selector,\n  selEnclavamiento,\n  (state, idSector, encl) =>\n    encl\n      ? encl.deps.reduce((salida, dep) => {\n          switch (dep.tipo) {\n            case BLOQUE:\n              let idTren;\n              let celda;\n              if (dep.bloque) {\n                const idBloque = buildIdBloque(idSector, dep.bloque);\n                idTren = selBloqueOcupado(state, idBloque);\n              } else {\n                const idCelda = buildId({ idSector, ...dep });\n                celda = selCelda(idCelda);\n                idTren = celda.idTren;\n              }\n              if (idTren) {\n                return salida.concat({\n                  ...celda,\n                  ...dep,\n                  idTren,\n                });\n              }\n              break;\n            case SEMAFORO:\n              const idSemaforo = buildId({ ...dep, idSector });\n              const semaforo = selSemaforo(state, idSemaforo);\n\n              const aspecto = dep.senal\n                ? semaforo[dep.senal]\n                : [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n                    return senal in semaforo\n                      ? Math.min(permiso, semaforo[senal])\n                      : permiso;\n                  }, ALTO);\n              if (aspecto !== dep.aspecto) {\n                return salida.concat({\n                  ...dep,\n                  ...semaforo,\n                });\n              }\n              break;\n            default:\n              break;\n          }\n          return salida;\n        }, [])\n      : []\n);\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (bloque) => bloque.idBloque,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (celda) => celda.idCelda,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (semaforo) => semaforo.idSemaforo,\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flechaDespachador\":\"styles_flechaDespachador__jpfOH\",\"trenDespachador\":\"styles_trenDespachador__1G3VE\",\"disabled\":\"styles_disabled__10sbm\",\"tren\":\"styles_tren__25vJ9\",\"close\":\"styles_close__3avcJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"styles_info__2eaPP\",\"warning\":\"styles_warning__Y2zSC\",\"danger\":\"styles_danger__3Ef8R\",\"fixed\":\"styles_fixed__3IULb\",\"buttons\":\"styles_buttons__Of--i\"};","export const selAlarma = (state) => state.alertas.alarma;\n\nexport const selAvisos = (state) => state.alertas.avisos;\n","export const selTrenes = (state, idSector) =>\n  Object.values(state.trenes).filter((tren) =>\n    idSector ? tren.idSector === idSector : true\n  );\nexport const selTren = (state, idTren) => state.trenes[idTren];\n","import { buildId, buildIdBloque } from 'Utils';\n\nimport {\n  selCelda,\n  selSemaforo,\n  selAutomatizacion,\n  selAutomatizaciones,\n  selBloqueOcupado,\n  selBloque,\n} from 'Store/selectors';\n\nimport { automatizacionesActive } from 'Store/options';\n\nimport {\n  LIBRE,\n  ALTO,\n  CAMBIO,\n  SEMAFORO,\n  BLOQUE,\n  FIJO,\n  IZQ,\n  CENTRO,\n  DER,\n  AUTOMATICO,\n} from 'Store/constantes';\n\nimport {\n  rawSetPosicion,\n  doSetAspectoSenal,\n  setBloqueOcupado,\n} from 'Store/actions';\n\nfunction automate(dispatch, getState, idTarget, autom) {\n  const idSector = autom.idSector;\n\n  function automatizacionesCambio(idTarget, deps) {\n    const celdaTarget = selCelda(getState(), idTarget);\n    return deps.reduce((p1, dep) => {\n      const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n      const celdaSource = selCelda(getState(), idSource);\n      const alt = dep.alts.find((alt) => alt.cuando === celdaSource.posicion);\n      if (!alt) return p1;\n      const posicionEsperada = alt.posicion;\n      if (posicionEsperada === celdaTarget.posicion) return p1;\n      if (celdaTarget.manual) return p1;\n      return p1.then(\n        (r1) => !!dispatch(rawSetPosicion(idTarget, posicionEsperada)) || r1\n      );\n    }, Promise.resolve(false));\n  }\n\n  function automatizacionesSemaforo(idTarget, deps) {\n    const semaforoTarget = selSemaforo(getState(), idTarget);\n    if (semaforoTarget.modo !== AUTOMATICO) return false;\n    const aspectoEsperado = {\n      izq: LIBRE,\n      centro: LIBRE,\n      der: LIBRE,\n    };\n    deps.forEach((dep) => {\n      const idSource = buildId({\n        idSector,\n        x: dep.x,\n        y: dep.y,\n        dir: dep.dir,\n      });\n      switch (dep.tipo) {\n        case CAMBIO:\n          const celdaSource = selCelda(getState(), idSource);\n          const alt = dep.alts.find(\n            (alt) => alt.cuando === celdaSource.posicion\n          );\n          if (alt) {\n            Object.keys(aspectoEsperado).forEach((senal) => {\n              if (alt[senal])\n                aspectoEsperado[senal] = Math.max(\n                  aspectoEsperado[senal],\n                  alt[senal]\n                );\n            });\n          }\n          break;\n        case SEMAFORO:\n          const semaforoSource = selSemaforo(getState(), idSource);\n          const estadoSource = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in semaforoSource\n              ? Math.min(permiso, semaforoSource[senal])\n              : permiso;\n          }, ALTO);\n          dep.senales.forEach(({ cuando, senalAfectada, aspecto }) => {\n            if (estadoSource === cuando) {\n              aspectoEsperado[senalAfectada] = Math.max(\n                aspectoEsperado[senalAfectada],\n                aspecto\n              );\n            }\n          });\n          break;\n        case BLOQUE:\n          const ocupado = !!selBloqueOcupado(\n            getState(),\n            buildIdBloque(idSector, dep.bloque)\n          );\n          if (ocupado) {\n            aspectoEsperado[dep.senalAfectada] = ALTO;\n          }\n          break;\n        case FIJO:\n          aspectoEsperado[dep.senalAfectada] = Math.max(\n            dep.aspecto,\n            aspectoEsperado[dep.senalAfectada]\n          );\n          break;\n        default:\n          throw new Error(\n            `Dependencia ${dep.idSource} de ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n          );\n      }\n    });\n    return Object.keys(aspectoEsperado).reduce((p2, senal) => {\n      if (!(senal in semaforoTarget)) return p2;\n      if (semaforoTarget[senal] === aspectoEsperado[senal]) return p2;\n\n      return p2.then(\n        (r2) =>\n          !!dispatch(\n            doSetAspectoSenal(idTarget, senal, aspectoEsperado[senal])\n          ) || r2\n      );\n    }, Promise.resolve(false));\n  }\n\n  const automatizacionesBloque = (idTarget, deps) => {\n    const bloqueTarget = selBloque(getState(), idTarget);\n    deps.reduce(\n      (p3, dep) => {\n        switch (dep.tipo) {\n          case BLOQUE:\n            const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n            const celdaSource = selCelda(getState(), idSource);\n            if (celdaSource.posicion === dep.posicion) {\n              const bloqueSource = selBloque(\n                getState(),\n                buildIdBloque(idSector, dep.bloque)\n              );\n              if (bloqueSource.idTren && !bloqueSource.vecino) {\n                return dispatch(\n                  setBloqueOcupado(idTarget, bloqueSource.idTren, true)\n                );\n              }\n            }\n            return p3;\n          default:\n            throw new Error(\n              `Dependencia de  ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n            );\n        }\n      },\n      bloqueTarget.vecino\n        ? dispatch(setBloqueOcupado(idTarget, false, false))\n        : Promise.resolve(false)\n    );\n  };\n\n  switch (autom.tipo) {\n    case CAMBIO:\n      return automatizacionesCambio(idTarget, autom.deps);\n    case SEMAFORO:\n      return automatizacionesSemaforo(idTarget, autom.deps);\n    case BLOQUE:\n      return automatizacionesBloque(idTarget, autom.deps);\n    default:\n      throw new Error(\n        `Celda ${idTarget} tiene automatización desconocido ${autom.tipo}`\n      );\n  }\n}\n\nexport function runAutomatizacion(idTarget) {\n  return async (dispatch, getState) => {\n    const autom = selAutomatizacion(getState(), idTarget);\n    automate(dispatch, getState, idTarget, autom);\n  };\n}\n\nexport function runAutomatizaciones(idOrigen) {\n  return async (dispatch, getState) => {\n    if (!automatizacionesActive.selector(getState())) return;\n\n    const browseAutomatizaciones = () => {\n      const automatizaciones = selAutomatizaciones(getState());\n      return automatizaciones.reduce((p, autom) => {\n        const { x, y, dir, tipo, bloque, idSector } = autom;\n        const idTarget =\n          tipo === BLOQUE\n            ? buildIdBloque(idSector, bloque)\n            : buildId({ idSector, x, y, dir });\n        if (idOrigen && idTarget === idOrigen) return p;\n        return p.then(\n          (r) => automate(dispatch, getState, idTarget, autom) || r\n        );\n      }, Promise.resolve(false));\n    };\n\n    let countDown = 9;\n    while (countDown && (await browseAutomatizaciones())) countDown--;\n    if (!countDown) throw new Error(`Automatización en loop por ${idOrigen}`);\n    return !!countDown;\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const setPendiente = createAction('setPendiente');\nexport const clearPendientes = createAction('clearPendientes');\n","import { createEntityAdapter } from '@reduxjs/toolkit';\nimport { CAMBIO, SEMAFORO } from 'Store/constantes';\n\nexport default createEntityAdapter({\n  selectId: (automatizacion) => automatizacion.idAutom,\n  sortComparer: (a, b) => {\n    if (a.tipo === CAMBIO && b.tipo === SEMAFORO) return -1;\n    if (a.tipo === SEMAFORO && b.tipo === CAMBIO) return 1;\n    return 0;\n  },\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (enclavamiento) => enclavamiento.idEncl,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (sector) => sector.idSector,\n  sortComparer: (sa, sb) => {\n    var descrA = sa.descrCorta.toUpperCase();\n    var descrB = sb.descrCorta.toUpperCase();\n    if (descrA < descrB) return -1;\n    if (descrA > descrB) return 1;\n    return 0;\n  },\n});\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { currentSector } from 'Store/options';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.automatizaciones);\n\nexport const selAutomatizaciones = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (automatizaciones, idSector) =>\n    automatizaciones.filter((e) => e.idSector === idSector)\n);\n\nexport const selAutomatizacion = selectors.selectById;\n","export const selShowEstado = (state) => state.options.showEstado;\n","module.exports = \"data:image/gif;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alarma\":\"styles_alarma__1_-OE\",\"close\":\"styles_close__1Zwow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close\":\"styles_close__3wiH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sector\":\"styles_sector__1v7a1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rate\":\"styles_rate__26o7Y\"};","var map = {\n\t\"./_sectores\": [\n\t\t93,\n\t\t0\n\t],\n\t\"./_sectores.js\": [\n\t\t93,\n\t\t0\n\t],\n\t\"./circulo\": [\n\t\t121,\n\t\t1\n\t],\n\t\"./circulo.js\": [\n\t\t121,\n\t\t1\n\t],\n\t\"./constitucion\": [\n\t\t122,\n\t\t2\n\t],\n\t\"./constitucion.js\": [\n\t\t122,\n\t\t2\n\t],\n\t\"./cruceDobleCambio\": [\n\t\t123,\n\t\t3\n\t],\n\t\"./cruceDobleCambio.js\": [\n\t\t123,\n\t\t3\n\t],\n\t\"./dosVias\": [\n\t\t124,\n\t\t4\n\t],\n\t\"./dosVias.js\": [\n\t\t124,\n\t\t4\n\t],\n\t\"./empalmes\": [\n\t\t125,\n\t\t5\n\t],\n\t\"./empalmes.js\": [\n\t\t125,\n\t\t5\n\t],\n\t\"./semaforosEncadenados\": [\n\t\t126,\n\t\t6\n\t],\n\t\"./semaforosEncadenados.js\": [\n\t\t126,\n\t\t6\n\t],\n\t\"./simpleDesvio\": [\n\t\t127,\n\t\t7\n\t],\n\t\"./simpleDesvio.js\": [\n\t\t127,\n\t\t7\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 150;\nmodule.exports = webpackAsyncContext;","import { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  doSetAlarma,\n  clearAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n} from 'Store/actions';\n\nexport default createReducer(\n  { alarma: {}, avisos: [] },\n  {\n    [doSetAlarma]: (state, action) => {\n      state.alarma = action.payload;\n    },\n    [clearAlarma]: (state) => {\n      state.alarma = {};\n    },\n    [setAviso]: (state, action) => {\n      state.avisos.unshift(action.payload);\n    },\n    [clearAviso]: (state, action) => {\n      const idx = state.avisos.findIndex((av) => av.fecha === action.payload);\n      if (idx !== -1) state.avisos.splice(idx, 1);\n    },\n    [clearAvisos]: (state) => {\n      state.avisos = [];\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { setBloqueOcupado } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.bloques);\n  },\n  [setBloqueOcupado]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nimport { updateCelda } from 'Store/actions';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.celdas);\n  },\n  [updateCelda]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.automatizaciones || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.enclavamientos || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { showEstado, hideEstado } from './actions';\n\nimport {\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n  playRate,\n  currentSector,\n} from './';\n\nexport default createReducer(\n  {\n    [automatizacionesActive]: automatizacionesActive.default,\n    [showCoords]: showCoords.default,\n    showEstado: { show: false },\n    [playRate]: playRate.default,\n    [showTeletipo]: showTeletipo.default,\n    [showConfig]: showConfig.default,\n  },\n  {\n    [automatizacionesActive]: automatizacionesActive.reducer,\n    [showTeletipo]: showTeletipo.reducer,\n    [showCoords]: showCoords.reducer,\n    [showEstado]: (state, action) => {\n      state.showEstado = {\n        ...action.payload,\n        show: true,\n      };\n    },\n    [hideEstado]: (state) => {\n      state.showEstado = { show: false };\n    },\n    [showConfig]: showConfig.reducer,\n    [playRate]: playRate.reducer,\n    [currentSector]: currentSector.reducer,\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { setPendiente, clearPendientes } from './actions';\n\nexport default createReducer([], {\n  [setPendiente]: (state, action) => {\n    state.push(action.payload);\n  },\n  [clearPendientes]: () => [],\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { UNLOADED, LOADED, LOADING } from 'Store/constantes';\n\nimport sectorAdapter from './adapter';\nimport { loadSector, loadSectores } from './actions';\n\nexport default createReducer(\n  sectorAdapter.getInitialState({\n    loadStatusSectores: UNLOADED,\n    loadStatusEachSector: {},\n  }),\n  {\n    [loadSectores.pending]: (state) => {\n      if (state.loadStatusSectores === UNLOADED) {\n        state.loadStatusSectores = LOADING;\n        state.errorSectores = null;\n      }\n    },\n    [loadSectores.fulfilled]: (state, action) => {\n      if (state.loadStatusSectores === LOADING) {\n        sectorAdapter.setAll(state, action.payload);\n        state.loadStatusSectores = LOADED;\n      }\n    },\n    [loadSectores.rejected]: (state, action) => {\n      state.loadStatusSectores = UNLOADED;\n      state.errorSectores = action.error;\n    },\n    [loadSector.pending]: (state, action) => {\n      const idSector = action.meta.arg;\n      const loadStatus = state.loadStatusEachSector[idSector];\n      if (!loadStatus || loadStatus === UNLOADED) {\n        state.loadStatusEachSector[idSector] = LOADING;\n        state.errorSector = null;\n      }\n    },\n    [loadSector.fulfilled]: (state, action) => {\n      const idSector = action.meta.arg;\n      if (state.loadStatusEachSector[idSector] === LOADING) {\n        state.loadStatusEachSector[idSector] = LOADED;\n      }\n    },\n    [loadSector.rejected]: (state, action) => {\n      state.loadStatusEachSector[action.meta.arg] = UNLOADED;\n      state.errorSector = action.error;\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { updateSemaforo } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.semaforos || []);\n  },\n  [updateSemaforo]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { doAddTren, setTren, doDelTren } from './actions';\n\nexport default createReducer(\n  {},\n  {\n    [doAddTren]: (state, { payload }) => {\n      state[payload.idTren] = payload;\n    },\n    [setTren]: (state, { payload }) => {\n      state[payload.idTren] = {\n        ...state[payload.idTren],\n        ...payload,\n      };\n    },\n    [doDelTren]: (state, { payload: idTren }) => {\n      delete state[idTren];\n    },\n  }\n);\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selBloque, selBloqueOcupado } from './selectors';\nimport { setBloqueOcupado } from './actions';\n\nexport const useBloque = (idBloque) =>\n  useSelector((state) => selBloque(state, idBloque));\n\nexport const useBloqueOcupado = (idBloque) =>\n  useSelector((state) => selBloqueOcupado(state, idBloque));\n\nexport const useSetBloqueOcupado = () => {\n  const dispatch = useDispatch();\n  return (idBloque, idTren) => dispatch(setBloqueOcupado(idBloque, idTren));\n};\n","import { useSelector, useDispatch } from 'react-redux';\nimport { useCallback } from 'react';\nimport { setCambioManual, setPosicion, setRebota } from './actions';\nimport { selCelda, selCeldas, selCeldaIsManual } from './selectors';\n\nexport const useCelda = (idCelda) =>\n  useSelector((state) => selCelda(state, idCelda));\n\nexport const useCeldas = (idSector) =>\n  useSelector((state) => selCeldas(state, idSector));\n\nexport const useCeldaManual = (idCelda) => {\n  const celdaIsManual = useSelector((state) =>\n    selCeldaIsManual(state, idCelda)\n  );\n  const dispatch = useDispatch();\n  const toggleCeldaManual = useCallback(\n    () => dispatch(setCambioManual(idCelda, !celdaIsManual)),\n    [idCelda, dispatch, celdaIsManual]\n  );\n  return [celdaIsManual, toggleCeldaManual];\n};\n\nexport const useSetPosicion = (idCelda) => {\n  const dispatch = useDispatch();\n  return (posicion) => dispatch(setPosicion(idCelda, posicion));\n};\n\nexport const useToggleRebota = (idCelda) => {\n  const celda = useSelector((state) => selCelda(state, idCelda));\n  const dispatch = useDispatch();\n  return () => dispatch(setRebota(idCelda, !celda.rebota));\n};\n","import {\n  selEnclavamientos,\n  selEnclavamiento,\n  selCondicionesFaltantes,\n} from './selectors';\nimport { useSelector } from 'react-redux';\n\nexport const useSelEnclavamientos = () =>\n  useSelector((state) => selEnclavamientos(state));\n\nexport const useSelEnclavamiento = (idOrigen) =>\n  useSelector((state) => selEnclavamiento(state, idOrigen));\n\nexport const useCondicionesFaltantes = (idOrigen) =>\n  useSelector((state) => selCondicionesFaltantes(state, idOrigen));\n","import { runAutomatizaciones, runAutomatizacion } from './actions';\nimport { selAutomatizacion } from './selectors';\nimport { useDispatch, useSelector } from 'react-redux';\n\nexport const useRunAutomatizaciones = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizaciones(idOrigen));\n};\n\nexport const useRunAutomatizacion = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizacion(idOrigen));\n};\n\nexport const useSelAutomatizacion = (idOrigen) =>\n  useSelector((state) => selAutomatizacion(state, idOrigen));\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  showEstado as showEstadoAction,\n  hideEstado as hideEstadoAction,\n} from './actions';\n\nimport { selShowEstado } from './selectors';\nimport {\n  playRate,\n  currentSector,\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n} from './';\n\nexport const useEstado = () => {\n  const estado = useSelector(selShowEstado);\n  const dispatch = useDispatch();\n  const hideEstado = () => dispatch(hideEstadoAction());\n  const showEstado = (args) => dispatch(showEstadoAction(args));\n  return { estado, hideEstado, showEstado };\n};\n\nexport const usePlayRate = playRate.useState;\n\nexport const useCurrentSector = currentSector.useState;\n\nexport const useShowConfig = showConfig.useState;\nexport const useShowCoords = showCoords.useState;\nexport const useAutomatizacionesActive = automatizacionesActive.useState;\nexport const useShowTeletipo = showTeletipo.useState;\n","import { useSelector, useDispatch } from 'react-redux';\nimport {\n  selSector,\n  selSectorLoading,\n  selErrorSector,\n  selSectores,\n  selSectoresLoading,\n  selErrorSectores,\n} from './selectors';\nimport { loadSectores, loadSector } from './actions';\n\nexport const useSector = (idSector) => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector((state) => selSectorLoading(state, idSector)),\n    sector: useSelector((state) => selSector(state, idSector)),\n    error: useSelector(selErrorSector),\n    load: () => dispatch(loadSector(idSector)),\n  };\n};\n\nexport const useSectores = () => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector(selSectoresLoading),\n    sectores: useSelector(selSectores),\n    error: useSelector(selErrorSectores),\n    load: () => dispatch(loadSectores()),\n  };\n};\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selSemaforo, selSemaforos, selModoSemaforo } from './selectors';\nimport { setAspectoSenal, setModoSemaforo } from './actions';\n\nexport const useSemaforo = (idSemaforo) =>\n  useSelector((state) => selSemaforo(state, idSemaforo));\n\nexport const useSemaforos = (celda) =>\n  useSelector((state) => selSemaforos(state, celda));\n\nexport const useSetAspectoSenal = () => {\n  const dispatch = useDispatch();\n  return (idSemaforo, senal, aspecto) =>\n    dispatch(setAspectoSenal(idSemaforo, senal, aspecto));\n};\n\nexport const useModoSemaforo = (idCelda) => {\n  const modoSemaforo = useSelector((state) => selModoSemaforo(state, idCelda));\n  const dispatch = useDispatch();\n  return [\n    modoSemaforo,\n    useCallback((modo) => dispatch(setModoSemaforo(idCelda, modo)), [\n      idCelda,\n      dispatch,\n    ]),\n  ];\n};\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selTrenes, selTren } from './selectors';\nimport { addTren, moveTrenes, delTren, delTrenes } from './actions';\n\nexport const useSelTrenes = () => useSelector((state) => selTrenes(state));\n\nexport const useMoveTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(moveTrenes());\n};\nexport const useTren = (idTren) =>\n  useSelector((state) => selTren(state, idTren));\n\nexport const useAddTren = () => {\n  const dispatch = useDispatch();\n  return (celda, dir, maxSpeed = 1) => dispatch(addTren(celda, dir, maxSpeed));\n};\n\nexport const useDelTren = () => {\n  const dispatch = useDispatch();\n  return (tren) => dispatch(delTren(tren));\n};\n\nexport const useDelTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(delTrenes());\n};\n","import { configureStore } from '@reduxjs/toolkit';\r\n\r\nimport alertas from './alertas/reducer';\r\nimport bloques from './bloques/reducer';\r\nimport celdas from './celdas/reducer';\r\nimport automatizaciones from './automatizaciones/reducer';\r\nimport enclavamientos from './enclavamientos/reducer';\r\nimport options from './options/reducer';\r\nimport pendientes from './pendientes/reducer';\r\nimport sectores from './sectores/reducer';\r\nimport semaforos from './semaforos/reducer';\r\nimport trenes from './trenes/reducer';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    alertas,\r\n    bloques,\r\n    celdas,\r\n    automatizaciones,\r\n    enclavamientos,\r\n    options,\r\n    pendientes,\r\n    sectores,\r\n    semaforos,\r\n    trenes,\r\n  },\r\n});\r\n\r\nexport * from './alertas/hooks';\r\nexport * from './bloques/hooks';\r\nexport * from './celdas/hooks';\r\nexport * from './enclavamientos/hooks';\r\nexport * from './automatizaciones/hooks';\r\nexport * from './options/hooks';\r\nexport * from './sectores/hooks';\r\nexport * from './semaforos/hooks';\r\nexport * from './trenes/hooks';\r\n","import React from 'react';\nimport styles from './styles.module.css';\n\nexport function CambioNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 0 V 16 32\" className={styles.main} />\n    </svg>\n  );\n}\nexport function CambioDesviado() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 0 V 16 16\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleIzq() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 0 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleDer() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport { FaLock as Locked, FaLockOpen as Unlocked } from 'react-icons/fa';\nexport { GiPlainCircle as Circle } from 'react-icons/gi';\nexport { GoMarkGithub as GitHub } from 'react-icons/go';\nexport { MdTrain as Train } from 'react-icons/md';\nexport { GoPlay as Play } from 'react-icons/go';\nexport { GoTrashcan as Trash } from 'react-icons/go';\n","import React, { useState } from 'react';\n\nimport { Table, Button, Label, Input } from 'reactstrap';\nimport { useAvisos, useShowTeletipo, useCelda } from 'Store';\nimport { isPlainClick, nombreEntity } from 'Utils';\nimport { Trash } from 'Components/Icons';\nimport styles from './styles.module.css';\nimport { INFO } from 'Store/constantes';\n\nfunction Item({ nivel, fecha, idCelda, numero, msg, clearAviso }) {\n  const celda = useCelda(idCelda);\n  const clear = (ev) => isPlainClick(ev) && clearAviso(fecha);\n  return (\n    <tr className={styles[nivel]}>\n      <td>{new Date(fecha).toLocaleString()}</td>\n      <td>{nombreEntity(celda)}</td>\n      <td>{numero}</td>\n      <td colSpan={2}>{msg}</td>\n      <td>\n        <Trash onClick={clear} />\n      </td>\n    </tr>\n  );\n}\n\nexport default function Teletipo() {\n  const [mensajes, clearAvisos, clearAviso] = useAvisos();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [info, setInfo] = useState(false);\n\n  const clearAll = (ev) => isPlainClick(ev) && clearAvisos();\n  const close = (ev) => isPlainClick(ev) && setShowTeletipo(!showTeletipo);\n  const toggleInfo = (ev) => setInfo((i) => !i);\n\n  return mensajes.length ? (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>Fecha</th>\n          <th>Celda</th>\n          <th>Tren</th>\n          <th>Mensaje</th>\n          <th>\n            <Label>\n              <Input type=\"checkbox\" checked={info} onChange={toggleInfo} />\n              &nbsp;Ver Info\n            </Label>\n          </th>\n          <th className={styles.buttons}>\n            <Button\n              className={styles.close}\n              title=\"Borrar todas las notificaciones\"\n              onClick={clearAll}\n              size=\"sm\"\n            >\n              <Trash />\n            </Button>\n            <Button close onClick={close} title=\"Cerrar Teletipo\" size=\"sm\" />\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {mensajes\n          .filter((row) => (info ? true : row.nivel !== INFO))\n          .map((row) => (\n            <Item {...row} key={row.fecha} clearAviso={clearAviso} />\n          ))}\n      </tbody>\n    </Table>\n  ) : (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>No hay mensajes</th>\n        </tr>\n      </thead>\n    </Table>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  setAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n  clearAlarma,\n} from './actions';\nimport { selAlarma, selAvisos } from './selectors';\n\nexport const useSetAlarma = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAlarma(...props));\n};\n\nexport const useAlarma = () => {\n  const dispatch = useDispatch();\n  return [useSelector(selAlarma), () => dispatch(clearAlarma())];\n};\n\nexport const useAvisos = () => {\n  const dispatch = useDispatch();\n  return [\n    useSelector(selAvisos),\n    () => dispatch(clearAvisos()),\n    (fecha) => dispatch(clearAviso(fecha)),\n  ];\n};\n\nexport const useSetAviso = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAviso(...props));\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, nombreEntity, useLongPress } from 'Utils';\nimport { SEMAFORO, MANIOBRA, BLOQUEADO, AUTOMATICO } from 'Store/constantes';\nimport { useEstado, useSemaforo, useModoSemaforo } from 'Store';\nimport styles from './styles.module.css';\n\nconst estilosAspectos = ['', 'verde', 'amarillo', 'rojo'];\n\nexport default function Semaforo({ idSemaforo, placement }) {\n  const semaforo = useSemaforo(idSemaforo);\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const { idSector, x, y, centro, izq, der } = semaforo || {};\n  const { showEstado } = useEstado();\n  const longPressProps = useLongPress({\n    onClick: () => {\n      if (semaforo.soloManiobra) {\n        showEstado({\n          tipo: SEMAFORO,\n          idCelda: buildId({\n            idSector,\n            x,\n            y,\n          }),\n          idSemaforo: buildId(semaforo),\n          placement,\n        });\n      } else {\n        setModoSemaforo(modoSemaforo === AUTOMATICO ? BLOQUEADO : AUTOMATICO);\n      }\n    },\n    onLongPress: (ev) =>\n      showEstado({\n        tipo: SEMAFORO,\n        idCelda: buildId({\n          idSector,\n          x,\n          y,\n        }),\n        idSemaforo: buildId(semaforo),\n        placement,\n      }),\n  });\n  if (!semaforo) return null;\n\n  /*\n  Todos estos calculos son a ojo, lo cual hace bastante irrelevante las\n  constances como ANCHO_CELDA y demas porque deberían hacerse proporcional\n  y ajustarse segun se quiera\n  */\n  const r = 5;\n  const cy = 38;\n  const xTope = 95;\n  /* eslint-disable no-mixed-operators */\n  const x1 = xTope - 2 * r;\n  const x2 = x1 + 2 - 2 * r;\n  /* eslint-enable no-mixed-operators */\n\n  return (\n    <g\n      className={classNames(styles.semaforo, {\n        [styles.maniobra]: !semaforo.soloManiobra && modoSemaforo === MANIOBRA,\n        [styles.blink]: !semaforo.soloManiobra && modoSemaforo === BLOQUEADO,\n      })}\n      {...longPressProps}\n    >\n      <title>{nombreEntity(semaforo)}</title>\n      <line x1={xTope} y1={cy} x2={x2 + r} y2={cy} />\n      <line x1={xTope} y1={cy - r} x2={xTope} y2={cy + r} />\n      <circle\n        className={styles[estilosAspectos[centro]]}\n        cx={izq || der ? x2 : x1}\n        cy={cy}\n        r={r}\n      />\n      {izq && (\n        <circle\n          className={styles[estilosAspectos[izq]]}\n          cx={x1}\n          cy={cy + r}\n          r={r}\n        />\n      )}\n      {der && (\n        <circle\n          className={styles[estilosAspectos[der]]}\n          cx={x1}\n          cy={cy - r}\n          r={r}\n        />\n      )}\n    </g>\n  );\n}\n","import React from 'react';\n\nimport { CENTRO_CELDA, X, Y } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tramo({ dir, estilo = 'tramo-normal' }) {\n  return (\n    <line\n      x1={CENTRO_CELDA}\n      y1={CENTRO_CELDA}\n      x2={X[dir]}\n      y2={Y[dir]}\n      className={styles[estilo]}\n    />\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Linea({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={index}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n\nLinea.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cambio({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        key=\"punta\"\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      {celda.ramas.map((dir, idx) => (\n        <Tramo\n          key={dir}\n          dir={dir}\n          estilo={\n            celda.posicion === idx\n              ? ocupado\n                ? 'tramo-ocupado'\n                : 'tramo-normal'\n              : 'tramo-muerto'\n          }\n        />\n      ))}\n    </g>\n  );\n}\nCambio.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\nimport { CENTRO_CELDA, ANCHO_CELDA, ANG } from 'Components/common';\n\nimport styles from './styles.module.css';\nexport default function Paragolpe({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={ANCHO_CELDA / 10}\n        fill={ocupado ? 'yellow' : 'black'}\n      />\n      {celda.rebota && (\n        <line\n          x1={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y1={CENTRO_CELDA - ANCHO_CELDA / 10}\n          x2={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y2={CENTRO_CELDA + ANCHO_CELDA / 10}\n          className={styles.rebota}\n          transform={`rotate(${\n            ANG[celda.punta] + 180\n          }, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n        />\n      )}\n    </g>\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cruce({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.linea1.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n      {celda.linea2.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n","import React from 'react';\nimport Tramo from './Tramo';\nimport { useCelda } from 'Store';\nimport { buildId, nombreEntity } from 'Utils';\nimport { CENTRO_CELDA } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Empalme({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const otraCelda = useCelda(\n    buildId({\n      idSector: celda.idSector,\n      x: celda.otro.x,\n      y: celda.otro.y,\n    })\n  );\n  return (\n    <g>\n      <text\n        x={CENTRO_CELDA}\n        y={CENTRO_CELDA - 5}\n        textAnchor=\"middle\"\n        className={styles.empalme}\n      >\n        Continúa en:\n      </text>\n      <text\n        x={CENTRO_CELDA}\n        y={CENTRO_CELDA + 15}\n        textAnchor=\"middle\"\n        className={styles.empalme}\n      >\n        {nombreEntity(otraCelda)}\n      </text>\n      <Tramo dir={celda.punta} estilo={'tramo-empalme'} />\n    </g>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  ListGroup,\n  ListGroupItem,\n} from 'reactstrap';\n\nimport { useLongPress, isPlainClick, holdPropagation } from 'Utils';\nimport { CENTRO_CELDA } from 'Components/common';\nimport { CAMBIO } from 'Store/constantes';\nimport { useAddTren, useBloqueOcupado } from 'Store';\n\nimport styles from './styles.module.css';\n\nfunction MenuTrenes({ celda, dir, cerrar }) {\n  const addTren = useAddTren();\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      cerrar();\n    }\n  };\n\n  const trenes = [\n    {\n      descr: 'Normal',\n      maxSpeed: 1,\n    },\n    {\n      descr: 'Rápido',\n      maxSpeed: 3,\n    },\n  ];\n  const despachar = (ev) => {\n    if (isPlainClick(ev)) {\n      addTren(celda, dir, trenes[ev.currentTarget.dataset.tipo].maxSpeed);\n    }\n  };\n\n  return (\n    <Popover isOpen target={celda.idCelda} placement=\"top\">\n      <PopoverHeader>\n        Tipos de trenes\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        <ListGroup>\n          {trenes.map((tren, idx) => (\n            <ListGroupItem key={idx} data-tipo={idx} onClick={despachar}>\n              {tren.descr}\n            </ListGroupItem>\n          ))}\n        </ListGroup>\n      </PopoverBody>\n    </Popover>\n  );\n}\n\nfunction ActualDespachador({ celda, dir }) {\n  const addTren = useAddTren();\n  const bloqueOcupado = useBloqueOcupado(celda.idBloque);\n  const [isOpen, setOpen] = useState(false);\n  const cerrar = () => setOpen(false);\n  const longPressProps = useLongPress({\n    onClick: () => {\n      if (celda.idTren) return;\n      addTren(celda, dir);\n    },\n    onLongPress: () => {\n      setOpen(true);\n    },\n  });\n  return (\n    <g {...holdPropagation}>\n      {isOpen && <MenuTrenes celda={celda} dir={dir} cerrar={cerrar} />}\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={9}\n        className={styles.trenDespachador}\n      />\n      {!bloqueOcupado && (\n        <g className={styles.flechaDespachador} {...longPressProps}>\n          <path\n            d=\"M 11,-12 L 29,0 11,12 z\"\n            transform={`translate(${CENTRO_CELDA},${CENTRO_CELDA})`}\n          />\n        </g>\n      )}\n    </g>\n  );\n}\n\nexport default function Despachador({ celda, dir }) {\n  return Array.isArray(celda.despachador) &&\n    celda.despachador.includes(dir) &&\n    !celda.idTren &&\n    (celda.tipo !== CAMBIO ||\n      celda.punta === dir ||\n      celda.ramas[celda.posicion] === dir) ? (\n    <ActualDespachador celda={celda} dir={dir} />\n  ) : null;\n}\n","import React from 'react';\nimport { Train } from 'Components/Icons';\nimport { useTren } from 'Store';\n\nimport { CENTRO_CELDA } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tren({ celda }) {\n  const tren = useTren(celda.idTren);\n  const relSpeed = tren.speed / (tren.maxSpeed || 1);\n\n  return (\n    <g transform={`translate(${CENTRO_CELDA - 8}, ${CENTRO_CELDA - 8})`}>\n      <circle cx={8} cy={8} r={9} className={styles.tren}>\n        <title>{`${tren.numero}\\nVelocidad: ${tren.speed}\\nFalta: ${tren.falta}`}</title>\n      </circle>\n      {relSpeed && relSpeed !== 1 ? (\n        <path d=\"M 8 0 A 8 8 90 1 0 8 16 z\" fill=\"orange\" />\n      ) : null}\n      <Train color={relSpeed ? 'black' : 'red'} size=\"16px\" />\n    </g>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  ListGroup,\n  ListGroupItem,\n} from 'reactstrap';\n\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nimport { BLOQUE, SEMAFORO } from 'Store/constantes';\nimport { useCondicionesFaltantes } from 'Store';\nimport styles from './styles.module.css';\n\nexport function ListaFaltantes({ faltantes }) {\n  return (\n    <ListGroup>\n      {faltantes.map((falta, idx) => {\n        switch (falta.tipo) {\n          case BLOQUE:\n            return (\n              <ListGroupItem key={idx}>{`Bloque ocupado ${\n                falta.bloque || nombreEntity(falta)\n              }`}</ListGroupItem>\n            );\n          case SEMAFORO:\n            return (\n              <ListGroupItem key={idx}>{`Semáforo libre: ${nombreEntity(\n                falta\n              )}`}</ListGroupItem>\n            );\n          default:\n            break;\n        }\n        return '????';\n      })}\n    </ListGroup>\n  );\n}\n\nexport default function CondicionesFaltantes({ idCelda, setShowFaltantes }) {\n  const faltantes = useCondicionesFaltantes(idCelda);\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowFaltantes(false);\n    }\n  };\n\n  return faltantes.length ? (\n    <Popover isOpen={!!idCelda} target={idCelda}>\n      <PopoverHeader>\n        Condiciones Faltantes\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        <ListaFaltantes faltantes={faltantes} />\n      </PopoverBody>\n    </Popover>\n  ) : null;\n}\n","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, useLongPress } from 'Utils';\n\nimport {\n  useCelda,\n  useShowCoords,\n  useEstado,\n  useBloque,\n  useSetPosicion,\n  useToggleRebota,\n  useCondicionesFaltantes,\n} from 'Store';\nimport Semaforo from 'Components/Semaforo';\nimport { LINEA, CAMBIO, PARAGOLPE, CRUCE, EMPALME } from 'Store/constantes';\n\nimport { ANCHO_CELDA, CENTRO_CELDA, ANG } from 'Components/common';\nimport styles from './styles.module.css';\n\nimport Linea from './Linea';\nimport Cambio from './Cambio';\nimport Paragolpe from './Paragolpe';\nimport Cruce from './Cruce';\nimport Empalme from './Empalme';\nimport { Despachador, Tren } from 'Components/Trenes';\nimport CondicionesFaltantes from 'Components/Enclavamientos';\n\nexport function ActualCelda({\n  celda,\n  minX,\n  maxX,\n  minY,\n  maxY,\n  cellWidth,\n  padLeft,\n  padTop,\n}) {\n  const idCelda = celda.idCelda;\n  const setPosicion = useSetPosicion(idCelda);\n  const toggleRebota = useToggleRebota(idCelda);\n  const bloque = useBloque(celda.idBloque);\n  const [showCoords] = useShowCoords();\n  const { showEstado } = useEstado();\n  const condicionesFaltantes = useCondicionesFaltantes(idCelda);\n  const [showFaltantes, setShowFaltantes] = useState();\n  const longPressProps = useLongPress({\n    onClick: (ev) => {\n      switch (celda.tipo) {\n        case CAMBIO:\n          if (condicionesFaltantes.length && !celda.manual) {\n            setShowFaltantes(true);\n          } else {\n            setPosicion((celda.posicion + 1) % celda.ramas.length);\n          }\n          break;\n        case PARAGOLPE:\n          toggleRebota();\n          break;\n        default:\n          break;\n      }\n    },\n    onLongPress: (ev) => {\n      showEstado({\n        tipo: celda.tipo,\n        idCelda,\n        placement,\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (showFaltantes && !condicionesFaltantes.length) {\n      setShowFaltantes(false);\n    }\n  }, [showFaltantes, condicionesFaltantes.length]);\n\n  if (!cellWidth || !celda) return null;\n  const placement = celda.x > (maxX - minX) / 2 ? 'left' : 'right';\n\n  const coords = showCoords ? `[${celda.x},${celda.y}]` : '';\n  const title = [];\n  if (celda.nombre) {\n    title.push(`Celda: ${celda.nombre}`);\n  }\n  title.push(`Coordenadas: [${celda.x},${celda.y}]`);\n\n  if (bloque) {\n    title.push(`Bloque: ${bloque.nombre}`);\n  }\n  if (celda.idTren) {\n    title.push(`Con tren ${celda.idTren}`);\n  }\n\n  let Renderer;\n  let dirs;\n\n  switch (celda.tipo) {\n    case LINEA:\n      dirs = celda.puntas;\n      Renderer = Linea;\n      break;\n    case CAMBIO:\n      dirs = celda.ramas.concat(celda.punta);\n      Renderer = Cambio;\n      break;\n    case PARAGOLPE:\n      dirs = [celda.punta];\n      Renderer = Paragolpe;\n      break;\n    case CRUCE:\n      dirs = celda.linea1.puntas.concat(celda.linea2.puntas);\n      Renderer = Cruce;\n      break;\n    case EMPALME:\n      Renderer = Empalme;\n      dirs = [];\n      break;\n    default:\n  }\n\n  return (\n    <>\n      <div\n        id={idCelda}\n        className={classNames(styles.rect, {\n          [styles.manual]: celda.manual,\n        })}\n        style={{\n          left: padLeft + celda.x * cellWidth,\n          top: celda.y * cellWidth + padTop,\n          width: cellWidth,\n          height: cellWidth,\n        }}\n        title={title.join('\\n')}\n        {...longPressProps}\n      >\n        <svg\n          viewBox={`0 0 ${ANCHO_CELDA} ${ANCHO_CELDA}`}\n          width={cellWidth}\n          height={cellWidth}\n          className={styles.svg}\n        >\n          <text x=\"0\" y=\"95\" className={styles.text}>\n            {coords}\n          </text>\n          {celda.nombre && (\n            <text textAnchor=\"end\" x={95} y={95} className={styles.text}>\n              {celda.nombre}\n            </text>\n          )}\n          <Renderer idCelda={idCelda} />\n          {dirs.map((dir) => (\n            <g\n              key={dir}\n              transform={`rotate(${ANG[dir]}, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n            >\n              <Semaforo\n                idSemaforo={buildId({\n                  ...celda,\n                  dir,\n                })}\n                placement={placement}\n              />\n              {!!celda.despachador && <Despachador celda={celda} dir={dir} />}\n            </g>\n          ))}\n          {celda.idTren ? <Tren celda={celda} /> : null}\n        </svg>\n      </div>\n      {showFaltantes && (\n        <CondicionesFaltantes\n          idCelda={idCelda}\n          setShowFaltantes={setShowFaltantes}\n        />\n      )}\n    </>\n  );\n}\n\nexport default function Celda({ idCelda, ...rest }) {\n  const celda = useCelda(idCelda);\n  if (celda) {\n    return <ActualCelda celda={celda} {...rest} />;\n  }\n  return null;\n}\n\nCelda.whyDidYouRender = false;\n","import React, { useEffect } from 'react';\nimport { useResize } from 'Utils';\n\nimport { useSector, useCeldas } from 'Store';\n\nimport Celda from 'Components/Celda';\nimport loadingIcon from 'Components/Icons/loading.gif';\nimport { LOADED } from 'Store/constantes';\n\nimport styles from './styles.module.css';\n\nfunction ActualSector({ sector }) {\n  const celdas = useCeldas(sector.idSector);\n  const size = useResize();\n  const { descrCorta, minX, maxX, minY, maxY } = sector;\n  const ancho = maxX - minX + 1;\n  const alto = maxY - minY + 1;\n  const cellWidth = Math.min(Math.ceil((size.width - 50) / ancho), 200);\n  const padLeft = (size.width - ancho * cellWidth) / 2;\n  const padTop = Math.max(0, -minY * cellWidth) + 60; // 60 to allow for space for menu\n\n  useEffect(() => {\n    document.title = `CTC - ${descrCorta}`;\n  });\n  const attrs = {\n    minX,\n    maxX,\n    minY,\n    maxY,\n    cellWidth,\n    padLeft,\n    padTop,\n  };\n  return (\n    <>\n      <div className={styles.sector}>\n        {celdas.map((c) => (\n          <Celda key={c.idCelda} idCelda={c.idCelda} {...attrs} />\n        ))}\n      </div>\n      <div style={{ height: (alto + 2) * cellWidth }}></div>\n    </>\n  );\n}\n\nexport default function Sector({ idSector }) {\n  const { sector, loading, error, load } = useSector(idSector);\n\n  useEffect(() => {\n    if (!error && loading !== LOADED) load();\n  }, [error, load, loading]);\n\n  if (error) {\n    return <pre>Error cargando 'sector': {JSON.stringify(error, null, 2)}</pre>;\n  }\n  if (loading !== LOADED) {\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualSector sector={sector} />;\n}\n","import React from 'react';\n\nimport { ButtonGroup, Button, PopoverBody } from 'reactstrap';\n\nimport {\n  CambioNormal,\n  CambioDesviado,\n  TripleIzq,\n  TripleNormal,\n  TripleDer,\n  Locked,\n  Unlocked,\n} from 'Components/Icons';\n\nimport { ListaFaltantes } from 'Components/Enclavamientos';\n\nimport { isPlainClick } from 'Utils';\nimport { useCeldaManual, useSetPosicion, useCondicionesFaltantes } from 'Store';\n\nimport { NORMAL, DESVIADO, ALTERNATIVA } from 'Store/constantes';\nimport styles from './styles.module.css';\n\nexport default function EstadoCambio({ celda }) {\n  const { posicion, idCelda, bloque } = celda;\n  const setPosicion = useSetPosicion(idCelda);\n  const [celdaIsManual, toggleCeldaManual] = useCeldaManual(idCelda);\n  const faltantes = useCondicionesFaltantes(idCelda);\n\n  const onSetCambioNormal = (ev) => isPlainClick(ev) && setPosicion(NORMAL);\n  const onSetCambioDesviado = (ev) => isPlainClick(ev) && setPosicion(DESVIADO);\n  const onSetCambioAlternativa = (ev) =>\n    isPlainClick(ev) && setPosicion(ALTERNATIVA);\n  const onSetManual = (ev) => isPlainClick(ev) && toggleCeldaManual();\n\n  const disableCambio = !celdaIsManual && faltantes.length > 0;\n  return (\n    <PopoverBody>\n      {bloque && <p>Bloque: {bloque}</p>}\n      {faltantes.length && (\n        <div className={styles.faltantes}>\n          <h3>Condiciones Faltantes</h3>\n          <ListaFaltantes faltantes={faltantes} />\n        </div>\n      )}\n      <ButtonGroup className={styles.cambio}>\n        {celda.ramas.length === 2 ? (\n          <>\n            <Button\n              size=\"sm\"\n              disabled={disableCambio}\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <CambioNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              disabled={disableCambio}\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <CambioDesviado />\n            </Button>\n          </>\n        ) : (\n          <>\n            {' '}\n            <Button\n              size=\"sm\"\n              disabled={disableCambio}\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <TripleIzq />\n            </Button>\n            <Button\n              size=\"sm\"\n              disabled={disableCambio}\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <TripleNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              disabled={disableCambio}\n              onClick={onSetCambioAlternativa}\n              color={posicion === ALTERNATIVA ? 'primary' : 'outline-secondary'}\n            >\n              <TripleDer />\n            </Button>\n          </>\n        )}\n      </ButtonGroup>\n      <Button\n        className={styles.manual}\n        size=\"sm\"\n        color={celdaIsManual ? 'danger' : 'outline-info'}\n        onClick={onSetManual}\n      >\n        {celdaIsManual ? <Unlocked /> : <Locked />}\n      </Button>\n    </PopoverBody>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Locked, Unlocked, Circle } from 'Components/Icons';\nimport { LIBRE, PRECAUCION, ALTO, MANIOBRA } from 'Store/constantes';\nimport { isPlainClick } from 'Utils';\n\nimport {\n  useSetAspectoSenal,\n  useModoSemaforo,\n  useRunAutomatizaciones,\n} from 'Store';\n\nimport {\n  ButtonGroup,\n  Button,\n  PopoverBody,\n  Container,\n  Row,\n  Col,\n} from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { AUTOMATICO } from '../../Store/constantes';\n\nexport function EstadoSenal({ senal, aspecto, onSetAspecto }) {\n  const onSetAlto = (ev) => isPlainClick(ev) && onSetAspecto(senal, ALTO);\n  const onSetPrecaucion = (ev) =>\n    isPlainClick(ev) && onSetAspecto(senal, PRECAUCION);\n  const onSetLibre = (ev) => isPlainClick(ev) && onSetAspecto(senal, LIBRE);\n\n  return (\n    <>\n      <ButtonGroup vertical>\n        <Button\n          size=\"sm\"\n          color={aspecto === ALTO ? 'danger' : 'outline-danger'}\n          onClick={onSetAlto}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === PRECAUCION ? 'warning' : 'outline-warning'}\n          onClick={onSetPrecaucion}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === LIBRE ? 'success' : 'outline-success'}\n          onClick={onSetLibre}\n        >\n          <Circle />\n        </Button>\n      </ButtonGroup>\n    </>\n  );\n}\n\nexport default function EstadoSemaforo({ semaforo }) {\n  const { izq, soloManiobra, centro, der, idSemaforo } = semaforo;\n  const setAspectoSenal = useSetAspectoSenal();\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onSetAspecto = (senal, aspecto) => {\n    if (modoSemaforo === MANIOBRA || soloManiobra) {\n      setAspectoSenal(idSemaforo, senal, aspecto);\n    }\n    if (soloManiobra) {\n      runAutomatizaciones(idSemaforo);\n    }\n  };\n\n  const onSetManual = () => {\n    setModoSemaforo(modoSemaforo === AUTOMATICO ? MANIOBRA : AUTOMATICO);\n  };\n\n  return (\n    <PopoverBody>\n      <Container>\n        <div\n          className={classNames({\n            [styles.disabled]: !soloManiobra && !modoSemaforo,\n          })}\n        >\n          <Row>\n            <Col>\n              <div\n                className={classNames(styles.pushDown, {\n                  [styles.hidden]: !izq,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"izq\"\n                  aspecto={izq}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames({\n                  [styles.hidden]: !centro,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"centro\"\n                  aspecto={centro}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames(styles.semaforo, styles.pushDown, {\n                  [styles.hidden]: !der,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"der\"\n                  aspecto={der}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n          </Row>\n        </div>\n        {!soloManiobra && (\n          <Row>\n            <Button\n              className={styles.manual}\n              size=\"sm\"\n              color={modoSemaforo ? 'danger' : 'outline-info'}\n              onClick={onSetManual}\n            >\n              {modoSemaforo ? <Unlocked /> : <Locked />}\n            </Button>\n          </Row>\n        )}\n      </Container>\n    </PopoverBody>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport classnames from 'classnames';\n\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  TabContent,\n  TabPane,\n  Nav,\n  NavItem,\n  NavLink,\n} from 'reactstrap';\n\nimport {\n  useCelda,\n  useSemaforo,\n  useShowConfig,\n  useEstado,\n  useSelAutomatizacion,\n  useSelEnclavamiento,\n} from 'Store';\n\nimport { CAMBIO } from 'Store/constantes';\n\nimport EstadoCambio from './Cambio';\nimport EstadoSemaforo from './Semaforo';\n\nimport styles from './styles.module.css';\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nconst TAB_SEMAFORO = 'Semaforo';\nconst TAB_CELDA = 'Celda';\nconst TAB_AUTOM = 'Autom.';\nconst TAB_COMANDO = 'Cmd.';\nconst TAB_ENCL = 'Enclav.';\n\nexport default function Estado() {\n  const {\n    estado: { show, ...more },\n  } = useEstado();\n  // Had to break it in two because selectors don't work with invalid ids\n  // so, if no show, no Popover.\n  // I can't call useSelector conditionally so I render the component conditionally\n  return show && <EstadoPopover {...more} />;\n}\n\nfunction EstadoPopover({ idCelda, idSemaforo, placement }) {\n  const [oldId, setOldId] = useState();\n  const celda = useCelda(idCelda);\n  const semaforo = useSemaforo(idSemaforo);\n  const [showConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const automatizacion = useSelAutomatizacion(idSemaforo || idCelda);\n  const enclavamiento = useSelEnclavamiento(idCelda);\n\n  const [activeTab, setActiveTab] = useState();\n\n  const activeElement = semaforo || celda.tipo === CAMBIO;\n\n  useEffect(() => {\n    if (oldId !== idCelda) {\n      setActiveTab(\n        activeElement ? TAB_COMANDO : idSemaforo ? TAB_SEMAFORO : TAB_CELDA\n      );\n      setOldId(idCelda);\n    }\n  }, [oldId, idCelda, activeElement, idSemaforo]);\n\n  const toggle = (tab) => {\n    if (activeTab !== tab) setActiveTab(tab);\n  };\n\n  const onClose = (ev) => isPlainClick(ev) && hideEstado();\n\n  const Command = () => (\n    <>\n      {semaforo && <EstadoSemaforo semaforo={semaforo} />}\n      {!semaforo && celda.tipo === CAMBIO && <EstadoCambio celda={celda} />}\n    </>\n  );\n  // See: https://github.com/reactstrap/reactstrap/issues/1404#issuecomment-602011689\n  // I am using a patched Popover.\n  return (\n    <Popover\n      isOpen={!!(showConfig || activeElement)}\n      target={idCelda}\n      placement={placement}\n    >\n      <PopoverHeader>\n        {semaforo\n          ? `Semáforo ${nombreEntity(semaforo)}`\n          : `Celda ${nombreEntity(celda)}`}\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        {showConfig ? (\n          <>\n            <Nav pills className={styles.solapas}>\n              {activeElement && (\n                <NavItem title=\"Mostrar Comandos\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_COMANDO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_COMANDO);\n                    }}\n                  >\n                    {TAB_COMANDO}\n                  </NavLink>\n                </NavItem>\n              )}\n              {semaforo && (\n                <NavItem title=\"Mostrar COnfiguración Semaforo\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_SEMAFORO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_SEMAFORO);\n                    }}\n                  >\n                    {TAB_SEMAFORO}\n                  </NavLink>\n                </NavItem>\n              )}\n              <NavItem title=\"Mostrar Configuración Celda\">\n                <NavLink\n                  className={classnames(styles.solapa, {\n                    active: activeTab === TAB_CELDA,\n                  })}\n                  onClick={() => {\n                    toggle(TAB_CELDA);\n                  }}\n                >\n                  {TAB_CELDA}\n                </NavLink>\n              </NavItem>\n              {automatizacion && (\n                <NavItem title=\"Mostrar Configuración Automatización\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_AUTOM,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_AUTOM);\n                    }}\n                  >\n                    {TAB_AUTOM}\n                  </NavLink>\n                </NavItem>\n              )}\n              {enclavamiento && (\n                <NavItem title=\"Mostrar Configuración Enclavamiento\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_ENCL,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_ENCL);\n                    }}\n                  >\n                    {TAB_ENCL}\n                  </NavLink>\n                </NavItem>\n              )}\n            </Nav>\n            <TabContent activeTab={activeTab}>\n              {activeElement && (\n                <TabPane tabId={TAB_COMANDO}>\n                  <Command />\n                </TabPane>\n              )}\n              {semaforo && (\n                <TabPane tabId={TAB_SEMAFORO}>\n                  <pre>{JSON.stringify(semaforo, null, 2)}</pre>\n                </TabPane>\n              )}\n              <TabPane tabId={TAB_CELDA}>\n                <pre>{JSON.stringify(celda, null, 2)}</pre>\n              </TabPane>\n              {automatizacion && (\n                <TabPane tabId={TAB_AUTOM}>\n                  <pre>{JSON.stringify(automatizacion, null, 2)}</pre>\n                </TabPane>\n              )}\n              {enclavamiento && (\n                <TabPane tabId={TAB_ENCL}>\n                  <pre>{JSON.stringify(enclavamiento, null, 2)}</pre>\n                </TabPane>\n              )}\n            </TabContent>\n          </>\n        ) : (\n          <Command />\n        )}\n      </PopoverBody>\n    </Popover>\n  );\n}\n","import React from 'react';\nimport { useAlarma, useDelTrenes, useRunAutomatizaciones } from 'Store';\nimport { Button, Popover, PopoverHeader, PopoverBody } from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { isPlainClick } from 'Utils';\n\nexport default function Alarma() {\n  const [{ idCelda, numero, msg, fecha }, clearAlarma] = useAlarma();\n  const delTrenes = useDelTrenes();\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      clearAlarma();\n      delTrenes();\n      runAutomatizaciones();\n    }\n  };\n\n  return (\n    !!idCelda && (\n      <Popover isOpen={!!idCelda} target={idCelda}>\n        <PopoverHeader className={styles.alarma}>\n          Tren {numero}\n          <Button close className={styles.close} onClick={onClose} />\n        </PopoverHeader>\n        <PopoverBody>\n          <p>{new Date(fecha).toLocaleString()}</p>\n          {msg}\n        </PopoverBody>\n      </Popover>\n    )\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Sector from 'Components/Sector';\nimport Estado from 'Components/Estado';\nimport Alarma from 'Components/Alarma';\nimport { useCurrentSector } from 'Store';\n\nexport default function Mimico() {\n  const { idSector } = useParams();\n  const [currentIdSector, setCurrentIdSector] = useCurrentSector();\n\n  useEffect(() => {\n    if (idSector !== currentIdSector) {\n      setCurrentIdSector(idSector);\n    }\n  }, [idSector, currentIdSector, setCurrentIdSector]);\n\n  return currentIdSector ? (\n    <>\n      <Estado />\n      <Sector idSector={currentIdSector} />\n      <Alarma />\n    </>\n  ) : null;\n}\n","import React, { useEffect, useState } from 'react';\nimport { useMoveTrenes, usePlayRate } from 'Store';\nimport { Button, ButtonGroup } from 'reactstrap';\n\nimport { CICLOS_POR_SEGUNDO } from 'Components/common';\n\nimport styles from './styles.module.css';\n\nexport default function Animador() {\n  const moveTrenes = useMoveTrenes();\n  const [playRate, setPlayRate] = usePlayRate();\n\n  const [timer, setTimer] = useState();\n\n  useEffect(() => {\n    if (playRate && !timer) {\n      setTimer(setInterval(moveTrenes, 1000 / playRate / CICLOS_POR_SEGUNDO));\n    }\n\n    return () => {\n      if (timer) {\n        clearInterval(timer);\n        setTimer(0);\n      }\n    };\n  }, [moveTrenes, timer, playRate]);\n\n  return (\n    <ButtonGroup\n      title={'Velocidad de la animación\\n(ciclos por segundo)'}\n      className={styles.rate}\n    >\n      <Button\n        outline={playRate !== 0}\n        color={playRate ? 'secondary' : 'danger'}\n        onClick={() => setPlayRate(0)}\n      >\n        0\n      </Button>\n      <Button outline={playRate !== 0.5} onClick={() => setPlayRate(0.5)}>\n        ½\n      </Button>\n      <Button outline={playRate !== 1} onClick={() => setPlayRate(1)}>\n        1\n      </Button>\n      <Button outline={playRate !== 2} onClick={() => setPlayRate(2)}>\n        2\n      </Button>\n      <Button outline={playRate !== 5} onClick={() => setPlayRate(5)}>\n        5\n      </Button>\n    </ButtonGroup>\n  );\n}\n","import React, { useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { isPlainClick } from 'Utils';\nimport {\n  useSectores,\n  useSector,\n  useShowTeletipo,\n  useAutomatizacionesActive,\n  useShowCoords,\n  useShowConfig,\n  useEstado,\n} from 'Store';\n\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap';\n\nimport { LOADED } from 'Store/constantes';\nimport Animador from 'Components/Animador';\nimport { GitHub } from 'Components/Icons';\n\nimport loadingIcon from 'Components/Icons/loading.gif';\n\nfunction ActualMenu({ sectores }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const match = useRouteMatch('/sector/:idSector');\n  const idSector = match && match.params.idSector;\n  const { sector } = useSector(idSector);\n  const [\n    automatizacionesActive,\n    setAutomatizaciones,\n  ] = useAutomatizacionesActive();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [showCoords, setShowCoords] = useShowCoords();\n  const [showConfig, setShowConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const [oldIdSector, setOldIdSector] = useState();\n\n  const onClickSector = (ev) => {\n    if (idSector !== oldIdSector) {\n      hideEstado();\n      setOldIdSector(idSector);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowAutomatizaciones = (ev) => {\n    if (isPlainClick(ev)) {\n      setAutomatizaciones(!automatizacionesActive);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowTeletipo = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowTeletipo(!showTeletipo);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowCoords = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowCoords(!showCoords);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowConfig = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowConfig(!showConfig);\n      setIsOpen(false);\n    }\n  };\n  const toggleOpen = () => setIsOpen(!isOpen);\n\n  return (\n    <Navbar color=\"light\" light expand=\"md\" fixed=\"top\">\n      <NavbarBrand\n        color=\"default\"\n        href={\n          process.env.NODE_ENV === 'production' ? process.env.PUBLIC_URL : '/'\n        }\n        title=\"Volver al inicio\"\n      >\n        CTC\n      </NavbarBrand>\n      <Animador />\n\n      <NavbarToggler onClick={toggleOpen} />\n      <Collapse isOpen={isOpen} navbar>\n        <Nav className=\"mr-auto\" navbar>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle\n              nav\n              caret\n              title={sector ? sector.descr : 'Seleccione sector a visualizar'}\n            >\n              {sector ? sector.descrCorta : 'Sectores'}\n            </DropdownToggle>\n            <DropdownMenu>\n              {sectores.map((sect) => (\n                <DropdownItem\n                  tag={Link}\n                  to={`/sector/${sect.idSector}`}\n                  key={sect.idSector}\n                  title={sect.descr}\n                  active={idSector === sect.idSector}\n                  onClick={onClickSector}\n                >\n                  {sect.descrCorta}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle nav caret title=\"Opciones de visualización\">\n              Opciones\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={onClickShowTeletipo} active={showTeletipo}>\n                Teletipo\n              </DropdownItem>\n              <DropdownItem\n                onClick={onClickShowAutomatizaciones}\n                active={automatizacionesActive}\n              >\n                Automatizaciones\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowCoords} active={showCoords}>\n                Coordenadas\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowConfig} active={showConfig}>\n                Mostrar Config.\n              </DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </Nav>\n        <Nav navbar>\n          <NavItem>\n            <NavLink\n              href=\"https://github.com/Satyam/reactc2\"\n              title=\"Ver código fuente en GitHub\"\n              target=\"_blank\"\n            >\n              <GitHub /> Github\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n}\n\nexport default function Menu() {\n  const { sectores, loading, error, load } = useSectores();\n  if (error) {\n    return (\n      <pre>Error cargando 'sectores': {JSON.stringify(error, null, 2)}</pre>\n    );\n  }\n  if (loading !== LOADED) {\n    load();\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualMenu sectores={sectores} />;\n}\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Teletipo from 'Components/Teletipo';\nimport Mimico from 'Components/Mimico';\nimport Menu from 'Components/Menu';\n\nimport { useShowTeletipo } from 'Store';\n\n// import styles from './styles.module.css';\n\nexport default function App({ username = '', sector, photoURL }) {\n  const [showTeletipo] = useShowTeletipo();\n\n  return (\n    <Router\n      basename={\n        process.env.NODE_ENV === 'production'\n          ? process.env.PUBLIC_URL\n          : undefined\n      }\n    >\n      <Menu />\n      <Route path=\"/sector/:idSector\">\n        <Mimico idSector=\"constitucion\" />\n      </Route>\n      {showTeletipo && <Teletipo />}\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'Components/App';\r\nimport store from 'Store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n// if (process.env.NODE_ENV === 'development') {\r\n//   const whyDidYouRender = require('@welldone-software/why-did-you-render');\r\n//   whyDidYouRender(React, {\r\n//     trackAllPureComponents: true,\r\n//     trackExtraHooks: [[require('react-redux'), 'useSelector']],\r\n//   });\r\n// }\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}