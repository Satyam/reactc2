(this.webpackJsonpreactc2=this.webpackJsonpreactc2||[]).push([[8],[,,,function(e,t,n){"use strict";n.d(t,"r",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return c})),n.d(t,"z",(function(){return o})),n.d(t,"m",(function(){return i})),n.d(t,"D",(function(){return u})),n.d(t,"q",(function(){return l})),n.d(t,"A",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"u",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"x",(function(){return O})),n.d(t,"k",(function(){return p})),n.d(t,"a",(function(){return A})),n.d(t,"p",(function(){return j})),n.d(t,"g",(function(){return E})),n.d(t,"j",(function(){return v})),n.d(t,"v",(function(){return h})),n.d(t,"w",(function(){return S})),n.d(t,"l",(function(){return g})),n.d(t,"C",(function(){return C})),n.d(t,"B",(function(){return y})),n.d(t,"E",(function(){return w})),n.d(t,"G",(function(){return k})),n.d(t,"y",(function(){return x})),n.d(t,"d",(function(){return B})),n.d(t,"n",(function(){return _})),n.d(t,"o",(function(){return N})),n.d(t,"H",(function(){return I})),n.d(t,"i",(function(){return T})),n.d(t,"F",(function(){return D})),n.d(t,"t",(function(){return M})),n.d(t,"s",(function(){return q}));var a="linea",r="cambio",c="cruce",o="paragolpe",i="empalme",u="semaforo",l=1,s=2,d=3,f=0,m=1,b=2,O=0,p=1,A=2,j="izq",E="centro",v="der",h="N",S="NE",g="E",C="SE",y="S",w="SW",k="W",x="NW",B="bloque",_="fijo",N="info",I="warning",T="danger",D="unloaded",M="loading",q="loaded"},,,function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return f}));var a=n(15),r=n(1);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,n=e.onLongPress,a=e.ms,c=void 0===a?300:a,o=Object(r.useRef)(!1),i=Object(r.useRef)({}),l=Object(r.useCallback)((function(){"function"===typeof n&&n(i.current),i.current={},o.current=!1}),[n]),s=Object(r.useCallback)((function(e){u(e)&&(e.persist(),i.current=e,o.current=setTimeout(l,c))}),[l,c]),d=Object(r.useCallback)((function(e){u(e)&&(e.persist(),i.current=e,o.current&&(clearTimeout(o.current),"function"===typeof t&&t(e),o.current=!1,i.current={}))}),[t]);return Object(r.useMemo)((function(){return{onMouseDown:s,onMouseUp:d,onMouseLeave:d,onTouchStart:s,onTouchEnd:d}}),[s,d])}var o=function(e){return e.stopPropagation()},i={onMouseDown:o,onMouseUp:o,onMouseLeave:o,onTouchStart:o,onTouchEnd:o},u=function(e){return!(e.button||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey)&&(e.stopPropagation(),e.preventDefault(),!0)},l=function(e){var t=e.idSector,n=e.x,a=e.y,r=e.dir;return(r?[t,n,a,r].join("_"):[t,n,a].join("_")).replace(/\W/g,"_").replace(/(^\d)/,"_$1")},s=function(e,t){return"".concat(e,"__").concat(t).replace(/\W/g,"_").replace(/(^\d)/,"_$1")};function d(){var e=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){return c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}function f(e){return e.nombre||"[".concat(e.x,",").concat(e.y,"]")+(e.dir?"-".concat(e.dir):"")}},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u}));var a=100,r=a/2,c={N:r,NE:a,E:a,SE:a,S:r,SW:0,W:0,NW:0},o={N:0,NE:0,E:r,SE:a,S:a,SW:a,W:r,NW:0},i={N:270,NE:315,E:0,SE:45,S:90,SW:135,W:180,NW:225},u=10},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return f}));var a=n(1),r=n(11),c=n(8);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.sliceName,i=void 0===o?"options":o,u=function(t){return t[i][e]},l=Object(c.b)(e),s=function(t,n){t[e]=n.payload},d=function(){var e=Object(r.useDispatch)();return[Object(r.useSelector)(u),Object(a.useCallback)((function(t){return e(l(t))}),[e])]};return{selector:u,action:l,reducer:s,useState:d,default:t,toString:function(){return e}}}var i=o("playRate",1),u=o("currIdSector"),l=o("showConfig",!1),s=o("showCoords",!0),d=o("automatizacionesActive",!0),f=o("showTeletipo",!0)},,,function(e,t,n){"use strict";var a=n(42);n.d(t,"clearAlarma",(function(){return a.a})),n.d(t,"clearAviso",(function(){return a.b})),n.d(t,"clearAvisos",(function(){return a.c})),n.d(t,"doSetAlarma",(function(){return a.d})),n.d(t,"setAlarma",(function(){return a.e})),n.d(t,"setAviso",(function(){return a.f}));var r=n(50);n.d(t,"setBloqueOcupado",(function(){return r.a}));var c=n(51);n.d(t,"addTrenToCelda",(function(){return c.a})),n.d(t,"rawSetPosicion",(function(){return c.b})),n.d(t,"removeTrenFromCelda",(function(){return c.c})),n.d(t,"updateCelda",(function(){return c.g}));var o=n(64);n.d(t,"runAutomatizaciones",(function(){return o.b}));var i=n(106);n.o(i,"clearPendientes")&&n.d(t,"clearPendientes",(function(){return i.clearPendientes})),n.o(i,"doSetAspectoSenal")&&n.d(t,"doSetAspectoSenal",(function(){return i.doSetAspectoSenal})),n.o(i,"setPendiente")&&n.d(t,"setPendiente",(function(){return i.setPendiente}));n(40);var u=n(65);n.d(t,"clearPendientes",(function(){return u.a})),n.d(t,"setPendiente",(function(){return u.b}));n(20);var l=n(47);n.d(t,"doSetAspectoSenal",(function(){return l.a}));n(34)},,function(e,t,n){"use strict";n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return a.b})),n.d(t,"e",(function(){return r.a})),n.d(t,"f",(function(){return r.b})),n.d(t,"b",(function(){return c.b})),n.d(t,"a",(function(){return c.a})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return i.b})),n.d(t,"j",(function(){return u.b})),n.d(t,"i",(function(){return u.a}));n(62);var a=n(46),r=n(38),c=n(72),o=(n(52),n(73),function(e,t){return e.pendientes.includes(t)}),i=(n(32),n(28)),u=n(63)},function(e,t,n){e.exports={label:"styles_label__3r56c",pushDown:"styles_pushDown__1r8Ml",cambio:"styles_cambio__K-Ynx",manual:"styles_manual__1SN6-",hidden:"styles_hidden__1mPWU",close:"styles_close__1b-CL",faltantes:"styles_faltantes__1Xom7",disabled:"styles_disabled__3q6v_",solapas:"styles_solapas__1cybr",solapa:"styles_solapa__1ZYE5"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(8),r=n(32),c=n(3),o=Object(a.c)("loadSectores",(function(){return n.e(0).then(n.bind(null,94)).then((function(e){return e.default}))}),{condition:function(e,t){var n=t.getState;return Object(r.f)(n())===c.F}}),i=Object(a.c)("loadSector",(function(e){return n(151)("./".concat(e))}),{condition:function(e,t){var n=t.getState;return Object(r.d)(n())===c.F}})},,,,,function(e,t,n){e.exports={main:"styles_main__QJA2q",alt:"styles_alt__EQPaw",svg:"styles_svg__6vY_Q",filled:"styles_filled__2ZKFa"}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var a=n(24),r=n(3),c=n(56).a.getSelectors((function(e){return e.semaforos})),o=c.selectById,i=Object(a.a)(c.selectById,(function(e){return e&&e.modo||r.c})),u=Object(a.a)(c.selectAll,(function(e,t){return t}),(function(e,t){var n=e.filter((function(e){return e.idSector===t.idSector&&e.x===t.x&&e.y===t.y}));return n.length?n:null}))},function(e,t,n){e.exports={rect:"styles_rect__1zG3J",manual:"styles_manual__139ZI",text:"styles_text__JdA5Q",svg:"styles_svg__rOGuq","tramo-normal":"styles_tramo-normal__JZdRz","tramo-muerto":"styles_tramo-muerto__LXymi","tramo-ocupado":"styles_tramo-ocupado__LrGlb","tramo-empalme":"styles_tramo-empalme__QAGef",rebota:"styles_rebota__323Gf",close:"styles_close__I-x5K",empalme:"styles_empalme__1gk8t"}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(69),r=n(3),c=a.a.getSelectors((function(e){return e.sectores})),o=c.selectById,i=function(e,t){return e.sectores.loadStatusEachSector[t]||r.F},u=function(e){return e.sectores.errorSector},l=c.selectAll,s=function(e){return e.sectores.loadStatusSectores},d=function(e){return e.sectores.errorSectores}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return O})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return A})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return v}));var a=n(26),r=n(15),c=n(8),o=n(18),i=n(16),u=n(13),l=n(6),s=n(3),d=n(12),f=100,m=Object(c.b)("addTren",(function(e,t,n,a,r){return{payload:{idCelda:e.idCelda,x:e.x,y:e.y,dir:t,speed:n,falta:d.d/n,maxSpeed:n,idTren:a,idSector:e.idSector,numero:r}}}));function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(a){var r=f;f+=2;var c="_tren_".concat(r),o=e.idCelda;a(Object(i.setAviso)(s.o,o,r,"Parte tren ".concat(r," desde ").concat(Object(l.e)(e)))),a(m(e,t,n,c,r)),a(Object(i.addTrenToCelda)(o,c)),a(Object(i.runAutomatizaciones)())}}var O=Object(c.b)("doDelTren");function p(e){return function(t,n){var a=e.idCelda,r=e.numero,c=Object(o.e)(n(),a);a&&t(Object(i.removeTrenFromCelda)(a)),t(Object(i.setAviso)(s.o,a,r,"Borrado el tren ".concat(r," en ").concat(Object(l.e)(c)))),t(O(e.idTren))}}function A(){return function(e,t){Object(o.j)(t()).forEach((function(t){return e(p(t))}))}}var j=Object(c.b)("setTren");function E(e){return function(t,n){var c=Object(o.i)(n(),e);if(c){if("X"===c.dir)return t(p(c));if(c.falta)t(j({idTren:e,falta:c.speed>c.falta?0:c.falta-c.speed}));else{var u=function(e,t){var n=e.x,a=e.y;switch(e.dir){case s.v:return[n,a-1,s.B];case s.w:return[n+1,a-1,s.E];case s.l:return[n+1,a,s.G];case s.C:return[n+1,a+1,s.y];case s.B:return[n,a+1,s.v];case s.E:return[n-1,a+1,s.w];case s.G:return[n-1,a,s.l];case s.y:return[n-1,a-1,s.C]}}(c),f=Object(r.a)(u,3),m=f[0],b=f[1],O=f[2],A=c.speed,E=Object(o.e)(n(),c.idCelda);if(E.x!==m||E.y!==b){var v=Object(l.a)({idSector:E.idSector,x:m,y:b}),h=Object(l.a)({idSector:E.idSector,x:m,y:b,dir:O}),S=Object(o.e)(n(),v);if(S&&S.tipo===s.m&&(v=Object(l.a)({idSector:E.idSector,x:S.otro.x,y:S.otro.y}),h=Object(l.a)(Object(a.a)({},S,{dir:S.otro.dir})),S=Object(o.e)(n(),v)),S){var g=Object(o.h)(n(),h);if(g){var C=[s.p,s.g,s.j].reduce((function(e,t){return t in g?Math.min(e,g[t]):e}),s.b);switch(C){case s.b:return c.speed&&t(Object(i.setAviso)(s.H,c.idCelda,c.numero,"Tren ".concat(c.numero," detenido en ").concat(Object(l.e)(E)))),void t(j({idTren:e,speed:0}));case s.A:if(0===c.speed)return t(Object(i.setAviso)(s.o,c.idCelda,c.numero,"Tren ".concat(c.numero," reanuda la marcha en ").concat(Object(l.e)(E)))),void t(j({idTren:e,speed:c.maxSpeed/2}));A=c.maxSpeed/2;break;case s.q:if(0===c.speed)return t(Object(i.setAviso)(s.o,c.idCelda,c.numero,"Tren ".concat(c.numero," reanuda la marcha en ").concat(Object(l.e)(E)))),void t(j({idTren:e,speed:c.maxSpeed}));A=c.maxSpeed;break;default:throw new Error("Sem\xe1foro ".concat(h," d\xe1 sem\xe1foro imposible ").concat(C))}}if(S.idTren){var y=Object(o.i)(n(),S.idTren);return void t(Object(i.setAlarma)(v,c.numero,"Colisi\xf3n en ".concat(Object(l.e)(S)," entre trenes ").concat(c.numero," y ").concat(y.numero)))}var w=Object(o.d)(n(),S.idBloque);if(w&&w!==e){var k=Object(o.i)(n(),w);return void t(Object(i.setAlarma)(v,c.numero,"Tren ".concat(c.numero," invade el bloque ").concat(S.idBloque," ocupado por el tren ").concat(k.numero)))}var x=function(e,t){function n(t){var n=t.puntas;return n.includes(e)?n[0]===e?n[1]:n[0]:void 0}switch(t.tipo){case s.r:return n(t);case s.f:return t.punta===e?t.ramas[t.posicion]:t.ramas[t.posicion]===e?t.punta:void 0;case s.z:return t.rebota?t.punta:t.punta===e?"X":void 0;case s.h:return n(t.linea1)||n(t.linea2)}}(O,S);if(!x)return void t(Object(i.setAlarma)(S.idCelda,c.numero,"Tren ".concat(c.numero," no encuentra v\xeda correspondiente en celda ").concat(Object(l.e)(S))));t(Object(i.removeTrenFromCelda)(E.idCelda)),t(Object(i.addTrenToCelda)(v,e)),t(j({idTren:e,dir:x,x:m,y:b,speed:A,idCelda:v,falta:(S.longitud||1)*(d.d/A)}))}else t(p(c))}else t(j(c));t(Object(i.runAutomatizaciones)())}}}}function v(){return function(e,t){var n=u.b.selector(t());return Promise.all(Object(o.j)(t(),n).map((function(t){return e(E(t.idTren))})))}}},,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(26),r=n(24),c=n(3),o=n(13),i=n(55).a.getSelectors((function(e){return e.celdas})),u=Object(r.a)(i.selectAll,o.b.selector,(function(e,t){return e.filter((function(e){return e.idSector===t}))})),l=Object(r.a)(i.selectById,(function(e){if(e)return e.tipo===c.f?Object(a.a)({posicion:c.x},e):e})),s=Object(r.a)(i.selectById,(function(e){return e&&e.manual}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n(8),r=Object(a.b)("showEstado"),c=Object(a.b)("hideEstado")},,function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(8),r=n(13),c=n(3),o=Object(a.b)("doSetAlarma");function i(e,t,n){return function(a){a(l(c.i,e,t,n)),a(o({idCelda:e,numero:t,msg:n,fecha:Date.now()})),a(r.c.action(0))}}var u=Object(a.b)("clearAlarma"),l=Object(a.b)("setAviso",(function(e,t,n,a){return{payload:{nivel:e,idCelda:t,numero:n,msg:a,fecha:Date.now()}}})),s=Object(a.b)("clearAvisos"),d=Object(a.b)("clearAviso")},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(24),r=n(54).a.getSelectors((function(e){return e.bloques})),c=r.selectById,o=Object(a.a)(r.selectById,(function(e){return e&&e.idTren}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var a=n(9),r=n(26),c=n(8),o=n(16),i=n(28),u=n(3),l=Object(c.b)("updateSemaforo");function s(e,t,n){return function(c,o){var u=Object(i.b)(o(),e);if(!u[t])throw new Error("Semaforo ".concat(e," no tiene senal ").concat(t));return u[t]!==n&&c(l(Object(r.a)({},u,Object(a.a)({},t,n))))}}function d(e,t,n){return function(a,r){return a(s(e,t,n)),Object(i.a)(r(),e)===u.c&&a(Object(o.runAutomatizaciones)(e)),a(Object(o.clearPendientes)())}}function f(e,t){return function(n,c){var s=Object(i.b)(c(),e);t===u.e?n(l([u.p,u.g,u.j].reduce((function(e,t){return t in s?Object(r.a)({},e,Object(a.a)({},t,u.b)):e}),{idSemaforo:e,modo:t}))):n(l({idSemaforo:e,modo:t})),Object(i.a)(c(),e)===u.c&&n(Object(o.runAutomatizaciones)())}}},function(e,t,n){e.exports={semaforo:"styles_semaforo__1oD_-",verde:"styles_verde__3jxOB",rojo:"styles_rojo__19OcT",amarillo:"styles_amarillo__EBZgn",maniobra:"styles_maniobra__1WLEL",blink:"styles_blink__1pyu2",blinker:"styles_blinker__2Ms7j"}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(8),r=Object(a.b)("setBloqueOcupado",(function(e,t,n){return{payload:{idBloque:e,idTren:t,vecino:n}}}))},function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return A}));var a=n(8),r=n(16),c=n(18),o=n(3),i=Object(a.b)("updateCelda"),u=Object(a.b)("updateCelda",(function(e,t){return{payload:{idCelda:e,posicion:t}}}));function l(e,t){return function(n,a){var i=Object(c.e)(a(),e);if(i.tipo!==o.f)throw new Error("Celda ".concat(e,"  no es un cambio"));return i.posicion!==t&&(!Object(c.g)(a(),e)&&(n(Object(r.setPendiente)(e)),n(u(e,t))))}}function s(e,t){return function(n,a){return n(l(e,t)),Object(c.f)(a(),e)||n(Object(r.runAutomatizaciones)(e)),n(Object(r.clearPendientes)())}}var d=Object(a.b)("updateCelda",(function(e,t){return{payload:{idCelda:e,manual:t}}}));function f(e,t){return function(n,a){n(d(e,t)),Object(c.f)(a(),e)||n(Object(r.runAutomatizaciones)())}}var m=Object(a.b)("updateCelda",(function(e){return{payload:{idCelda:e,idTren:null}}}));function b(e){return function(t,n){t(m(e));var a=Object(c.e)(n(),e);a.idBloque&&t(Object(r.setBloqueOcupado)(a.idBloque,!1))}}var O=Object(a.b)("updateCelda",(function(e,t){return{payload:{idCelda:e,idTren:t}}}));function p(e,t){return function(n,a){n(O(e,t));var o=Object(c.e)(a(),e);o.idBloque&&n(Object(r.setBloqueOcupado)(o.idBloque,t))}}var A=Object(a.b)("updateCelda",(function(e,t){return{payload:{idCelda:e,rebota:t}}}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var a=n(26),r=n(24),c=n(13),o=n(46),i=n(28),u=n(38),l=n(6),s=n(3),d=n(68).a.getSelectors((function(e){return e.enclavamientos})),f=d.selectAll,m=d.selectById,b=Object(r.a)((function(e){return e}),c.b.selector,m,(function(e,t,n){return n?n.deps.reduce((function(n,r){switch(r.tipo){case s.d:var c,d;if(r.bloque){var f=Object(l.b)(t,r.bloque);c=Object(o.b)(e,f)}else{var m=Object(l.a)(Object(a.a)({idSector:t},r));c=(d=Object(u.a)(m)).idTren}if(c)return n.concat(Object(a.a)({},d,{},r,{idTren:c}));break;case s.D:var b=Object(l.a)(Object(a.a)({},r,{idSector:t})),O=Object(i.b)(e,b);if((r.senal?O[r.senal]:[s.p,s.g,s.j].reduce((function(e,t){return t in O?Math.min(e,O[t]):e}),s.b))!==r.aspecto)return n.concat(Object(a.a)({},r,{},O))}return n}),[]):[]}))},,function(e,t,n){"use strict";var a=n(8);t.a=Object(a.d)({selectId:function(e){return e.idBloque}})},function(e,t,n){"use strict";var a=n(8);t.a=Object(a.d)({selectId:function(e){return e.idCelda}})},function(e,t,n){"use strict";var a=n(8);t.a=Object(a.d)({selectId:function(e){return e.idSemaforo}})},function(e,t,n){e.exports={flechaDespachador:"styles_flechaDespachador__jpfOH",trenDespachador:"styles_trenDespachador__1G3VE",disabled:"styles_disabled__10sbm",tren:"styles_tren__25vJ9",close:"styles_close__3avcJ"}},function(e,t,n){e.exports={info:"styles_info__2eaPP",warning:"styles_warning__Y2zSC",danger:"styles_danger__3Ef8R",fixed:"styles_fixed__3IULb",buttons:"styles_buttons__Of--i"}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e){return e.alertas.alarma},r=function(e){return e.alertas.avisos}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e,t){return Object.values(e.trenes).filter((function(e){return!t||e.idSector===t}))},r=function(e,t){return e.trenes[t]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var a=n(70),r=n.n(a),c=n(88),o=n(6),i=n(18),u=n(13),l=n(3),s=n(16);function d(e,t,n,a){var r=a.idSector;switch(a.tipo){case l.f:return function(n,a){var c=Object(i.e)(t(),n);return a.reduce((function(a,u){var l=Object(o.a)({idSector:r,x:u.x,y:u.y}),d=Object(i.e)(t(),l),f=u.alts.find((function(e){return e.cuando===d.posicion}));if(!f)return a;var m=f.posicion;return m===c.posicion||c.manual?a:a.then((function(t){return!!e(Object(s.rawSetPosicion)(n,m))||t}))}),Promise.resolve(!1))}(n,a.deps);case l.D:return function(n,a){var c=Object(i.h)(t(),n);if(c.modo!==l.c)return!1;var u={izq:l.q,centro:l.q,der:l.q};return a.forEach((function(e){var a=Object(o.a)({idSector:r,x:e.x,y:e.y,dir:e.dir});switch(e.tipo){case l.f:var c=Object(i.e)(t(),a),s=e.alts.find((function(e){return e.cuando===c.posicion}));s&&Object.keys(u).forEach((function(e){s[e]&&(u[e]=Math.max(u[e],s[e]))}));break;case l.D:var d=Object(i.h)(t(),a),f=[l.p,l.g,l.j].reduce((function(e,t){return t in d?Math.min(e,d[t]):e}),l.b);e.senales.forEach((function(e){var t=e.cuando,n=e.senalAfectada,a=e.aspecto;f===t&&(u[n]=Math.max(u[n],a))}));break;case l.d:!!Object(i.d)(t(),Object(o.b)(r,e.bloque))&&(u[e.senalAfectada]=l.b);break;case l.n:u[e.senalAfectada]=Math.max(e.aspecto,u[e.senalAfectada]);break;default:throw new Error("Dependencia ".concat(e.idSource," de ").concat(n," tiene tipo desconocido: ").concat(e.tipo))}})),Object.keys(u).reduce((function(t,a){return a in c?c[a]===u[a]?t:t.then((function(t){return!!e(Object(s.doSetAspectoSenal)(n,a,u[a]))||t})):t}),Promise.resolve(!1))}(n,a.deps);case l.d:return function(n,a){var c=Object(i.c)(t(),n);a.reduce((function(a,c){switch(c.tipo){case l.d:var u=Object(o.a)({idSector:r,x:c.x,y:c.y});if(Object(i.e)(t(),u).posicion===c.posicion){var d=Object(i.c)(t(),Object(o.b)(r,c.bloque));if(d.idTren&&!d.vecino)return e(Object(s.setBloqueOcupado)(n,d.idTren,!0))}return a;default:throw new Error("Dependencia de  ".concat(n," tiene tipo desconocido: ").concat(c.tipo))}}),c.vecino?e(Object(s.setBloqueOcupado)(n,!1,!1)):Promise.resolve(!1))}(n,a.deps);default:throw new Error("Celda ".concat(n," tiene automatizaci\xf3n desconocido ").concat(a.tipo))}}function f(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(i.a)(a(),e),d(n,a,e,c);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function m(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.a.selector(a())){t.next=2;break}return t.abrupt("return");case 2:c=function(){return Object(i.b)(a()).reduce((function(t,r){var c=r.x,i=r.y,u=r.dir,s=r.tipo,f=r.bloque,m=r.idSector,b=s===l.d?Object(o.b)(m,f):Object(o.a)({idSector:m,x:c,y:i,dir:u});return e&&b===e?t:t.then((function(e){return d(n,a,b,r)||e}))}),Promise.resolve(!1))},s=9;case 4:if(t.t0=s,!t.t0){t.next=9;break}return t.next=8,c();case 8:t.t0=t.sent;case 9:if(!t.t0){t.next=13;break}s--,t.next=4;break;case 13:if(s){t.next=15;break}throw new Error("Automatizaci\xf3n en loop por ".concat(e));case 15:return t.abrupt("return",!!s);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n(8),r=Object(a.b)("setPendiente"),c=Object(a.b)("clearPendientes")},,function(e,t,n){"use strict";var a=n(8),r=n(3);t.a=Object(a.d)({selectId:function(e){return e.idAutom},sortComparer:function(e,t){return e.tipo===r.f&&t.tipo===r.D?-1:e.tipo===r.D&&t.tipo===r.f?1:0}})},function(e,t,n){"use strict";var a=n(8);t.a=Object(a.d)({selectId:function(e){return e.idEncl}})},function(e,t,n){"use strict";var a=n(8);t.a=Object(a.d)({selectId:function(e){return e.idSector},sortComparer:function(e,t){var n=e.descrCorta.toUpperCase(),a=t.descrCorta.toUpperCase();return n<a?-1:n>a?1:0}})},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(24),r=n(13),c=n(67).a.getSelectors((function(e){return e.automatizaciones})),o=Object(a.a)(c.selectAll,r.b.selector,(function(e,t){return e.filter((function(e){return e.idSector===t}))})),i=c.selectById},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e.options.showEstado}},,,function(e,t){e.exports="data:image/gif;base64,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"},,,,,,,,,,,,,,,function(e,t,n){e.exports={alarma:"styles_alarma__1_-OE",close:"styles_close__1Zwow"}},,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,function(e,t,n){e.exports={close:"styles_close__3wiH9"}},function(e,t,n){e.exports={sector:"styles_sector__1v7a1"}},function(e,t,n){e.exports={rate:"styles_rate__26o7Y"}},,,,,,,,function(e,t,n){e.exports=n(175)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var a={"./_sectores":[94,0],"./_sectores.js":[94,0],"./circulo":[122,1],"./circulo.js":[122,1],"./constitucion":[123,2],"./constitucion.js":[123,2],"./cruceDobleCambio":[124,3],"./cruceDobleCambio.js":[124,3],"./dosVias":[125,4],"./dosVias.js":[125,4],"./empalmes":[126,5],"./empalmes.js":[126,5],"./semaforosEncadenados":[127,6],"./semaforosEncadenados.js":[127,6],"./simpleDesvio":[128,7],"./simpleDesvio.js":[128,7]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=151,e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a,r,c,o,i,u,l,s,d,f=n(1),m=n.n(f),b=n(45),O=n.n(b),p=n(15),A=n(66),j=n(23),E=n(177),v=n(178),h=n(179),S=n(117),g=n(8),C=n(9),y=n(16),w=Object(g.e)({alarma:{},avisos:[]},(a={},Object(C.a)(a,y.doSetAlarma,(function(e,t){e.alarma=t.payload})),Object(C.a)(a,y.clearAlarma,(function(e){e.alarma={}})),Object(C.a)(a,y.setAviso,(function(e,t){e.avisos.unshift(t.payload)})),Object(C.a)(a,y.clearAviso,(function(e,t){var n=e.avisos.findIndex((function(e){return e.fecha===t.payload}));-1!==n&&e.avisos.splice(n,1)})),Object(C.a)(a,y.clearAvisos,(function(e){e.avisos=[]})),a)),k=n(50),x=n(20),B=n(54),_=Object(g.e)(B.a.getInitialState(),(r={},Object(C.a)(r,x.a.fulfilled,(function(e,t){B.a.addMany(e,t.payload.bloques)})),Object(C.a)(r,k.a,B.a.upsertOne),r)),N=n(55),I=Object(g.e)(N.a.getInitialState(),(c={},Object(C.a)(c,x.a.fulfilled,(function(e,t){N.a.addMany(e,t.payload.celdas)})),Object(C.a)(c,y.updateCelda,N.a.upsertOne),c)),T=n(67),D=Object(g.e)(T.a.getInitialState(),Object(C.a)({},x.a.fulfilled,(function(e,t){T.a.addMany(e,t.payload.automatizaciones||[])}))),M=n(68),q=Object(g.e)(M.a.getInitialState(),Object(C.a)({},x.a.fulfilled,(function(e,t){M.a.addMany(e,t.payload.enclavamientos||[])}))),L=n(26),J=n(40),W=n(13),K=Object(g.e)((o={},Object(C.a)(o,W.a,W.a.default),Object(C.a)(o,W.e,W.e.default),Object(C.a)(o,"showEstado",{show:!1}),Object(C.a)(o,W.c,W.c.default),Object(C.a)(o,W.f,W.f.default),Object(C.a)(o,W.d,W.d.default),o),(i={},Object(C.a)(i,W.a,W.a.reducer),Object(C.a)(i,W.f,W.f.reducer),Object(C.a)(i,W.e,W.e.reducer),Object(C.a)(i,J.b,(function(e,t){e.showEstado=Object(L.a)({},t.payload,{show:!0})})),Object(C.a)(i,J.a,(function(e){e.showEstado={show:!1}})),Object(C.a)(i,W.d,W.d.reducer),Object(C.a)(i,W.c,W.c.reducer),Object(C.a)(i,W.b,W.b.reducer),i)),F=n(65),U=Object(g.e)([],(u={},Object(C.a)(u,F.b,(function(e,t){e.push(t.payload)})),Object(C.a)(u,F.a,(function(){return[]})),u)),z=n(3),Q=n(69),R=Object(g.e)(Q.a.getInitialState({loadStatusSectores:z.F,loadStatusEachSector:{}}),(l={},Object(C.a)(l,x.b.pending,(function(e){e.loadStatusSectores===z.F&&(e.loadStatusSectores=z.t,e.errorSectores=null)})),Object(C.a)(l,x.b.fulfilled,(function(e,t){e.loadStatusSectores===z.t&&(Q.a.setAll(e,t.payload),e.loadStatusSectores=z.s)})),Object(C.a)(l,x.b.rejected,(function(e,t){e.loadStatusSectores=z.F,e.errorSectores=t.error})),Object(C.a)(l,x.a.pending,(function(e,t){var n=t.meta.arg,a=e.loadStatusEachSector[n];a&&a!==z.F||(e.loadStatusEachSector[n]=z.t,e.errorSector=null)})),Object(C.a)(l,x.a.fulfilled,(function(e,t){var n=t.meta.arg;e.loadStatusEachSector[n]===z.t&&(e.loadStatusEachSector[n]=z.s)})),Object(C.a)(l,x.a.rejected,(function(e,t){e.loadStatusEachSector[t.meta.arg]=z.F,e.errorSector=t.error})),l)),V=n(47),H=n(56),P=Object(g.e)(H.a.getInitialState(),(s={},Object(C.a)(s,x.a.fulfilled,(function(e,t){H.a.addMany(e,t.payload.semaforos||[])})),Object(C.a)(s,V.d,H.a.upsertOne),s)),Y=n(34),G=Object(g.e)({},(d={},Object(C.a)(d,Y.d,(function(e,t){var n=t.payload;e[n.idTren]=n})),Object(C.a)(d,Y.g,(function(e,t){var n=t.payload;e[n.idTren]=Object(L.a)({},e[n.idTren],{},n)})),Object(C.a)(d,Y.e,(function(e,t){delete e[t.payload]})),d)),Z=n(11),X=n(42),$=n(62),ee=n(46),te=function(e){return Object(Z.useSelector)((function(t){return Object(ee.b)(t,e)}))},ne=n(51),ae=n(38),re=function(e){return Object(Z.useSelector)((function(t){return Object(ae.a)(t,e)}))},ce=function(e){var t=Object(Z.useDispatch)();return function(n){return t(Object(ne.e)(e,n))}},oe=function(e){var t=Object(Z.useSelector)((function(t){return Object(ae.a)(t,e)})),n=Object(Z.useDispatch)();return function(){return n(Object(ne.f)(e,!t.rebota))}},ie=n(52),ue=function(e){return Object(Z.useSelector)((function(t){return Object(ie.a)(t,e)}))},le=n(64),se=n(72),de=function(){var e=Object(Z.useDispatch)();return function(t){return e(Object(le.b)(t))}},fe=n(73),me=function(){var e=Object(Z.useSelector)(fe.a),t=Object(Z.useDispatch)();return{estado:e,hideEstado:function(){return t(Object(J.a)())},showEstado:function(e){return t(Object(J.b)(e))}}},be=W.c.useState,Oe=W.b.useState,pe=W.d.useState,Ae=W.e.useState,je=W.a.useState,Ee=W.f.useState,ve=n(32),he=function(e){var t=Object(Z.useDispatch)();return{loading:Object(Z.useSelector)((function(t){return Object(ve.d)(t,e)})),sector:Object(Z.useSelector)((function(t){return Object(ve.c)(t,e)})),error:Object(Z.useSelector)(ve.a),load:function(){return t(Object(x.a)(e))}}},Se=n(28),ge=function(e){return Object(Z.useSelector)((function(t){return Object(Se.b)(t,e)}))},Ce=function(e){var t=Object(Z.useSelector)((function(t){return Object(Se.a)(t,e)})),n=Object(Z.useDispatch)();return[t,Object(f.useCallback)((function(t){return n(Object(V.c)(e,t))}),[e,n])]},ye=n(63),we=function(){var e=Object(Z.useDispatch)();return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e(Object(Y.a)(t,n,a))}},ke=Object(g.a)({reducer:{alertas:w,bloques:_,celdas:I,automatizaciones:D,enclavamientos:q,options:K,pendientes:U,sectores:R,semaforos:P,trenes:G}}),xe=n(6),Be=n(25),_e=n.n(Be),Ne=n(60),Ie=n(71),Te=n(49),De=n(107),Me=n(108);function qe(){return m.a.createElement("svg",{viewBox:"0 0 32 32",className:_e.a.svg},m.a.createElement("path",{d:"M 16 16 L 32 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 0 V 16 32",className:_e.a.main}))}function Le(){return m.a.createElement("svg",{viewBox:"0 0 32 32",className:_e.a.svg},m.a.createElement("path",{d:"M 16 0 V 16 16",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 32 V 16 16 L 32 0",className:_e.a.main}))}function Je(){return m.a.createElement("svg",{viewBox:"0 0 32 32",className:_e.a.svg},m.a.createElement("path",{d:"M 16 16 V 16 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 16 L 32 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 32 V 16 16 L 0 0",className:_e.a.main}))}function We(){return m.a.createElement("svg",{viewBox:"0 0 32 32",className:_e.a.svg},m.a.createElement("path",{d:"M 16 16 L 32 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 16 L 0 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 32 V 16 0",className:_e.a.main}))}function Ke(){return m.a.createElement("svg",{viewBox:"0 0 32 32",className:_e.a.svg},m.a.createElement("path",{d:"M 16 16 V 16 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 16 L 0 0",className:_e.a.alt}),m.a.createElement("path",{d:"M 16 32 V 16 16 L 32 0",className:_e.a.main}))}var Fe=n(58),Ue=n.n(Fe);function ze(e){var t=e.nivel,n=e.fecha,a=e.idCelda,r=e.numero,c=e.msg,o=e.clearAviso,i=re(a);return m.a.createElement("tr",{className:Ue.a[t]},m.a.createElement("td",null,new Date(n).toLocaleString()),m.a.createElement("td",null,Object(xe.e)(i)),m.a.createElement("td",null,r),m.a.createElement("td",{colSpan:2},c),m.a.createElement("td",null,m.a.createElement(Te.b,{onClick:function(e){return Object(xe.d)(e)&&o(n)}})))}function Qe(){var e=function(){var e=Object(Z.useDispatch)();return[Object(Z.useSelector)($.b),function(){return e(Object(X.c)())},function(t){return e(Object(X.b)(t))}]}(),t=Object(p.a)(e,3),n=t[0],a=t[1],r=t[2],c=Ee(),o=Object(p.a)(c,2),i=o[0],u=o[1],l=Object(f.useState)(!1),s=Object(p.a)(l,2),d=s[0],b=s[1];return n.length?m.a.createElement(E.a,{className:Ue.a.fixed,size:"sm"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"Fecha"),m.a.createElement("th",null,"Celda"),m.a.createElement("th",null,"Tren"),m.a.createElement("th",null,"Mensaje"),m.a.createElement("th",null,m.a.createElement(v.a,null,m.a.createElement(h.a,{type:"checkbox",checked:d,onChange:function(e){return b((function(e){return!e}))}}),"\xa0Ver Info")),m.a.createElement("th",{className:Ue.a.buttons},m.a.createElement(S.a,{className:Ue.a.close,title:"Borrar todas las notificaciones",onClick:function(e){return Object(xe.d)(e)&&a()},size:"sm"},m.a.createElement(Te.b,null)),m.a.createElement(S.a,{close:!0,onClick:function(e){return Object(xe.d)(e)&&u(!i)},title:"Cerrar Teletipo",size:"sm"})))),m.a.createElement("tbody",null,n.filter((function(e){return!!d||e.nivel!==z.o})).map((function(e){return m.a.createElement(ze,Object.assign({},e,{key:e.fecha,clearAviso:r}))})))):m.a.createElement(E.a,{className:Ue.a.fixed,size:"sm"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"No hay mensajes"))))}var Re=n(78),Ve=n(7),He=n.n(Ve),Pe=n(48),Ye=n.n(Pe),Ge=["","verde","amarillo","rojo"];function Ze(e){var t,n=e.idSemaforo,a=e.placement,r=ge(n),c=Ce(n),o=Object(p.a)(c,2),i=o[0],u=o[1],l=r||{},s=l.idSector,d=l.x,f=l.y,b=l.centro,O=l.izq,A=l.der,j=me().showEstado,E=Object(xe.f)({onClick:function(){r.soloManiobra?j({tipo:z.D,idCelda:Object(xe.a)({idSector:s,x:d,y:f}),idSemaforo:Object(xe.a)(r),placement:a}):u(i===z.c?z.e:z.c)},onLongPress:function(e){return j({tipo:z.D,idCelda:Object(xe.a)({idSector:s,x:d,y:f}),idSemaforo:Object(xe.a)(r),placement:a})}});if(!r)return null;return m.a.createElement("g",Object.assign({className:He()(Ye.a.semaforo,(t={},Object(C.a)(t,Ye.a.maniobra,!r.soloManiobra&&i===z.u),Object(C.a)(t,Ye.a.blink,!r.soloManiobra&&i===z.e),t))},E),m.a.createElement("title",null,Object(xe.e)(r)),m.a.createElement("line",{x1:95,y1:38,x2:82,y2:38}),m.a.createElement("line",{x1:95,y1:33,x2:95,y2:43}),m.a.createElement("circle",{className:Ye.a[Ge[b]],cx:O||A?77:85,cy:38,r:5}),O&&m.a.createElement("circle",{className:Ye.a[Ge[O]],cx:85,cy:43,r:5}),A&&m.a.createElement("circle",{className:Ye.a[Ge[A]],cx:85,cy:33,r:5}))}var Xe=n(12),$e=n(29),et=n.n($e);function tt(e){var t=e.dir,n=e.estilo,a=void 0===n?"tramo-normal":n;return m.a.createElement("line",{x1:Xe.c,y1:Xe.c,x2:Xe.e[t],y2:Xe.f[t],className:et.a[a]})}function nt(e){var t=e.idCelda,n=re(t),a=te(n.idBloque)||n.idTren;return m.a.createElement("g",null,n.puntas.map((function(e,t){return m.a.createElement(tt,{dir:e,key:t,estilo:a?"tramo-ocupado":"tramo-normal"})})))}function at(e){var t=e.idCelda,n=re(t),a=te(n.idBloque)||n.idTren;return m.a.createElement("g",null,m.a.createElement(tt,{key:"punta",dir:n.punta,estilo:a?"tramo-ocupado":"tramo-normal"}),n.ramas.map((function(e,t){return m.a.createElement(tt,{key:e,dir:e,estilo:n.posicion===t?a?"tramo-ocupado":"tramo-normal":"tramo-muerto"})})))}function rt(e){var t=e.idCelda,n=re(t),a=te(n.idBloque)||n.idTren;return m.a.createElement("g",null,m.a.createElement(tt,{dir:n.punta,estilo:a?"tramo-ocupado":"tramo-normal"}),m.a.createElement("circle",{cx:Xe.c,cy:Xe.c,r:Xe.a/10,fill:a?"yellow":"black"}),n.rebota&&m.a.createElement("line",{x1:Xe.c+Xe.a/6,y1:Xe.c-Xe.a/10,x2:Xe.c+Xe.a/6,y2:Xe.c+Xe.a/10,className:et.a.rebota,transform:"rotate(".concat(Xe.b[n.punta]+180,", ").concat(Xe.c,", ").concat(Xe.c,")")}))}function ct(e){var t=e.idCelda,n=re(t),a=te(n.idBloque)||n.idTren;return m.a.createElement("g",null,n.linea1.puntas.map((function(e,t){return m.a.createElement(tt,{dir:e,key:"l1".concat(t),estilo:a?"tramo-ocupado":"tramo-normal"})})),n.linea2.puntas.map((function(e,t){return m.a.createElement(tt,{dir:e,key:"l1".concat(t),estilo:a?"tramo-ocupado":"tramo-normal"})})))}function ot(e){var t=e.idCelda,n=re(t),a=re(Object(xe.a)({idSector:n.idSector,x:n.otro.x,y:n.otro.y}));return m.a.createElement("g",null,m.a.createElement("text",{x:Xe.c,y:Xe.c-5,textAnchor:"middle",className:et.a.empalme},"Contin\xfaa en:"),m.a.createElement("text",{x:Xe.c,y:Xe.c+15,textAnchor:"middle",className:et.a.empalme},Object(xe.e)(a)),m.a.createElement(tt,{dir:n.punta,estilo:"tramo-empalme"}))}nt.whyDidYouRender=!1,at.whyDidYouRender=!1;var it=n(199),ut=n(180),lt=n(181),st=n(182),dt=n(183),ft=n(57),mt=n.n(ft);function bt(e){var t=e.celda,n=e.dir,a=e.cerrar,r=we(),c=[{descr:"Normal",maxSpeed:1},{descr:"R\xe1pido",maxSpeed:3}],o=function(e){Object(xe.d)(e)&&r(t,n,c[e.currentTarget.dataset.tipo].maxSpeed)};return m.a.createElement(it.a,{isOpen:!0,target:t.idCelda,placement:"top"},m.a.createElement(ut.a,null,"Tipos de trenes",m.a.createElement(S.a,{close:!0,className:mt.a.close,onClick:function(e){Object(xe.d)(e)&&a()}})),m.a.createElement(lt.a,null,m.a.createElement(st.a,null,c.map((function(e,t){return m.a.createElement(dt.a,{key:t,"data-tipo":t,onClick:o},e.descr)})))))}function Ot(e){var t=e.celda,n=e.dir,a=we(),r=te(t.idBloque),c=Object(f.useState)(!1),o=Object(p.a)(c,2),i=o[0],u=o[1],l=Object(xe.f)({onClick:function(){t.idTren||a(t,n)},onLongPress:function(){u(!0)}});return m.a.createElement("g",xe.c,i&&m.a.createElement(bt,{celda:t,dir:n,cerrar:function(){return u(!1)}}),m.a.createElement("circle",{cx:Xe.c,cy:Xe.c,r:9,className:mt.a.trenDespachador}),!r&&m.a.createElement("g",Object.assign({className:mt.a.flechaDespachador},l),m.a.createElement("path",{d:"M 11,-12 L 29,0 11,12 z",transform:"translate(".concat(Xe.c,",").concat(Xe.c,")")})))}function pt(e){var t=e.celda,n=e.dir;return!Array.isArray(t.despachador)||!t.despachador.includes(n)||t.idTren||t.tipo===z.f&&t.punta!==n&&t.ramas[t.posicion]!==n?null:m.a.createElement(Ot,{celda:t,dir:n})}function At(e){var t,n=e.celda,a=(t=n.idTren,Object(Z.useSelector)((function(e){return Object(ye.a)(e,t)}))),r=a.speed/(a.maxSpeed||1);return m.a.createElement("g",{transform:"translate(".concat(Xe.c-8,", ").concat(Xe.c-8,")")},m.a.createElement("circle",{cx:8,cy:8,r:9,className:mt.a.tren},m.a.createElement("title",null,"".concat(a.numero,"\nVelocidad: ").concat(a.speed,"\nFalta: ").concat(a.falta))),r&&1!==r?m.a.createElement("path",{d:"M 8 0 A 8 8 90 1 0 8 16 z",fill:"orange"}):null,m.a.createElement(De.a,{color:r?"black":"red",size:"16px"}))}var jt=n(119),Et=n.n(jt);function vt(e){var t=e.faltantes;return m.a.createElement(st.a,null,t.map((function(e,t){switch(e.tipo){case z.d:return m.a.createElement(dt.a,{key:t},"Bloque ocupado ".concat(e.bloque||Object(xe.e)(e)));case z.D:return m.a.createElement(dt.a,{key:t},"Sem\xe1foro libre: ".concat(Object(xe.e)(e)))}return"????"})))}function ht(e){var t=e.idCelda,n=e.setShowFaltantes,a=ue(t);return a.length?m.a.createElement(it.a,{isOpen:!!t,target:t},m.a.createElement(ut.a,null,"Condiciones Faltantes",m.a.createElement(S.a,{close:!0,className:Et.a.close,onClick:function(e){Object(xe.d)(e)&&n(!1)}})),m.a.createElement(lt.a,null,m.a.createElement(vt,{faltantes:a}))):null}function St(e){var t,n=e.celda,a=e.minX,r=e.maxX,c=(e.minY,e.maxY,e.cellWidth),o=e.padLeft,i=e.padTop,u=n.idCelda,l=ce(u),s=oe(u),d=(t=n.idBloque,Object(Z.useSelector)((function(e){return Object(ee.a)(e,t)}))),b=Ae(),O=Object(p.a)(b,1)[0],A=me().showEstado,j=ue(u),E=Object(f.useState)(),v=Object(p.a)(E,2),h=v[0],S=v[1],g=Object(xe.f)({onClick:function(e){switch(n.tipo){case z.f:j.length&&!n.manual?S(!0):l((n.posicion+1)%n.ramas.length);break;case z.z:s()}},onLongPress:function(e){A({tipo:n.tipo,idCelda:u,placement:k})}});if(Object(f.useEffect)((function(){h&&!j.length&&S(!1)}),[h,j.length]),!c||!n)return null;var y,w,k=n.x>(r-a)/2?"left":"right",x=O?"[".concat(n.x,",").concat(n.y,"]"):"",B=[];switch(n.nombre&&B.push("Celda: ".concat(n.nombre)),B.push("Coordenadas: [".concat(n.x,",").concat(n.y,"]")),d&&B.push("Bloque: ".concat(d.nombre)),n.idTren&&B.push("Con tren ".concat(n.idTren)),n.tipo){case z.r:w=n.puntas,y=nt;break;case z.f:w=n.ramas.concat(n.punta),y=at;break;case z.z:w=[n.punta],y=rt;break;case z.h:w=n.linea1.puntas.concat(n.linea2.puntas),y=ct;break;case z.m:y=ot,w=[]}return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",Object.assign({id:u,className:He()(et.a.rect,Object(C.a)({},et.a.manual,n.manual)),style:{left:o+n.x*c,top:n.y*c+i,width:c,height:c},title:B.join("\n")},g),m.a.createElement("svg",{viewBox:"0 0 ".concat(Xe.a," ").concat(Xe.a),width:c,height:c,className:et.a.svg},m.a.createElement("text",{x:"0",y:"95",className:et.a.text},x),n.nombre&&m.a.createElement("text",{textAnchor:"end",x:95,y:95,className:et.a.text},n.nombre),m.a.createElement(y,{idCelda:u}),w.map((function(e){return m.a.createElement("g",{key:e,transform:"rotate(".concat(Xe.b[e],", ").concat(Xe.c,", ").concat(Xe.c,")")},m.a.createElement(Ze,{idSemaforo:Object(xe.a)(Object(L.a)({},n,{dir:e})),placement:k}),!!n.despachador&&m.a.createElement(pt,{celda:n,dir:e}))})),n.idTren?m.a.createElement(At,{celda:n}):null)),h&&m.a.createElement(ht,{idCelda:u,setShowFaltantes:S}))}function gt(e){var t=e.idCelda,n=Object(Re.a)(e,["idCelda"]),a=re(t);return a?m.a.createElement(St,Object.assign({celda:a},n)):null}gt.whyDidYouRender=!1;var Ct=n(76),yt=n.n(Ct),wt=n(120),kt=n.n(wt);function xt(e){var t,n=e.sector,a=(t=n.idSector,Object(Z.useSelector)((function(e){return Object(ae.c)(e,t)}))),r=Object(xe.g)(),c=n.descrCorta,o=n.minX,i=n.maxX,u=n.minY,l=n.maxY,s=i-o+1,d=l-u+1,b=Math.min(Math.ceil((r.width-50)/s),200),O=(r.width-s*b)/2,p=Math.max(0,-u*b)+60;Object(f.useEffect)((function(){document.title="CTC - ".concat(c)}));var A={minX:o,maxX:i,minY:u,maxY:l,cellWidth:b,padLeft:O,padTop:p};return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:kt.a.sector},a.map((function(e){return m.a.createElement(gt,Object.assign({key:e.idCelda,idCelda:e.idCelda},A))}))),m.a.createElement("div",{style:{height:(d+2)*b}}))}function Bt(e){var t=e.idSector,n=he(t),a=n.sector,r=n.loading,c=n.error,o=n.load;return Object(f.useEffect)((function(){c||r===z.s||o()}),[c,o,r]),c?m.a.createElement("pre",null,"Error cargando 'sector': ",JSON.stringify(c,null,2)):r!==z.s?m.a.createElement("img",{alt:"loading...",src:yt.a}):m.a.createElement(xt,{sector:a})}var _t=n(188),Nt=n(189),It=n(190),Tt=n(191),Dt=n(192),Mt=n(184),qt=n(19),Lt=n.n(qt);function Jt(e){var t=e.celda,n=t.posicion,a=t.idCelda,r=t.bloque,c=ce(a),o=function(e){var t=Object(Z.useSelector)((function(t){return Object(ae.b)(t,e)})),n=Object(Z.useDispatch)(),a=Object(f.useCallback)((function(){return n(Object(ne.d)(e,!t))}),[e,n,t]);return[t,a]}(a),i=Object(p.a)(o,2),u=i[0],l=i[1],s=ue(a),d=function(e){return Object(xe.d)(e)&&c(z.x)},b=function(e){return Object(xe.d)(e)&&c(z.k)},O=!u&&s.length>0;return m.a.createElement(lt.a,null,r&&m.a.createElement("p",null,"Bloque: ",r),s.length&&m.a.createElement("div",{className:Lt.a.faltantes},m.a.createElement("h3",null,"Condiciones Faltantes"),m.a.createElement(vt,{faltantes:s})),m.a.createElement(Mt.a,{className:Lt.a.cambio},2===t.ramas.length?m.a.createElement(m.a.Fragment,null,m.a.createElement(S.a,{size:"sm",disabled:O,onClick:d,color:n===z.x?"primary":"outline-secondary"},m.a.createElement(qe,null)),m.a.createElement(S.a,{size:"sm",disabled:O,onClick:b,color:n===z.k?"primary":"outline-secondary"},m.a.createElement(Le,null))):m.a.createElement(m.a.Fragment,null," ",m.a.createElement(S.a,{size:"sm",disabled:O,onClick:b,color:n===z.k?"primary":"outline-secondary"},m.a.createElement(Je,null)),m.a.createElement(S.a,{size:"sm",disabled:O,onClick:d,color:n===z.x?"primary":"outline-secondary"},m.a.createElement(We,null)),m.a.createElement(S.a,{size:"sm",disabled:O,onClick:function(e){return Object(xe.d)(e)&&c(z.a)},color:n===z.a?"primary":"outline-secondary"},m.a.createElement(Ke,null)))),m.a.createElement(S.a,{className:Lt.a.manual,size:"sm",color:u?"danger":"outline-info",onClick:function(e){return Object(xe.d)(e)&&l()}},u?m.a.createElement(Ne.b,null):m.a.createElement(Ie.a,null),u?" Manual":" Autom\xe1tico"))}var Wt=n(185),Kt=n(186),Ft=n(187);function Ut(e){var t=e.senal,n=e.aspecto,a=e.onSetAspecto;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Mt.a,{vertical:!0},m.a.createElement(S.a,{size:"sm",color:n===z.b?"danger":"outline-danger",onClick:function(e){return Object(xe.d)(e)&&a(t,z.b)}},m.a.createElement(Ie.b,null)),m.a.createElement(S.a,{size:"sm",color:n===z.A?"warning":"outline-warning",onClick:function(e){return Object(xe.d)(e)&&a(t,z.A)}},m.a.createElement(Ie.b,null)),m.a.createElement(S.a,{size:"sm",color:n===z.q?"success":"outline-success",onClick:function(e){return Object(xe.d)(e)&&a(t,z.q)}},m.a.createElement(Ie.b,null))))}function zt(e){var t=e.semaforo,n=t.izq,a=t.soloManiobra,r=t.centro,c=t.der,o=t.idSemaforo,i=function(){var e=Object(Z.useDispatch)();return function(t,n,a){return e(Object(V.b)(t,n,a))}}(),u=Ce(o),l=Object(p.a)(u,2),s=l[0],d=l[1],f=de(),b=function(e,t){(s===z.u||a)&&i(o,e,t),a&&f(o)},O=function(e){Object(xe.d)(e)&&d(parseInt(e.currentTarget.dataset.modo,10))};return m.a.createElement(lt.a,null,m.a.createElement(Wt.a,null,m.a.createElement("div",{className:He()(Object(C.a)({},Lt.a.disabled,!a&&!s))},m.a.createElement(Kt.a,null,m.a.createElement(Ft.a,null,m.a.createElement("div",{className:He()(Lt.a.pushDown,Object(C.a)({},Lt.a.hidden,!n))},m.a.createElement(Ut,{senal:"izq",aspecto:n,onSetAspecto:b}))),m.a.createElement(Ft.a,null,m.a.createElement("div",{className:He()(Object(C.a)({},Lt.a.hidden,!r))},m.a.createElement(Ut,{senal:"centro",aspecto:r,onSetAspecto:b}))),m.a.createElement(Ft.a,null,m.a.createElement("div",{className:He()(Lt.a.semaforo,Lt.a.pushDown,Object(C.a)({},Lt.a.hidden,!c))},m.a.createElement(Ut,{senal:"der",aspecto:c,onSetAspecto:b}))))),!a&&m.a.createElement(Kt.a,null,m.a.createElement(Mt.a,{vertical:!0,className:Lt.a.manual},m.a.createElement(S.a,{size:"sm",color:s===z.c?"info":"outline-info",onClick:O,"data-modo":z.c},m.a.createElement(Ie.a,null),"\xa0Autom\xe1tico"),m.a.createElement(S.a,{size:"sm",color:s===z.e?"danger":"outline-secondary",onClick:O,"data-modo":z.e},m.a.createElement(Ne.a,null),"\xa0Bloqueado"),m.a.createElement(S.a,{size:"sm",color:s===z.u?"danger":"outline-secondary",onClick:O,"data-modo":z.u},m.a.createElement(Ne.b,null),"\xa0Maniobra")))))}function Qt(e){var t=e.celda,n=t.idCelda,a=t.rebota,r=oe(n);return m.a.createElement(lt.a,null,m.a.createElement(S.a,{onClick:function(e){return Object(xe.d)(e)&&r()},size:"sm",color:a?"primary":"outline-secondary",className:Lt.a.manual},m.a.createElement(Me.a,null),a?" Rebota":" No rebota"))}function Rt(e){var t,n=e.idCelda,a=e.idSemaforo,r=e.placement,c=Object(f.useState)(),o=Object(p.a)(c,2),i=o[0],u=o[1],l=re(n),s=ge(a),d=pe(),b=Object(p.a)(d,1)[0],O=me().hideEstado,A=(t=a||n,Object(Z.useSelector)((function(e){return Object(se.a)(e,t)}))),j=function(e){return Object(Z.useSelector)((function(t){return Object(ie.b)(t,e)}))}(n),E=Object(f.useState)(),v=Object(p.a)(E,2),h=v[0],g=v[1],C=s||l.tipo===z.f||l.tipo===z.z;Object(f.useEffect)((function(){i!==n&&(g(C?"Cmd.":a?"Semaforo":"Celda"),u(n))}),[i,n,C,a]);var y=function(e){h!==e&&g(e)},w=null;if(s)w=zt;else switch(l.tipo){case z.f:w=Jt;break;case z.z:w=Qt}return(b||C)&&m.a.createElement(it.a,{isOpen:!0,target:n,placement:r},m.a.createElement(ut.a,null,s?"Sem\xe1foro ".concat(Object(xe.e)(s)):"Celda ".concat(Object(xe.e)(l)),m.a.createElement(S.a,{close:!0,className:Lt.a.close,onClick:function(e){return Object(xe.d)(e)&&O()}})),m.a.createElement(lt.a,null,b?m.a.createElement(m.a.Fragment,null,m.a.createElement(_t.a,{pills:!0,className:Lt.a.solapas},C&&m.a.createElement(Nt.a,{title:"Mostrar Comandos"},m.a.createElement(It.a,{className:He()(Lt.a.solapa,{active:"Cmd."===h}),onClick:function(){y("Cmd.")}},"Cmd.")),s&&m.a.createElement(Nt.a,{title:"Mostrar Configuraci\xf3n Semaforo"},m.a.createElement(It.a,{className:He()(Lt.a.solapa,{active:"Semaforo"===h}),onClick:function(){y("Semaforo")}},"Semaforo")),m.a.createElement(Nt.a,{title:"Mostrar Configuraci\xf3n Celda"},m.a.createElement(It.a,{className:He()(Lt.a.solapa,{active:"Celda"===h}),onClick:function(){y("Celda")}},"Celda")),A&&m.a.createElement(Nt.a,{title:"Mostrar Configuraci\xf3n Automatizaci\xf3n"},m.a.createElement(It.a,{className:He()(Lt.a.solapa,{active:"Autom."===h}),onClick:function(){y("Autom.")}},"Autom.")),j&&m.a.createElement(Nt.a,{title:"Mostrar Configuraci\xf3n Enclavamiento"},m.a.createElement(It.a,{className:He()(Lt.a.solapa,{active:"Enclav."===h}),onClick:function(){y("Enclav.")}},"Enclav."))),m.a.createElement(Tt.a,{activeTab:h},C&&m.a.createElement(Dt.a,{tabId:"Cmd."},m.a.createElement(w,{celda:l,semaforo:s})),s&&m.a.createElement(Dt.a,{tabId:"Semaforo"},m.a.createElement("pre",null,JSON.stringify(s,null,2))),m.a.createElement(Dt.a,{tabId:"Celda"},m.a.createElement("pre",null,JSON.stringify(l,null,2))),A&&m.a.createElement(Dt.a,{tabId:"Autom."},m.a.createElement("pre",null,JSON.stringify(A,null,2))),j&&m.a.createElement(Dt.a,{tabId:"Enclav."},m.a.createElement("pre",null,JSON.stringify(j,null,2))))):m.a.createElement(w,{celda:l,semaforo:s})))}function Vt(){var e=me().estado,t=e.show,n=Object(Re.a)(e,["show"]);return t&&m.a.createElement(Rt,n)}var Ht=n(91),Pt=n.n(Ht);function Yt(){var e=function(){var e=Object(Z.useDispatch)();return[Object(Z.useSelector)($.a),function(){return e(Object(X.a)())}]}(),t=Object(p.a)(e,2),n=t[0],a=n.idCelda,r=n.numero,c=n.msg,o=n.fecha,i=t[1],u=function(){var e=Object(Z.useDispatch)();return function(){return e(Object(Y.c)())}}(),l=de();return!!a&&m.a.createElement(it.a,{isOpen:!!a,target:a},m.a.createElement(ut.a,{className:Pt.a.alarma},"Tren ",r,m.a.createElement(S.a,{close:!0,className:Pt.a.close,onClick:function(e){Object(xe.d)(e)&&(i(),u(),l())}})),m.a.createElement(lt.a,null,m.a.createElement("p",null,new Date(o).toLocaleString()),c))}function Gt(){var e=Object(j.e)().idSector,t=Oe(),n=Object(p.a)(t,2),a=n[0],r=n[1];return Object(f.useEffect)((function(){e!==a&&r(e)}),[e,a,r]),a?m.a.createElement(m.a.Fragment,null,m.a.createElement(Vt,null),m.a.createElement(Bt,{idSector:a}),m.a.createElement(Yt,null)):null}var Zt=n(193),Xt=n(194),$t=n(195),en=n(196),tn=n(200),nn=n(201),an=n(197),rn=n(198),cn=n(121),on=n.n(cn);function un(){var e=function(){var e=Object(Z.useDispatch)();return function(){return e(Object(Y.f)())}}(),t=be(),n=Object(p.a)(t,2),a=n[0],r=n[1],c=Object(f.useState)(),o=Object(p.a)(c,2),i=o[0],u=o[1];return Object(f.useEffect)((function(){return a&&!i&&u(setInterval(e,1e3/a/Xe.d)),function(){i&&(clearInterval(i),u(0))}}),[e,i,a]),m.a.createElement(Mt.a,{title:"Velocidad de la animaci\xf3n\n(ciclos por segundo)",className:on.a.rate},m.a.createElement(S.a,{outline:0!==a,color:a?"secondary":"danger",onClick:function(){return r(0)}},"0"),m.a.createElement(S.a,{outline:.5!==a,onClick:function(){return r(.5)}},"\xbd"),m.a.createElement(S.a,{outline:1!==a,onClick:function(){return r(1)}},"1"),m.a.createElement(S.a,{outline:2!==a,onClick:function(){return r(2)}},"2"),m.a.createElement(S.a,{outline:5!==a,onClick:function(){return r(5)}},"5"))}function ln(e){var t=e.sectores,n=Object(f.useState)(!1),a=Object(p.a)(n,2),r=a[0],c=a[1],o=Object(j.f)("/sector/:idSector"),i=o&&o.params.idSector,u=he(i).sector,l=je(),s=Object(p.a)(l,2),d=s[0],b=s[1],O=Ee(),E=Object(p.a)(O,2),v=E[0],h=E[1],S=Ae(),g=Object(p.a)(S,2),C=g[0],y=g[1],w=pe(),k=Object(p.a)(w,2),x=k[0],B=k[1],_=me().hideEstado,N=Object(f.useState)(),I=Object(p.a)(N,2),T=I[0],D=I[1],M=function(e){i!==T&&(_(),D(i),c(!1))};return m.a.createElement(Zt.a,{color:"light",light:!0,expand:"md",fixed:"top"},m.a.createElement(Xt.a,{color:"default",href:"/reactc2",title:"Volver al inicio"},"CTC"),m.a.createElement(un,null),m.a.createElement($t.a,{onClick:function(){return c(!r)}}),m.a.createElement(en.a,{isOpen:r,navbar:!0},m.a.createElement(_t.a,{className:"mr-auto",navbar:!0},m.a.createElement(tn.a,{nav:!0,inNavbar:!0},m.a.createElement(nn.a,{nav:!0,caret:!0,title:u?u.descr:"Seleccione sector a visualizar"},u?u.descrCorta:"Sectores"),m.a.createElement(an.a,null,t.map((function(e){return m.a.createElement(rn.a,{tag:A.b,to:"/sector/".concat(e.idSector),key:e.idSector,title:e.descr,active:i===e.idSector,onClick:M},e.descrCorta)})))),m.a.createElement(tn.a,{nav:!0,inNavbar:!0},m.a.createElement(nn.a,{nav:!0,caret:!0,title:"Opciones de visualizaci\xf3n"},"Opciones"),m.a.createElement(an.a,null,m.a.createElement(rn.a,{onClick:function(e){Object(xe.d)(e)&&(h(!v),c(!1))},active:v},"Teletipo"),m.a.createElement(rn.a,{onClick:function(e){Object(xe.d)(e)&&(b(!d),c(!1))},active:d},"Automatizaciones"),m.a.createElement(rn.a,{onClick:function(e){Object(xe.d)(e)&&(y(!C),c(!1))},active:C},"Coordenadas"),m.a.createElement(rn.a,{onClick:function(e){Object(xe.d)(e)&&(B(!x),c(!1))},active:x},"Mostrar Config.")))),m.a.createElement(_t.a,{navbar:!0},m.a.createElement(Nt.a,null,m.a.createElement(It.a,{href:"https://github.com/Satyam/reactc2",title:"Ver c\xf3digo fuente en GitHub",target:"_blank"},m.a.createElement(Te.a,null)," Github")))))}function sn(){var e=function(){var e=Object(Z.useDispatch)();return{loading:Object(Z.useSelector)(ve.f),sectores:Object(Z.useSelector)(ve.e),error:Object(Z.useSelector)(ve.b),load:function(){return e(Object(x.b)())}}}(),t=e.sectores,n=e.loading,a=e.error,r=e.load;return a?m.a.createElement("pre",null,"Error cargando 'sectores': ",JSON.stringify(a,null,2)):n!==z.s?(r(),m.a.createElement("img",{alt:"loading...",src:yt.a})):m.a.createElement(ln,{sectores:t})}function dn(e){e.username,e.sector,e.photoURL;var t=Ee(),n=Object(p.a)(t,1)[0];return m.a.createElement(A.a,{basename:"/reactc2"},m.a.createElement(sn,null),m.a.createElement(j.a,{path:"/sector/:idSector"},m.a.createElement(Gt,{idSector:"constitucion"})),n&&m.a.createElement(Qe,null))}var fn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(174);O.a.render(m.a.createElement(Z.Provider,{store:ke},m.a.createElement(dn,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/reactc2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/reactc2","/service-worker.js");fn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):mn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):mn(t,e)}))}}()}],[[129,9,10]]]);
//# sourceMappingURL=main.debb18b6.chunk.js.map