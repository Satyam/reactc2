{"version":3,"sources":["Store/constantes.js","Utils/index.js","Utils/createSetOptionAdapter.js","Store/options/index.js","Store/actions.js","Store/pendientes/selectors.js","Store/sectores/actions.js","Components/Estado/styles.module.css","Components/Icons/styles.module.css","Store/semaforos/selectors.js","Components/Celda/styles.module.css","Store/sectores/selectors.js","Store/trenes/actions.js","Store/options/actions.js","Store/alertas/actions.js","Store/bloques/selectors.js","Store/semaforos/actions.js","Store/celdas/selectors.js","Components/Semaforo/styles.module.css","Store/bloques/actions.js","Store/celdas/actions.js","Store/enclavamientos/selectors.js","Store/bloques/adapter.js","Store/celdas/adapter.js","Store/semaforos/adapter.js","Components/Teletipo/styles.module.css","Store/alertas/selectors.js","Store/trenes/selectors.js","Store/automatizaciones/actions.js","Store/pendientes/actions.js","Store/automatizaciones/adapter.js","Store/enclavamientos/adapter.js","Store/sectores/adapter.js","Components/Trenes/styles.module.css","Store/automatizaciones/selectors.js","Store/options/selectors.js","Components/Icons/loading.gif","Components/Alarma/styles.module.css","Components/Enclavamientos/styles.module.css","Components/Sector/styles.module.css","Components/Animador/styles.module.css","Store/data/_salida lazy /^/.//.*$/ groupOptions: {} namespace object","Store/alertas/reducer.js","Store/bloques/reducer.js","Store/celdas/reducer.js","Store/automatizaciones/reducer.js","Store/enclavamientos/reducer.js","Store/options/reducer.js","Store/pendientes/reducer.js","Store/sectores/reducer.js","Store/semaforos/reducer.js","Store/trenes/reducer.js","Store/bloques/hooks.js","Store/celdas/hooks.js","Store/enclavamientos/hooks.js","Store/automatizaciones/hooks.js","Store/options/hooks.js","Store/sectores/hooks.js","Store/semaforos/hooks.js","Store/index.js","Components/Icons/index.jsx","Components/Teletipo/index.jsx","Store/alertas/hooks.js","Components/Semaforo/index.jsx","Components/common.js","Components/Celda/Tramo.jsx","Components/Celda/Linea.jsx","Components/Celda/Cambio.jsx","Components/Celda/Paragolpe.jsx","Components/Celda/Cruce.jsx","Components/Celda/Empalme.js","Components/Trenes/Despachador.jsx","Store/trenes/hooks.js","Components/Trenes/Tren.jsx","Components/Enclavamientos/index.jsx","Components/Celda/index.jsx","Components/Sector/index.jsx","Components/Estado/Cambio.jsx","Components/Estado/Semaforo.jsx","Components/Estado/index.jsx","Components/Alarma/index.jsx","Components/Mimico/index.jsx","Components/Animador/index.jsx","Components/Menu/index.jsx","Components/App/index.jsx","serviceWorker.js","index.js"],"names":["LINEA","CAMBIO","CRUCE","PARAGOLPE","EMPALME","SEMAFORO","LIBRE","PRECAUCION","ALTO","AUTOMATICO","MANIOBRA","BLOQUEADO","NORMAL","DESVIADO","ALTERNATIVA","IZQ","CENTRO","DER","N","NE","E","SE","S","SW","W","NW","BLOQUE","FIJO","INFO","WARNING","DANGER","UNLOADED","LOADING","LOADED","useLongPress","onClick","onLongPress","ms","timerRef","useRef","eventRef","callback","useCallback","current","start","ev","isPlainClick","persist","setTimeout","stop","clearTimeout","useMemo","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","stopProp","stopPropagation","holdPropagation","button","shiftKey","altKey","metaKey","ctrlKey","preventDefault","buildId","idSector","x","y","dir","join","replace","buildIdBloque","bloque","useResize","useState","width","window","innerWidth","height","innerHeight","size","setSize","useEffect","handleResize","addEventListener","removeEventListener","nombreEntity","entity","nombre","createSetOptionAdapter","name","defaultValue","options","sliceName","selector","state","action","createAction","reducer","payload","dispatch","useDispatch","useSelector","value","default","toString","playRate","currentSector","showConfig","showCoords","automatizacionesActive","showTeletipo","selPendiente","id","pendientes","includes","loadSectores","createAsyncThunk","then","data","condition","_","getState","selSectoresLoading","loadSector","selSectorLoading","module","exports","selectors","adapter","getSelectors","semaforos","selSemaforo","selectById","selModoSemaforo","createSelector","semaforo","modo","selSemaforos","selectAll","celda","ss","filter","length","sectorAdapter","sectores","selSector","loadStatusEachSector","selErrorSector","errorSector","selSectores","loadStatusSectores","selErrorSectores","errorSectores","doAddTren","maxSpeed","idTren","numero","idCelda","speed","addTren","setAviso","addTrenToCelda","runAutomatizaciones","doDelTren","delTren","tren","selCelda","removeTrenFromCelda","delTrenes","selTrenes","forEach","setTren","moveTren","selTren","oldCelda","falta","nextCoords","newX","newY","newDir","nextSpeed","newIdCelda","newIdSemaforo","newCelda","tipo","otro","newSemaforo","newPermiso","reduce","permiso","senal","Math","min","Error","newTren","setAlarma","trenEnBloque","selBloqueOcupado","idBloque","nextDir","other","puntas","punta","ramas","posicion","rebota","linea1","linea2","solveNewDir","longitud","moveTrenes","Promise","all","map","showEstado","hideEstado","doSetAlarma","msg","fecha","Date","now","clearAlarma","nivel","clearAvisos","clearAviso","bloques","selBloque","updateSemaforo","doSetAspectoSenal","idSemaforo","aspecto","setAspectoSenal","clearPendientes","setModoSemaforo","s","celdas","selCeldas","e","selCeldaIsManual","manual","setBloqueOcupado","vecino","updateCelda","doSetPosicion","rawSetPosicion","setPendiente","setPosicion","doSetCambioManual","setCambioManual","doRemoveTrenFromCelda","doAddTrenToCelda","setRebota","enclavamientos","selEnclavamientos","selEnclavamiento","selCondicionesFaltantes","encl","deps","salida","dep","concat","createEntityAdapter","selectId","selAlarma","alertas","alarma","selAvisos","avisos","Object","values","trenes","automate","idTarget","autom","celdaTarget","p1","idSource","celdaSource","alt","alts","find","cuando","posicionEsperada","r1","resolve","automatizacionesCambio","semaforoTarget","aspectoEsperado","izq","centro","der","keys","max","semaforoSource","estadoSource","senales","senalAfectada","p2","r2","automatizacionesSemaforo","bloqueTarget","p3","bloqueSource","automatizacionesBloque","runAutomatizacion","a","selAutomatizacion","idOrigen","browseAutomatizaciones","selAutomatizaciones","p","r","countDown","automatizacion","idAutom","sortComparer","b","enclavamiento","idEncl","sector","sa","sb","descrA","descrCorta","toUpperCase","descrB","automatizaciones","selShowEstado","webpackAsyncContext","req","__webpack_require__","o","code","ids","createReducer","unshift","idx","findIndex","av","splice","getInitialState","fulfilled","addMany","upsertOne","show","push","pending","setAll","rejected","error","meta","arg","loadStatus","useBloqueOcupado","useCelda","useSetPosicion","useCondicionesFaltantes","useRunAutomatizaciones","useEstado","estado","hideEstadoAction","args","showEstadoAction","usePlayRate","useCurrentSector","useShowConfig","useShowCoords","useAutomatizacionesActive","useShowTeletipo","useSector","loading","load","useSemaforo","useModoSemaforo","modoSemaforo","configureStore","CambioNormal","viewBox","className","styles","svg","d","main","CambioDesviado","TripleIzq","TripleNormal","TripleDer","Item","toLocaleString","colSpan","Teletipo","useAvisos","mensajes","setShowTeletipo","info","setInfo","Table","fixed","Label","Input","type","checked","onChange","i","buttons","Button","close","title","row","key","estilosAspectos","Semaforo","placement","longPressProps","soloManiobra","classNames","maniobra","blink","x1","y1","x2","y2","cy","cx","xTope","X","ANCHO_CELDA","Y","ANG","Tramo","estilo","Linea","ocupado","index","Cambio","Paragolpe","fill","CENTRO_CELDA","transform","Cruce","Empalme","otraCelda","textAnchor","empalme","whyDidYouRender","ActualDespachador","useAddTren","bloqueOcupado","trenDespachador","flechaDespachador","Despachador","Array","isArray","despachador","Tren","relSpeed","color","CondicionesFaltantes","setShowFaltantes","faltantes","Popover","isOpen","target","PopoverHeader","PopoverBody","ListGroup","ListGroupItem","ActualCelda","minX","maxX","cellWidth","minY","maxY","padLeft","padTop","toggleRebota","useToggleRebota","condicionesFaltantes","showFaltantes","Renderer","dirs","coords","console","log","rect","style","left","top","text","Celda","rest","ActualSector","ancho","alto","ceil","document","attrs","c","Sector","JSON","stringify","src","loadingIcon","EstadoCambio","celdaIsManual","toggleCeldaManual","useCeldaManual","onSetCambioNormal","onSetCambioDesviado","ButtonGroup","cambio","EstadoSenal","onSetAspecto","vertical","EstadoSemaforo","useSetAspectoSenal","Container","disabled","Row","Col","pushDown","hidden","Estado","more","EstadoPopover","oldId","setOldId","activeTab","setActiveTab","activeElement","toggle","tab","Command","Nav","pills","solapas","NavItem","NavLink","classnames","solapa","active","TabContent","TabPane","tabId","Alarma","useAlarma","useDelTrenes","Mimico","useParams","currentIdSector","setCurrentIdSector","Animador","useMoveTrenes","setPlayRate","timer","setTimer","setInterval","clearInterval","rate","outline","ActualMenu","setIsOpen","match","useRouteMatch","params","setAutomatizaciones","setShowCoords","setShowConfig","oldIdSector","setOldIdSector","onClickSector","Navbar","light","expand","NavbarBrand","href","process","NavbarToggler","Collapse","navbar","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","descr","DropdownMenu","sect","DropdownItem","tag","Link","to","Menu","useSectores","App","username","photoURL","basename","path","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","store","getElementById","URL","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.2d0fed3d.chunk.js","sourcesContent":["// Tipos de celda\nexport const LINEA = 'linea';\nexport const CAMBIO = 'cambio';\nexport const CRUCE = 'cruce';\nexport const PARAGOLPE = 'paragolpe';\nexport const EMPALME = 'empalme';\nexport const SEMAFORO = 'semaforo';\n// Aspectos seales:\nexport const LIBRE = 1;\nexport const PRECAUCION = 2;\nexport const ALTO = 3;\n// Modos Semaforos\nexport const AUTOMATICO = 0;\nexport const MANIOBRA = 1;\nexport const BLOQUEADO = 2;\n// Cambio:\nexport const NORMAL = 0;\nexport const DESVIADO = 1;\nexport const ALTERNATIVA = 2;\n// Seales\nexport const IZQ = 'izq';\nexport const CENTRO = 'centro';\nexport const DER = 'der';\n// Direcciones:\nexport const N = 'N';\nexport const NE = 'NE';\nexport const E = 'E';\nexport const SE = 'SE';\nexport const S = 'S';\nexport const SW = 'SW';\nexport const W = 'W';\nexport const NW = 'NW';\n// para tipo de automatizacin\n// se reutilizan CAMBIO y SEMAFORO de antes\nexport const BLOQUE = 'bloque';\nexport const FIJO = 'fijo';\n// Tipos de avisos\nexport const INFO = 'info';\nexport const WARNING = 'warning';\nexport const DANGER = 'danger';\n// Estados de carga de datos\nexport const UNLOADED = 'unloaded';\nexport const LOADING = 'loading';\nexport const LOADED = 'loaded';\n","import { useState, useEffect, useCallback, useRef, useMemo } from 'react';\n\n/* Usage:\n\nhttps://stackoverflow.com/questions/48048957/react-long-press-eventRef\n\nfunction MyComponent (props) {\n  const longPressProps = useLongPress({\n    onClick: () => void console.log('on click'),\n    onLongPress: () => void console.log('long press'),\n  });\n\n\n  return (\n      <button {...longPressProps} >\n        click me\n      </button>  );\n};\n*/\n\nexport function useLongPress({ onClick, onLongPress, ms = 300 } = {}) {\n  const timerRef = useRef(false);\n  const eventRef = useRef({});\n\n  const callback = useCallback(() => {\n    if (typeof onLongPress === 'function') {\n      onLongPress(eventRef.current);\n    }\n    eventRef.current = {};\n    timerRef.current = false;\n  }, [onLongPress]);\n\n  const start = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        timerRef.current = setTimeout(callback, ms);\n      }\n    },\n    [callback, ms]\n  );\n\n  const stop = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        if (timerRef.current) {\n          clearTimeout(timerRef.current);\n          if (typeof onClick === 'function') {\n            onClick(ev);\n          }\n          timerRef.current = false;\n          eventRef.current = {};\n        }\n      }\n    },\n    [onClick]\n  );\n\n  return useMemo(\n    () => ({\n      onMouseDown: start,\n      onMouseUp: stop,\n      onMouseLeave: stop,\n      onTouchStart: start,\n      onTouchEnd: stop,\n    }),\n    [start, stop]\n  );\n}\n\nconst stopProp = (ev) => ev.stopPropagation();\n\nexport const holdPropagation = {\n  onMouseDown: stopProp,\n  onMouseUp: stopProp,\n  onMouseLeave: stopProp,\n  onTouchStart: stopProp,\n  onTouchEnd: stopProp,\n};\n\nexport const isPlainClick = (ev) => {\n  if (ev.button || ev.shiftKey || ev.altKey || ev.metaKey || ev.ctrlKey)\n    return false;\n  ev.stopPropagation();\n  ev.preventDefault();\n  return true;\n};\n\n// Ids should be valid DOM id attributes.\n// Ids starting with a digit are prefixed with an underscore\nexport const buildId = ({ idSector, x, y, dir }) =>\n  (dir ? [idSector, x, y, dir].join('_') : [idSector, x, y].join('_'))\n    .replace(/\\W/g, '_')\n    .replace(/(^\\d)/, '_$1');\n\nexport const buildIdBloque = (idSector, bloque) =>\n  `${idSector}__${bloque}`.replace(/\\W/g, '_').replace(/(^\\d)/, '_$1');\n\nexport function useResize() {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () =>\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return size;\n}\n\nexport function nombreEntity(entity) {\n  return (\n    entity.nombre ||\n    `[${entity.x},${entity.y}]` + (entity.dir ? `-${entity.dir}` : '')\n  );\n}\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createAction } from '@reduxjs/toolkit';\n\nexport default function createSetOptionAdapter(\n  name,\n  defaultValue,\n  options = {}\n) {\n  const { sliceName = 'options' } = options;\n\n  const selector = (state) => state[sliceName][name];\n  const action = createAction(name);\n  const reducer = (state, action) => {\n    state[name] = action.payload;\n  };\n  const useState = () => {\n    const dispatch = useDispatch();\n    return [\n      useSelector(selector),\n      useCallback((value) => dispatch(action(value)), [dispatch]),\n    ];\n  };\n\n  return {\n    selector,\n    action,\n    reducer,\n    useState,\n    default: defaultValue,\n    toString: () => name,\n  };\n}\n","import createSetOptionAdapter from 'Utils/createSetOptionAdapter';\n\nexport const playRate = createSetOptionAdapter('playRate', 1);\nexport const currentSector = createSetOptionAdapter('currIdSector');\nexport const showConfig = createSetOptionAdapter('showConfig', false);\nexport const showCoords = createSetOptionAdapter('showCoords', true);\nexport const automatizacionesActive = createSetOptionAdapter(\n  'automatizacionesActive',\n  true\n);\nexport const showTeletipo = createSetOptionAdapter('showTeletipo', true);\n","export * from './alertas/actions';\nexport * from './bloques/actions';\nexport * from './celdas/actions';\nexport * from './automatizaciones/actions';\nexport * from './enclavamientos/actions';\nexport * from './options/actions';\nexport * from './pendientes/actions';\nexport * from './sectores/actions';\nexport * from './semaforos/actions';\nexport * from './trenes/actions';\n","export const selPendiente = (state, id) => state.pendientes.includes(id);\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { selSectoresLoading, selSectorLoading } from './selectors';\nimport { UNLOADED } from 'Store/constantes';\nexport const loadSectores = createAsyncThunk(\n  'loadSectores',\n  () =>\n    import(\n      /* webpackChunkName: \"sectores\" */ 'Store/data/_salida/_sectores'\n    ).then((data) => data.default),\n  {\n    condition: (_, { getState }) => {\n      return selSectoresLoading(getState()) === UNLOADED;\n    },\n  }\n);\n\nexport const loadSector = createAsyncThunk(\n  'loadSector',\n  (idSector) =>\n    import(\n      /* webpackChunkName: \"[request]\" */ `Store/data/_salida/${idSector}`\n    ),\n  {\n    condition: (_, { getState }) => {\n      return selSectorLoading(getState()) === UNLOADED;\n    },\n  }\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"styles_label__3r56c\",\"pushDown\":\"styles_pushDown__1r8Ml\",\"cambio\":\"styles_cambio__K-Ynx\",\"manual\":\"styles_manual__1SN6-\",\"hidden\":\"styles_hidden__1mPWU\",\"close\":\"styles_close__1b-CL\",\"disabled\":\"styles_disabled__3q6v_\",\"solapas\":\"styles_solapas__1cybr\",\"solapa\":\"styles_solapa__1ZYE5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"styles_main__QJA2q\",\"alt\":\"styles_alt__EQPaw\",\"svg\":\"styles_svg__6vY_Q\",\"filled\":\"styles_filled__2ZKFa\"};","import { createSelector } from '@reduxjs/toolkit';\nimport { AUTOMATICO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.semaforos);\n\nexport const selSemaforo = selectors.selectById;\n\nexport const selModoSemaforo = createSelector(\n  selectors.selectById,\n  (semaforo) => (semaforo && semaforo.modo) || AUTOMATICO\n);\n\nexport const selSemaforos = createSelector(\n  selectors.selectAll,\n  (_, celda) => celda,\n  (semaforos, celda) => {\n    const ss = semaforos.filter(\n      (semaforo) =>\n        semaforo.idSector === celda.idSector &&\n        semaforo.x === celda.x &&\n        semaforo.y === celda.y\n    );\n    if (ss.length) return ss;\n    return null;\n  }\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rect\":\"styles_rect__1zG3J\",\"manual\":\"styles_manual__139ZI\",\"text\":\"styles_text__JdA5Q\",\"svg\":\"styles_svg__rOGuq\",\"tramo-normal\":\"styles_tramo-normal__JZdRz\",\"tramo-muerto\":\"styles_tramo-muerto__LXymi\",\"tramo-ocupado\":\"styles_tramo-ocupado__LrGlb\",\"tramo-empalme\":\"styles_tramo-empalme__QAGef\",\"rebota\":\"styles_rebota__323Gf\",\"close\":\"styles_close__I-x5K\",\"empalme\":\"styles_empalme__1gk8t\"};","import sectorAdapter from './adapter';\nimport { UNLOADED } from 'Store/constantes';\nconst selectors = sectorAdapter.getSelectors((state) => state.sectores);\n\nexport const selSector = selectors.selectById;\nexport const selSectorLoading = (state, idSector) =>\n  state.sectores.loadStatusEachSector[idSector] || UNLOADED;\nexport const selErrorSector = (state) => state.sectores.errorSector;\n\nexport const selSectores = selectors.selectAll;\nexport const selSectoresLoading = (state) => state.sectores.loadStatusSectores;\nexport const selErrorSectores = (state) => state.sectores.errorSectores;\n","import { createAction } from '@reduxjs/toolkit';\nimport { selCelda, selSemaforo } from 'Store/selectors';\nimport {\n  removeTrenFromCelda,\n  addTrenToCelda,\n  setAlarma,\n  runAutomatizaciones,\n  setAviso,\n} from 'Store/actions';\nimport { currentSector } from 'Store/options';\nimport { buildId, nombreEntity } from 'Utils';\n\nimport {\n  LINEA,\n  CAMBIO,\n  CRUCE,\n  PARAGOLPE,\n  IZQ,\n  CENTRO,\n  DER,\n  ALTO,\n  PRECAUCION,\n  LIBRE,\n  N,\n  NE,\n  E,\n  SE,\n  S,\n  SW,\n  W,\n  NW,\n  INFO,\n  WARNING,\n} from 'Store/constantes';\nimport { selTren, selTrenes, selBloqueOcupado } from 'Store/selectors';\nimport { EMPALME } from '../constantes';\n\nlet id = 100;\nexport const doAddTren = createAction(\n  'addTren',\n  (celda, dir, maxSpeed, idTren, numero) => ({\n    payload: {\n      idCelda: celda.idCelda,\n      x: celda.x,\n      y: celda.y,\n      dir,\n      speed: maxSpeed,\n      maxSpeed,\n      idTren,\n      idSector: celda.idSector,\n      numero,\n    },\n  })\n);\n\nexport function addTren(celda, dir, maxSpeed = 1) {\n  return (dispatch) => {\n    const numero = id;\n    id += 2;\n    const idTren = `_tren_${numero}`;\n    const { idCelda } = celda;\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Parte tren ${numero} desde ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doAddTren(celda, dir, maxSpeed, idTren, numero));\n    dispatch(addTrenToCelda(idCelda, idTren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport const doDelTren = createAction('doDelTren');\n\nexport function delTren(tren) {\n  return (dispatch, getState) => {\n    const { idCelda, numero } = tren;\n    const celda = selCelda(getState(), idCelda);\n    if (idCelda) dispatch(removeTrenFromCelda(idCelda));\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Borrado el tren ${numero} en ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doDelTren(tren.idTren));\n  };\n}\n\nexport function delTrenes() {\n  return (dispatch, getState) => {\n    selTrenes(getState()).forEach((tren) => dispatch(delTren(tren)));\n  };\n}\n\nexport const setTren = createAction('setTren');\n\nfunction nextCoords({ x, y, dir }, getState) {\n  switch (dir) {\n    case N:\n      return [x, y - 1, S];\n    case NE:\n      return [x + 1, y - 1, SW];\n    case E:\n      return [x + 1, y, W];\n    case SE:\n      return [x + 1, y + 1, NW];\n    case S:\n      return [x, y + 1, N];\n    case SW:\n      return [x - 1, y + 1, NE];\n    case W:\n      return [x - 1, y, E];\n    case NW:\n      return [x - 1, y - 1, SE];\n    default:\n  }\n}\n\nfunction solveNewDir(newDir, newCelda) {\n  function other({ puntas }) {\n    if (puntas.includes(newDir)) {\n      return puntas[0] === newDir ? puntas[1] : puntas[0];\n    } else return;\n  }\n  switch (newCelda.tipo) {\n    case LINEA:\n      return other(newCelda);\n    case CAMBIO:\n      if (newCelda.punta === newDir) return newCelda.ramas[newCelda.posicion];\n      else if (newCelda.ramas[newCelda.posicion] === newDir)\n        return newCelda.punta;\n      else return;\n    case PARAGOLPE:\n      if (newCelda.rebota) return newCelda.punta;\n      if (newCelda.punta === newDir) return 'X';\n      else return;\n    case CRUCE:\n      return other(newCelda.linea1) || other(newCelda.linea2);\n    default:\n      break;\n  }\n}\n\nexport function moveTren(idTren) {\n  return (dispatch, getState) => {\n    const tren = selTren(getState(), idTren);\n    if (!tren) return;\n    if (tren.dir === 'X') {\n      return dispatch(delTren(tren));\n    }\n\n    const oldCelda = selCelda(getState(), tren.idCelda);\n    if (tren.falta) {\n      dispatch(\n        setTren({\n          idTren,\n          falta: tren.speed > tren.falta ? 0 : tren.falta - tren.speed,\n        })\n      );\n      return;\n    }\n    const [newX, newY, newDir] = nextCoords(tren, getState);\n    let nextSpeed = tren.speed;\n\n    if (oldCelda.x !== newX || oldCelda.y !== newY) {\n      let newIdCelda = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n      });\n      let newIdSemaforo = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n        dir: newDir,\n      });\n      let newCelda = selCelda(getState(), newIdCelda);\n\n      if (newCelda.tipo === EMPALME) {\n        newIdCelda = buildId({\n          idSector: oldCelda.idSector,\n          x: newCelda.otro.x,\n          y: newCelda.otro.y,\n        });\n        newIdSemaforo = buildId({\n          ...newCelda,\n          dir: newCelda.otro.dir,\n        });\n        newCelda = selCelda(getState(), newIdCelda);\n      }\n      if (newCelda) {\n        const newSemaforo = selSemaforo(getState(), newIdSemaforo);\n        if (newSemaforo) {\n          const newPermiso = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in newSemaforo\n              ? Math.min(permiso, newSemaforo[senal])\n              : permiso;\n          }, ALTO);\n          switch (newPermiso) {\n            case ALTO:\n              if (tren.speed)\n                dispatch(\n                  setAviso(\n                    WARNING,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} detenido en ${nombreEntity(oldCelda)}`\n                  )\n                );\n              dispatch(setTren({ idTren, speed: 0 }));\n\n              return;\n            case PRECAUCION:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed / 2 }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed / 2;\n              break;\n            case LIBRE:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed;\n              break;\n            default:\n              throw new Error(\n                `Semforo ${newIdSemaforo} d semforo imposible ${newPermiso}`\n              );\n          }\n        }\n\n        if (newCelda.idTren) {\n          const newTren = selTren(getState(), newCelda.idTren);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Colisin en ${nombreEntity(newCelda)} entre trenes ${\n                tren.numero\n              } y ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const trenEnBloque = selBloqueOcupado(getState(), newCelda.idBloque);\n        if (trenEnBloque && trenEnBloque !== idTren) {\n          const newTren = selTren(getState(), trenEnBloque);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Tren ${tren.numero} invade el bloque ${newCelda.idBloque} ocupado por el tren ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const nextDir = solveNewDir(newDir, newCelda);\n        if (!nextDir) {\n          dispatch(\n            setAlarma(\n              newCelda.idCelda,\n              tren.numero,\n              `Tren ${\n                tren.numero\n              } no encuentra va correspondiente en celda ${nombreEntity(\n                newCelda\n              )}`\n            )\n          );\n          return;\n        }\n        dispatch(removeTrenFromCelda(oldCelda.idCelda));\n        dispatch(addTrenToCelda(newIdCelda, idTren));\n        dispatch(\n          setTren({\n            idTren,\n            dir: nextDir,\n            x: newX,\n            y: newY,\n            speed: nextSpeed,\n            idCelda: newIdCelda,\n            falta: newCelda.longitud || 1,\n          })\n        );\n      } else {\n        dispatch(delTren(tren));\n      }\n    } else dispatch(setTren(tren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport function moveTrenes() {\n  return (dispatch, getState) => {\n    const idSector = currentSector.selector(getState());\n    return Promise.all(\n      selTrenes(getState(), idSector).map((tren) =>\n        dispatch(moveTren(tren.idTren))\n      )\n    );\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const showEstado = createAction('showEstado');\nexport const hideEstado = createAction('hideEstado');\n","import { createAction } from '@reduxjs/toolkit';\nimport { playRate } from 'Store/options';\nimport { DANGER } from 'Store/constantes';\n\nexport const doSetAlarma = createAction('doSetAlarma');\n\nexport function setAlarma(idCelda, numero, msg) {\n  return (dispatch) => {\n    dispatch(setAviso(DANGER, idCelda, numero, msg));\n    dispatch(doSetAlarma({ idCelda, numero, msg, fecha: Date.now() }));\n    dispatch(playRate.action(0));\n  };\n}\n\nexport const clearAlarma = createAction('clearAlarma');\n\nexport const setAviso = createAction(\n  'setAviso',\n  (nivel, idCelda, numero, msg) => ({\n    payload: {\n      nivel,\n      idCelda,\n      numero,\n      msg,\n      fecha: Date.now(),\n    },\n  })\n);\n\nexport const clearAvisos = createAction('clearAvisos');\n\nexport const clearAviso = createAction('clearAviso');\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.bloques);\n\nexport const selBloque = selectors.selectById;\n\nexport const selBloqueOcupado = createSelector(\n  selectors.selectById,\n  (bloque) => bloque && bloque.idTren\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { clearPendientes, runAutomatizaciones } from 'Store/actions';\nimport { selModoSemaforo, selSemaforo } from './selectors';\nimport {\n  AUTOMATICO,\n  BLOQUEADO,\n  ALTO,\n  IZQ,\n  CENTRO,\n  DER,\n} from 'Store/constantes';\n\nconst UPDATE_SEMAFORO = 'updateSemaforo';\nexport const updateSemaforo = createAction(UPDATE_SEMAFORO);\n\nexport function doSetAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (!semaforo[senal]) {\n      throw new Error(`Semaforo ${idSemaforo} no tiene senal ${senal}`);\n    }\n    if (semaforo[senal] === aspecto) return false;\n    return dispatch(\n      updateSemaforo({\n        ...semaforo,\n        [senal]: aspecto,\n      })\n    );\n  };\n}\n\nexport function setAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    dispatch(doSetAspectoSenal(idSemaforo, senal, aspecto));\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones(idSemaforo));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport function setModoSemaforo(idSemaforo, modo) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (modo === BLOQUEADO) {\n      dispatch(\n        updateSemaforo(\n          [IZQ, CENTRO, DER].reduce(\n            (s, dir) => (dir in semaforo ? { ...s, [dir]: ALTO } : s),\n            { idSemaforo, modo }\n          )\n        )\n      );\n    } else {\n      dispatch(updateSemaforo({ idSemaforo, modo }));\n    }\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { NORMAL, CAMBIO } from 'Store/constantes';\n\nimport { currentSector } from 'Store/options';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.celdas);\n\nexport const selCeldas = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (celdas, idSector) => celdas.filter((e) => e.idSector === idSector)\n);\n\nexport const selCelda = createSelector(selectors.selectById, (celda) => {\n  if (celda)\n    return celda.tipo === CAMBIO\n      ? {\n          posicion: NORMAL,\n          ...celda,\n        }\n      : celda;\n});\n\nexport const selCeldaIsManual = createSelector(\n  selectors.selectById,\n  (celda) => celda && celda.manual\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"semaforo\":\"styles_semaforo__1oD_-\",\"verde\":\"styles_verde__3jxOB\",\"rojo\":\"styles_rojo__19OcT\",\"amarillo\":\"styles_amarillo__EBZgn\",\"maniobra\":\"styles_maniobra__1WLEL\",\"blink\":\"styles_blink__1pyu2\",\"blinker\":\"styles_blinker__2Ms7j\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const setBloqueOcupado = createAction(\n  'setBloqueOcupado',\n  (idBloque, idTren, vecino) => ({\n    payload: {\n      idBloque,\n      idTren,\n      vecino,\n    },\n  })\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  setPendiente,\n  runAutomatizaciones,\n  clearPendientes,\n  setBloqueOcupado,\n} from 'Store/actions';\nimport { selCelda, selPendiente, selCeldaIsManual } from 'Store/selectors';\nimport { CAMBIO } from 'Store/constantes';\n\nconst UPDATE_CELDA = 'updateCelda';\nexport const updateCelda = createAction(UPDATE_CELDA);\n\nconst doSetPosicion = createAction(UPDATE_CELDA, (idCelda, posicion) => ({\n  payload: {\n    idCelda,\n    posicion,\n  },\n}));\n\nexport function rawSetPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    const celda = selCelda(getState(), idCelda);\n    if (celda.tipo !== CAMBIO) {\n      throw new Error(`Celda ${idCelda}  no es un cambio`);\n    }\n    if (celda.posicion === posicion) {\n      return false;\n    }\n    if (selPendiente(getState(), idCelda)) return false;\n    dispatch(setPendiente(idCelda));\n    return dispatch(doSetPosicion(idCelda, posicion));\n  };\n}\n\nexport function setPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    dispatch(rawSetPosicion(idCelda, posicion));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones(idCelda));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport const doSetCambioManual = createAction(\n  UPDATE_CELDA,\n  (idCelda, manual) => ({\n    payload: {\n      idCelda,\n      manual,\n    },\n  })\n);\n\nexport function setCambioManual(idCelda, manual) {\n  return (dispatch, getState) => {\n    dispatch(doSetCambioManual(idCelda, manual));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n\nexport const doRemoveTrenFromCelda = createAction(UPDATE_CELDA, (idCelda) => ({\n  payload: {\n    idCelda,\n    idTren: null,\n  },\n}));\n\nexport function removeTrenFromCelda(idCelda) {\n  return (dispatch, getState) => {\n    dispatch(doRemoveTrenFromCelda(idCelda));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, false));\n    }\n  };\n}\n\nexport const doAddTrenToCelda = createAction(\n  UPDATE_CELDA,\n  (idCelda, idTren) => ({\n    payload: {\n      idCelda,\n      idTren,\n    },\n  })\n);\n\nexport function addTrenToCelda(idCelda, idTren) {\n  return (dispatch, getState) => {\n    dispatch(doAddTrenToCelda(idCelda, idTren));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, idTren));\n    }\n  };\n}\n\nexport const setRebota = createAction(UPDATE_CELDA, (idCelda, rebota) => ({\n  payload: {\n    idCelda,\n    rebota,\n  },\n}));\n","import { createSelector } from '@reduxjs/toolkit';\nimport { currentSector } from 'Store/options';\nimport { selBloqueOcupado } from 'Store/bloques/selectors';\nimport { selSemaforo } from 'Store/semaforos/selectors';\nimport { buildId, buildIdBloque } from 'Utils';\nimport { BLOQUE, SEMAFORO, IZQ, CENTRO, DER, ALTO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.enclavamientos);\n\nexport const selEnclavamientos = selectors.selectAll;\nexport const selEnclavamiento = selectors.selectById;\n\nexport const selCondicionesFaltantes = createSelector(\n  (state) => state,\n  currentSector.selector,\n  selEnclavamiento,\n  (state, idSector, encl) =>\n    encl\n      ? encl.deps.reduce((salida, dep) => {\n          switch (dep.tipo) {\n            case BLOQUE:\n              const idBloque = buildIdBloque(idSector, dep.bloque);\n              const idTren = selBloqueOcupado(state, idBloque);\n              if (idTren) {\n                return salida.concat({\n                  ...dep,\n                  idTren,\n                  idBloque,\n                });\n              }\n              break;\n            case SEMAFORO:\n              const idSemaforo = buildId({ ...dep, idSector });\n              const semaforo = selSemaforo(state, idSemaforo);\n              const aspecto = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n                return senal in semaforo\n                  ? Math.min(permiso, semaforo[senal])\n                  : permiso;\n              }, ALTO);\n              if (aspecto !== dep.aspecto) {\n                return salida.concat({\n                  ...dep,\n                  ...semaforo,\n                });\n              }\n              break;\n            default:\n              break;\n          }\n          return salida;\n        }, [])\n      : []\n);\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (bloque) => bloque.idBloque,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (celda) => celda.idCelda,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (semaforo) => semaforo.idSemaforo,\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"styles_info__2eaPP\",\"warning\":\"styles_warning__Y2zSC\",\"danger\":\"styles_danger__3Ef8R\",\"fixed\":\"styles_fixed__3IULb\",\"buttons\":\"styles_buttons__Of--i\"};","export const selAlarma = (state) => state.alertas.alarma;\n\nexport const selAvisos = (state) => state.alertas.avisos;\n","export const selTrenes = (state, idSector) =>\n  Object.values(state.trenes).filter((tren) =>\n    idSector ? tren.idSector === idSector : true\n  );\nexport const selTren = (state, idTren) => state.trenes[idTren];\n","import { buildId, buildIdBloque } from 'Utils';\n\nimport {\n  selCelda,\n  selSemaforo,\n  selAutomatizacion,\n  selAutomatizaciones,\n  selBloqueOcupado,\n  selBloque,\n} from 'Store/selectors';\n\nimport { automatizacionesActive } from 'Store/options';\n\nimport {\n  LIBRE,\n  ALTO,\n  CAMBIO,\n  SEMAFORO,\n  BLOQUE,\n  FIJO,\n  IZQ,\n  CENTRO,\n  DER,\n  AUTOMATICO,\n} from 'Store/constantes';\n\nimport {\n  rawSetPosicion,\n  doSetAspectoSenal,\n  setBloqueOcupado,\n} from 'Store/actions';\n\nfunction automate(dispatch, getState, idTarget, autom) {\n  const idSector = autom.idSector;\n\n  function automatizacionesCambio(idTarget, deps) {\n    const celdaTarget = selCelda(getState(), idTarget);\n    return deps.reduce((p1, dep) => {\n      const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n      const celdaSource = selCelda(getState(), idSource);\n      const alt = dep.alts.find((alt) => alt.cuando === celdaSource.posicion);\n      if (!alt) return p1;\n      const posicionEsperada = alt.posicion;\n      if (posicionEsperada === celdaTarget.posicion) return p1;\n      if (celdaTarget.manual) return p1;\n      return p1.then(\n        (r1) => !!dispatch(rawSetPosicion(idTarget, posicionEsperada)) || r1\n      );\n    }, Promise.resolve(false));\n  }\n\n  function automatizacionesSemaforo(idTarget, deps) {\n    const semaforoTarget = selSemaforo(getState(), idTarget);\n    if (semaforoTarget.modo !== AUTOMATICO) return false;\n    const aspectoEsperado = {\n      izq: LIBRE,\n      centro: LIBRE,\n      der: LIBRE,\n    };\n    deps.forEach((dep) => {\n      const idSource = buildId({\n        idSector,\n        x: dep.x,\n        y: dep.y,\n        dir: dep.dir,\n      });\n      switch (dep.tipo) {\n        case CAMBIO:\n          const celdaSource = selCelda(getState(), idSource);\n          const alt = dep.alts.find(\n            (alt) => alt.cuando === celdaSource.posicion\n          );\n          if (alt) {\n            Object.keys(aspectoEsperado).forEach((senal) => {\n              if (alt[senal])\n                aspectoEsperado[senal] = Math.max(\n                  aspectoEsperado[senal],\n                  alt[senal]\n                );\n            });\n          }\n          break;\n        case SEMAFORO:\n          const semaforoSource = selSemaforo(getState(), idSource);\n          const estadoSource = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in semaforoSource\n              ? Math.min(permiso, semaforoSource[senal])\n              : permiso;\n          }, ALTO);\n          dep.senales.forEach(({ cuando, senalAfectada, aspecto }) => {\n            if (estadoSource === cuando) {\n              aspectoEsperado[senalAfectada] = Math.max(\n                aspectoEsperado[senalAfectada],\n                aspecto\n              );\n            }\n          });\n          break;\n        case BLOQUE:\n          const ocupado = !!selBloqueOcupado(\n            getState(),\n            buildIdBloque(idSector, dep.bloque)\n          );\n          if (ocupado) {\n            aspectoEsperado[dep.senalAfectada] = ALTO;\n          }\n          break;\n        case FIJO:\n          aspectoEsperado[dep.senalAfectada] = Math.max(\n            dep.aspecto,\n            aspectoEsperado[dep.senalAfectada]\n          );\n          break;\n        default:\n          throw new Error(\n            `Dependencia ${dep.idSource} de ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n          );\n      }\n    });\n    return Object.keys(aspectoEsperado).reduce((p2, senal) => {\n      if (!(senal in semaforoTarget)) return p2;\n      if (semaforoTarget[senal] === aspectoEsperado[senal]) return p2;\n\n      return p2.then(\n        (r2) =>\n          !!dispatch(\n            doSetAspectoSenal(idTarget, senal, aspectoEsperado[senal])\n          ) || r2\n      );\n    }, Promise.resolve(false));\n  }\n\n  const automatizacionesBloque = (idTarget, deps) => {\n    const bloqueTarget = selBloque(getState(), idTarget);\n    deps.reduce(\n      (p3, dep) => {\n        switch (dep.tipo) {\n          case BLOQUE:\n            const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n            const celdaSource = selCelda(getState(), idSource);\n            if (celdaSource.posicion === dep.posicion) {\n              const bloqueSource = selBloque(\n                getState(),\n                buildIdBloque(idSector, dep.bloque)\n              );\n              if (bloqueSource.idTren && !bloqueSource.vecino) {\n                return dispatch(\n                  setBloqueOcupado(idTarget, bloqueSource.idTren, true)\n                );\n              }\n            }\n            return p3;\n          default:\n            throw new Error(\n              `Dependencia de  ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n            );\n        }\n      },\n      bloqueTarget.vecino\n        ? dispatch(setBloqueOcupado(idTarget, false, false))\n        : Promise.resolve(false)\n    );\n  };\n\n  switch (autom.tipo) {\n    case CAMBIO:\n      return automatizacionesCambio(idTarget, autom.deps);\n    case SEMAFORO:\n      return automatizacionesSemaforo(idTarget, autom.deps);\n    case BLOQUE:\n      return automatizacionesBloque(idTarget, autom.deps);\n    default:\n      throw new Error(\n        `Celda ${idTarget} tiene automatizacin desconocido ${autom.tipo}`\n      );\n  }\n}\n\nexport function runAutomatizacion(idTarget) {\n  return async (dispatch, getState) => {\n    const autom = selAutomatizacion(getState(), idTarget);\n    automate(dispatch, getState, idTarget, autom);\n  };\n}\n\nexport function runAutomatizaciones(idOrigen) {\n  return async (dispatch, getState) => {\n    if (!automatizacionesActive.selector(getState())) return;\n\n    const browseAutomatizaciones = () => {\n      const automatizaciones = selAutomatizaciones(getState());\n      return automatizaciones.reduce((p, autom) => {\n        const { x, y, dir, tipo, bloque, idSector } = autom;\n        const idTarget =\n          tipo === BLOQUE\n            ? buildIdBloque(idSector, bloque)\n            : buildId({ idSector, x, y, dir });\n        if (idOrigen && idTarget === idOrigen) return p;\n        return p.then(\n          (r) => automate(dispatch, getState, idTarget, autom) || r\n        );\n      }, Promise.resolve(false));\n    };\n\n    let countDown = 9;\n    while (countDown && (await browseAutomatizaciones())) countDown--;\n    if (!countDown) throw new Error(`Automatizacin en loop por ${idOrigen}`);\n    return !!countDown;\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const setPendiente = createAction('setPendiente');\nexport const clearPendientes = createAction('clearPendientes');\n","import { createEntityAdapter } from '@reduxjs/toolkit';\nimport { CAMBIO, SEMAFORO } from 'Store/constantes';\n\nexport default createEntityAdapter({\n  selectId: (automatizacion) => automatizacion.idAutom,\n  sortComparer: (a, b) => {\n    if (a.tipo === CAMBIO && b.tipo === SEMAFORO) return -1;\n    if (a.tipo === SEMAFORO && b.tipo === CAMBIO) return 1;\n    return 0;\n  },\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (enclavamiento) => enclavamiento.idEncl,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (sector) => sector.idSector,\n  sortComparer: (sa, sb) => {\n    var descrA = sa.descrCorta.toUpperCase();\n    var descrB = sb.descrCorta.toUpperCase();\n    if (descrA < descrB) return -1;\n    if (descrA > descrB) return 1;\n    return 0;\n  },\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flechaDespachador\":\"styles_flechaDespachador__jpfOH\",\"trenDespachador\":\"styles_trenDespachador__1G3VE\",\"disabled\":\"styles_disabled__10sbm\",\"tren\":\"styles_tren__25vJ9\"};","import { createSelector } from '@reduxjs/toolkit';\n\nimport { currentSector } from 'Store/options';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.automatizaciones);\n\nexport const selAutomatizaciones = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (automatizaciones, idSector) =>\n    automatizaciones.filter((e) => e.idSector === idSector)\n);\n\nexport const selAutomatizacion = selectors.selectById;\n","export const selShowEstado = (state) => state.options.showEstado;\n","module.exports = \"data:image/gif;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alarma\":\"styles_alarma__1_-OE\",\"close\":\"styles_close__1Zwow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close\":\"styles_close__3wiH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sector\":\"styles_sector__1v7a1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rate\":\"styles_rate__26o7Y\"};","var map = {\n\t\"./_sectores\": [\n\t\t92,\n\t\t0\n\t],\n\t\"./_sectores.js\": [\n\t\t92,\n\t\t0\n\t],\n\t\"./circulo\": [\n\t\t120,\n\t\t1\n\t],\n\t\"./circulo.js\": [\n\t\t120,\n\t\t1\n\t],\n\t\"./constitucion\": [\n\t\t121,\n\t\t2\n\t],\n\t\"./constitucion.js\": [\n\t\t121,\n\t\t2\n\t],\n\t\"./cruceDobleCambio\": [\n\t\t122,\n\t\t3\n\t],\n\t\"./cruceDobleCambio.js\": [\n\t\t122,\n\t\t3\n\t],\n\t\"./dosVias\": [\n\t\t123,\n\t\t4\n\t],\n\t\"./dosVias.js\": [\n\t\t123,\n\t\t4\n\t],\n\t\"./empalmes\": [\n\t\t124,\n\t\t5\n\t],\n\t\"./empalmes.js\": [\n\t\t124,\n\t\t5\n\t],\n\t\"./semaforosEncadenados\": [\n\t\t125,\n\t\t6\n\t],\n\t\"./semaforosEncadenados.js\": [\n\t\t125,\n\t\t6\n\t],\n\t\"./simpleDesvio\": [\n\t\t126,\n\t\t7\n\t],\n\t\"./simpleDesvio.js\": [\n\t\t126,\n\t\t7\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 149;\nmodule.exports = webpackAsyncContext;","import { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  doSetAlarma,\n  clearAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n} from 'Store/actions';\n\nexport default createReducer(\n  { alarma: {}, avisos: [] },\n  {\n    [doSetAlarma]: (state, action) => {\n      state.alarma = action.payload;\n    },\n    [clearAlarma]: (state) => {\n      state.alarma = {};\n    },\n    [setAviso]: (state, action) => {\n      state.avisos.unshift(action.payload);\n    },\n    [clearAviso]: (state, action) => {\n      const idx = state.avisos.findIndex((av) => av.fecha === action.payload);\n      if (idx !== -1) state.avisos.splice(idx, 1);\n    },\n    [clearAvisos]: (state) => {\n      state.avisos = [];\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { setBloqueOcupado } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.bloques);\n  },\n  [setBloqueOcupado]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nimport { updateCelda } from 'Store/actions';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.celdas);\n  },\n  [updateCelda]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.automatizaciones || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.enclavamientos || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { showEstado, hideEstado } from './actions';\n\nimport {\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n  playRate,\n  currentSector,\n} from './';\n\nexport default createReducer(\n  {\n    [automatizacionesActive]: automatizacionesActive.default,\n    [showCoords]: showCoords.default,\n    showEstado: { show: false },\n    [playRate]: playRate.default,\n    [showTeletipo]: showTeletipo.default,\n    [showConfig]: showConfig.default,\n  },\n  {\n    [automatizacionesActive]: automatizacionesActive.reducer,\n    [showTeletipo]: showTeletipo.reducer,\n    [showCoords]: showCoords.reducer,\n    [showEstado]: (state, action) => {\n      state.showEstado = {\n        ...action.payload,\n        show: true,\n      };\n    },\n    [hideEstado]: (state) => {\n      state.showEstado = { show: false };\n    },\n    [showConfig]: showConfig.reducer,\n    [playRate]: playRate.reducer,\n    [currentSector]: currentSector.reducer,\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { setPendiente, clearPendientes } from './actions';\n\nexport default createReducer([], {\n  [setPendiente]: (state, action) => {\n    state.push(action.payload);\n  },\n  [clearPendientes]: () => [],\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { UNLOADED, LOADED, LOADING } from 'Store/constantes';\n\nimport sectorAdapter from './adapter';\nimport { loadSector, loadSectores } from './actions';\n\nexport default createReducer(\n  sectorAdapter.getInitialState({\n    loadStatusSectores: UNLOADED,\n    loadStatusEachSector: {},\n  }),\n  {\n    [loadSectores.pending]: (state) => {\n      if (state.loadStatusSectores === UNLOADED) {\n        state.loadStatusSectores = LOADING;\n        state.errorSectores = null;\n      }\n    },\n    [loadSectores.fulfilled]: (state, action) => {\n      if (state.loadStatusSectores === LOADING) {\n        sectorAdapter.setAll(state, action.payload);\n        state.loadStatusSectores = LOADED;\n      }\n    },\n    [loadSectores.rejected]: (state, action) => {\n      state.loadStatusSectores = UNLOADED;\n      state.errorSectores = action.error;\n    },\n    [loadSector.pending]: (state, action) => {\n      const idSector = action.meta.arg;\n      const loadStatus = state.loadStatusEachSector[idSector];\n      if (!loadStatus || loadStatus === UNLOADED) {\n        state.loadStatusEachSector[idSector] = LOADING;\n        state.errorSector = null;\n      }\n    },\n    [loadSector.fulfilled]: (state, action) => {\n      const idSector = action.meta.arg;\n      if (state.loadStatusEachSector[idSector] === LOADING) {\n        state.loadStatusEachSector[idSector] = LOADED;\n      }\n    },\n    [loadSector.rejected]: (state, action) => {\n      state.loadStatusEachSector[action.meta.arg] = UNLOADED;\n      state.errorSector = action.error;\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { updateSemaforo } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.semaforos || []);\n  },\n  [updateSemaforo]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { doAddTren, setTren, doDelTren } from './actions';\n\nexport default createReducer(\n  {},\n  {\n    [doAddTren]: (state, { payload }) => {\n      state[payload.idTren] = payload;\n    },\n    [setTren]: (state, { payload }) => {\n      state[payload.idTren] = {\n        ...state[payload.idTren],\n        ...payload,\n      };\n    },\n    [doDelTren]: (state, { payload: idTren }) => {\n      delete state[idTren];\n    },\n  }\n);\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selBloque, selBloqueOcupado } from './selectors';\nimport { setBloqueOcupado } from './actions';\n\nexport const useBloque = (idBloque) =>\n  useSelector((state) => selBloque(state, idBloque));\n\nexport const useBloqueOcupado = (idBloque) =>\n  useSelector((state) => selBloqueOcupado(state, idBloque));\n\nexport const useSetBloqueOcupado = () => {\n  const dispatch = useDispatch();\n  return (idBloque, idTren) => dispatch(setBloqueOcupado(idBloque, idTren));\n};\n","import { useSelector, useDispatch } from 'react-redux';\nimport { useCallback } from 'react';\nimport { setCambioManual, setPosicion, setRebota } from './actions';\nimport { selCelda, selCeldas, selCeldaIsManual } from './selectors';\n\nexport const useCelda = (idCelda) =>\n  useSelector((state) => selCelda(state, idCelda));\n\nexport const useCeldas = (idSector) =>\n  useSelector((state) => selCeldas(state, idSector));\n\nexport const useCeldaManual = (idCelda) => {\n  const celdaIsManual = useSelector((state) =>\n    selCeldaIsManual(state, idCelda)\n  );\n  const dispatch = useDispatch();\n  const toggleCeldaManual = useCallback(\n    () => dispatch(setCambioManual(idCelda, !celdaIsManual)),\n    [idCelda, dispatch, celdaIsManual]\n  );\n  return [celdaIsManual, toggleCeldaManual];\n};\n\nexport const useSetPosicion = (idCelda) => {\n  const dispatch = useDispatch();\n  return (posicion) => dispatch(setPosicion(idCelda, posicion));\n};\n\nexport const useToggleRebota = (idCelda) => {\n  const celda = useSelector((state) => selCelda(state, idCelda));\n  const dispatch = useDispatch();\n  return () => dispatch(setRebota(idCelda, !celda.rebota));\n};\n","import {\n  selEnclavamientos,\n  selEnclavamiento,\n  selCondicionesFaltantes,\n} from './selectors';\nimport { useSelector } from 'react-redux';\n\nexport const useSelEnclavamientos = () =>\n  useSelector((state) => selEnclavamientos(state));\n\nexport const useSelEnclavamiento = (idOrigen) =>\n  useSelector((state) => selEnclavamiento(state, idOrigen));\n\nexport const useCondicionesFaltantes = (idOrigen) =>\n  useSelector((state) => selCondicionesFaltantes(state, idOrigen));\n","import { runAutomatizaciones, runAutomatizacion } from './actions';\nimport { selAutomatizacion } from './selectors';\nimport { useDispatch, useSelector } from 'react-redux';\n\nexport const useRunAutomatizaciones = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizaciones(idOrigen));\n};\n\nexport const useRunAutomatizacion = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizacion(idOrigen));\n};\n\nexport const useSelAutomatizacion = (idOrigen) =>\n  useSelector((state) => selAutomatizacion(state, idOrigen));\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  showEstado as showEstadoAction,\n  hideEstado as hideEstadoAction,\n} from './actions';\n\nimport { selShowEstado } from './selectors';\nimport {\n  playRate,\n  currentSector,\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n} from './';\n\nexport const useEstado = () => {\n  const estado = useSelector(selShowEstado);\n  const dispatch = useDispatch();\n  const hideEstado = () => dispatch(hideEstadoAction());\n  const showEstado = (args) => dispatch(showEstadoAction(args));\n  return { estado, hideEstado, showEstado };\n};\n\nexport const usePlayRate = playRate.useState;\n\nexport const useCurrentSector = currentSector.useState;\n\nexport const useShowConfig = showConfig.useState;\nexport const useShowCoords = showCoords.useState;\nexport const useAutomatizacionesActive = automatizacionesActive.useState;\nexport const useShowTeletipo = showTeletipo.useState;\n","import { useSelector, useDispatch } from 'react-redux';\nimport {\n  selSector,\n  selSectorLoading,\n  selErrorSector,\n  selSectores,\n  selSectoresLoading,\n  selErrorSectores,\n} from './selectors';\nimport { loadSectores, loadSector } from './actions';\n\nexport const useSector = (idSector) => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector((state) => selSectorLoading(state, idSector)),\n    sector: useSelector((state) => selSector(state, idSector)),\n    error: useSelector(selErrorSector),\n    load: () => dispatch(loadSector(idSector)),\n  };\n};\n\nexport const useSectores = () => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector(selSectoresLoading),\n    sectores: useSelector(selSectores),\n    error: useSelector(selErrorSectores),\n    load: () => dispatch(loadSectores()),\n  };\n};\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selSemaforo, selSemaforos, selModoSemaforo } from './selectors';\nimport { setAspectoSenal, setModoSemaforo } from './actions';\n\nexport const useSemaforo = (idSemaforo) =>\n  useSelector((state) => selSemaforo(state, idSemaforo));\n\nexport const useSemaforos = (celda) =>\n  useSelector((state) => selSemaforos(state, celda));\n\nexport const useSetAspectoSenal = () => {\n  const dispatch = useDispatch();\n  return (idSemaforo, senal, aspecto) =>\n    dispatch(setAspectoSenal(idSemaforo, senal, aspecto));\n};\n\nexport const useModoSemaforo = (idCelda) => {\n  const modoSemaforo = useSelector((state) => selModoSemaforo(state, idCelda));\n  const dispatch = useDispatch();\n  return [\n    modoSemaforo,\n    useCallback((modo) => dispatch(setModoSemaforo(idCelda, modo)), [\n      idCelda,\n      dispatch,\n    ]),\n  ];\n};\n","import { configureStore } from '@reduxjs/toolkit';\r\n\r\nimport alertas from './alertas/reducer';\r\nimport bloques from './bloques/reducer';\r\nimport celdas from './celdas/reducer';\r\nimport automatizaciones from './automatizaciones/reducer';\r\nimport enclavamientos from './enclavamientos/reducer';\r\nimport options from './options/reducer';\r\nimport pendientes from './pendientes/reducer';\r\nimport sectores from './sectores/reducer';\r\nimport semaforos from './semaforos/reducer';\r\nimport trenes from './trenes/reducer';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    alertas,\r\n    bloques,\r\n    celdas,\r\n    automatizaciones,\r\n    enclavamientos,\r\n    options,\r\n    pendientes,\r\n    sectores,\r\n    semaforos,\r\n    trenes,\r\n  },\r\n});\r\n\r\nexport * from './alertas/hooks';\r\nexport * from './bloques/hooks';\r\nexport * from './celdas/hooks';\r\nexport * from './enclavamientos/hooks';\r\nexport * from './automatizaciones/hooks';\r\nexport * from './options/hooks';\r\nexport * from './sectores/hooks';\r\nexport * from './semaforos/hooks';\r\nexport * from './trenes/hooks';\r\n","import React from 'react';\nimport styles from './styles.module.css';\n\nexport function CambioNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 0 V 16 32\" className={styles.main} />\n    </svg>\n  );\n}\nexport function CambioDesviado() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 0 V 16 16\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleIzq() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 0 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleDer() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport { FaLock as Locked, FaLockOpen as Unlocked } from 'react-icons/fa';\nexport { GiPlainCircle as Circle } from 'react-icons/gi';\nexport { GoMarkGithub as GitHub } from 'react-icons/go';\nexport { MdTrain as Train } from 'react-icons/md';\nexport { GoPlay as Play } from 'react-icons/go';\nexport { GoTrashcan as Trash } from 'react-icons/go';\n","import React, { useState } from 'react';\n\nimport { Table, Button, Label, Input } from 'reactstrap';\nimport { useAvisos, useShowTeletipo, useCelda } from 'Store';\nimport { isPlainClick, nombreEntity } from 'Utils';\nimport { Trash } from 'Components/Icons';\nimport styles from './styles.module.css';\nimport { INFO } from 'Store/constantes';\n\nfunction Item({ nivel, fecha, idCelda, numero, msg, clearAviso }) {\n  const celda = useCelda(idCelda);\n  const clear = (ev) => isPlainClick(ev) && clearAviso(fecha);\n  return (\n    <tr className={styles[nivel]}>\n      <td>{new Date(fecha).toLocaleString()}</td>\n      <td>{nombreEntity(celda)}</td>\n      <td>{numero}</td>\n      <td colSpan={2}>{msg}</td>\n      <td>\n        <Trash onClick={clear} />\n      </td>\n    </tr>\n  );\n}\n\nexport default function Teletipo() {\n  const [mensajes, clearAvisos, clearAviso] = useAvisos();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [info, setInfo] = useState(false);\n\n  const clearAll = (ev) => isPlainClick(ev) && clearAvisos();\n  const close = (ev) => isPlainClick(ev) && setShowTeletipo(!showTeletipo);\n  const toggleInfo = (ev) => setInfo((i) => !i);\n\n  return mensajes.length ? (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>Fecha</th>\n          <th>Celda</th>\n          <th>Tren</th>\n          <th>Mensaje</th>\n          <th>\n            <Label>\n              <Input type=\"checkbox\" checked={info} onChange={toggleInfo} />\n              &nbsp;Ver Info\n            </Label>\n          </th>\n          <th className={styles.buttons}>\n            <Button\n              className={styles.close}\n              title=\"Borrar todas las notificaciones\"\n              onClick={clearAll}\n              size=\"sm\"\n            >\n              <Trash />\n            </Button>\n            <Button close onClick={close} title=\"Cerrar Teletipo\" size=\"sm\" />\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {mensajes\n          .filter((row) => (info ? true : row.nivel !== INFO))\n          .map((row) => (\n            <Item {...row} key={row.fecha} clearAviso={clearAviso} />\n          ))}\n      </tbody>\n    </Table>\n  ) : (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>No hay mensajes</th>\n        </tr>\n      </thead>\n    </Table>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  setAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n  clearAlarma,\n} from './actions';\nimport { selAlarma, selAvisos } from './selectors';\n\nexport const useSetAlarma = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAlarma(...props));\n};\n\nexport const useAlarma = () => {\n  const dispatch = useDispatch();\n  return [useSelector(selAlarma), () => dispatch(clearAlarma())];\n};\n\nexport const useAvisos = () => {\n  const dispatch = useDispatch();\n  return [\n    useSelector(selAvisos),\n    () => dispatch(clearAvisos()),\n    (fecha) => dispatch(clearAviso(fecha)),\n  ];\n};\n\nexport const useSetAviso = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAviso(...props));\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, nombreEntity, useLongPress } from 'Utils';\nimport { SEMAFORO, MANIOBRA, BLOQUEADO, AUTOMATICO } from 'Store/constantes';\nimport { useEstado, useSemaforo, useModoSemaforo } from 'Store';\nimport styles from './styles.module.css';\n\nconst estilosAspectos = ['', 'verde', 'amarillo', 'rojo'];\n\nexport default function Semaforo({ idSemaforo, placement }) {\n  const semaforo = useSemaforo(idSemaforo);\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const { idSector, x, y, centro, izq, der } = semaforo || {};\n  const { showEstado } = useEstado();\n  const longPressProps = useLongPress({\n    onClick: () => {\n      if (semaforo.soloManiobra) {\n        showEstado({\n          tipo: SEMAFORO,\n          idCelda: buildId({\n            idSector,\n            x,\n            y,\n          }),\n          idSemaforo: buildId(semaforo),\n          placement,\n        });\n      } else {\n        setModoSemaforo(modoSemaforo === AUTOMATICO ? BLOQUEADO : AUTOMATICO);\n      }\n    },\n    onLongPress: (ev) =>\n      showEstado({\n        tipo: SEMAFORO,\n        idCelda: buildId({\n          idSector,\n          x,\n          y,\n        }),\n        idSemaforo: buildId(semaforo),\n        placement,\n      }),\n  });\n  if (!semaforo) return null;\n\n  /*\n  Todos estos calculos son a ojo, lo cual hace bastante irrelevante las\n  constances como ANCHO_CELDA y demas porque deberan hacerse proporcional\n  y ajustarse segun se quiera\n  */\n  const r = 5;\n  const cy = 38;\n  const xTope = 95;\n  /* eslint-disable no-mixed-operators */\n  const x1 = xTope - 2 * r;\n  const x2 = x1 + 2 - 2 * r;\n  /* eslint-enable no-mixed-operators */\n\n  return (\n    <g\n      className={classNames(styles.semaforo, {\n        [styles.maniobra]: !semaforo.soloManiobra && modoSemaforo === MANIOBRA,\n        [styles.blink]: !semaforo.soloManiobra && modoSemaforo === BLOQUEADO,\n      })}\n      {...longPressProps}\n    >\n      <title>{nombreEntity(semaforo)}</title>\n      <line x1={xTope} y1={cy} x2={x2 + r} y2={cy} />\n      <line x1={xTope} y1={cy - r} x2={xTope} y2={cy + r} />\n      <circle\n        className={styles[estilosAspectos[centro]]}\n        cx={izq || der ? x2 : x1}\n        cy={cy}\n        r={r}\n      />\n      {izq && (\n        <circle\n          className={styles[estilosAspectos[izq]]}\n          cx={x1}\n          cy={cy + r}\n          r={r}\n        />\n      )}\n      {der && (\n        <circle\n          className={styles[estilosAspectos[der]]}\n          cx={x1}\n          cy={cy - r}\n          r={r}\n        />\n      )}\n    </g>\n  );\n}\n","export const ANCHO_CELDA = 100;\nexport const CENTRO_CELDA = ANCHO_CELDA / 2;\nexport const X = {\n  N: CENTRO_CELDA,\n  NE: ANCHO_CELDA,\n  E: ANCHO_CELDA,\n  SE: ANCHO_CELDA,\n  S: CENTRO_CELDA,\n  SW: 0,\n  W: 0,\n  NW: 0,\n};\nexport const Y = {\n  N: 0,\n  NE: 0,\n  E: CENTRO_CELDA,\n  SE: ANCHO_CELDA,\n  S: ANCHO_CELDA,\n  SW: ANCHO_CELDA,\n  W: CENTRO_CELDA,\n  NW: 0,\n};\nexport const ANG = {\n  N: 270,\n  NE: 315,\n  E: 0,\n  SE: 45,\n  S: 90,\n  SW: 135,\n  W: 180,\n  NW: 225,\n};\nexport const DIR = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n","import React from 'react';\n\nimport { CENTRO_CELDA, X, Y } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tramo({ dir, estilo = 'tramo-normal' }) {\n  return (\n    <line\n      x1={CENTRO_CELDA}\n      y1={CENTRO_CELDA}\n      x2={X[dir]}\n      y2={Y[dir]}\n      className={styles[estilo]}\n    />\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Linea({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={index}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n\nLinea.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cambio({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        key=\"punta\"\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      {celda.ramas.map((dir, idx) => (\n        <Tramo\n          key={dir}\n          dir={dir}\n          estilo={\n            celda.posicion === idx\n              ? ocupado\n                ? 'tramo-ocupado'\n                : 'tramo-normal'\n              : 'tramo-muerto'\n          }\n        />\n      ))}\n    </g>\n  );\n}\nCambio.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\nimport { CENTRO_CELDA, ANCHO_CELDA, ANG } from 'Components/common';\n\nimport styles from './styles.module.css';\nexport default function Paragolpe({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={ANCHO_CELDA / 10}\n        fill={ocupado ? 'yellow' : 'black'}\n      />\n      {celda.rebota && (\n        <line\n          x1={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y1={CENTRO_CELDA - ANCHO_CELDA / 10}\n          x2={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y2={CENTRO_CELDA + ANCHO_CELDA / 10}\n          className={styles.rebota}\n          transform={`rotate(${\n            ANG[celda.punta] + 180\n          }, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n        />\n      )}\n    </g>\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cruce({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.linea1.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n      {celda.linea2.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n","import React from 'react';\nimport Tramo from './Tramo';\nimport { useCelda } from 'Store';\nimport { buildId, nombreEntity } from 'Utils';\nimport { CENTRO_CELDA } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Empalme({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const otraCelda = useCelda(\n    buildId({\n      idSector: celda.idSector,\n      x: celda.otro.x,\n      y: celda.otro.y,\n    })\n  );\n  return (\n    <g>\n      <text\n        x={CENTRO_CELDA}\n        y={CENTRO_CELDA - 5}\n        textAnchor=\"middle\"\n        className={styles.empalme}\n      >\n        Contina en:\n      </text>\n      <text\n        x={CENTRO_CELDA}\n        y={CENTRO_CELDA + 15}\n        textAnchor=\"middle\"\n        className={styles.empalme}\n      >\n        {nombreEntity(otraCelda)}\n      </text>\n      <Tramo dir={celda.punta} estilo={'tramo-empalme'} />\n    </g>\n  );\n}\n","import React from 'react';\n\nimport { isPlainClick, holdPropagation } from 'Utils';\nimport { CENTRO_CELDA } from 'Components/common';\nimport { CAMBIO } from 'Store/constantes';\nimport { useAddTren, useBloqueOcupado } from 'Store';\n\nimport styles from './styles.module.css';\n\nfunction ActualDespachador({ celda, dir }) {\n  const addTren = useAddTren();\n  const bloqueOcupado = useBloqueOcupado(celda.idBloque);\n  const despacha = (ev) => {\n    if (isPlainClick(ev)) {\n      if (celda.idTren) return;\n      addTren(celda, dir);\n    }\n  };\n  return (\n    <>\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={9}\n        className={styles.trenDespachador}\n      />\n      {!bloqueOcupado && (\n        <g\n          className={styles.flechaDespachador}\n          onClick={despacha}\n          {...holdPropagation}\n        >\n          <path\n            d=\"M 11,-12 L 29,0 11,12 z\"\n            transform={`translate(${CENTRO_CELDA},${CENTRO_CELDA})`}\n          />\n        </g>\n      )}\n    </>\n  );\n}\n\nexport default function Despachador({ celda, dir }) {\n  return Array.isArray(celda.despachador) &&\n    celda.despachador.includes(dir) &&\n    !celda.idTren &&\n    (celda.tipo !== CAMBIO ||\n      celda.punta === dir ||\n      celda.ramas[celda.posicion] === dir) ? (\n    <ActualDespachador celda={celda} dir={dir} />\n  ) : null;\n}\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selTrenes, selTren } from './selectors';\nimport { addTren, moveTrenes, delTren, delTrenes } from './actions';\n\nexport const useSelTrenes = () => useSelector((state) => selTrenes(state));\n\nexport const useMoveTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(moveTrenes());\n};\nexport const useTren = (idTren) =>\n  useSelector((state) => selTren(state, idTren));\n\nexport const useAddTren = () => {\n  const dispatch = useDispatch();\n  return (celda, dir, maxSpeed = 1) => dispatch(addTren(celda, dir, maxSpeed));\n};\n\nexport const useDelTren = () => {\n  const dispatch = useDispatch();\n  return (tren) => dispatch(delTren(tren));\n};\n\nexport const useDelTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(delTrenes());\n};\n","import React from 'react';\nimport { Train } from 'Components/Icons';\nimport { useTren } from 'Store';\n\nimport { CENTRO_CELDA } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tren({ celda }) {\n  const tren = useTren(celda.idTren);\n  const relSpeed = tren.speed / (tren.maxSpeed || 1);\n\n  return (\n    <g transform={`translate(${CENTRO_CELDA - 8}, ${CENTRO_CELDA - 8})`}>\n      <circle cx={8} cy={8} r={9} className={styles.tren}>\n        <title>{`${tren.numero}\\nVelocidad: ${tren.speed}\\nFalta: ${tren.falta}`}</title>\n      </circle>\n      {relSpeed && relSpeed !== 1 ? (\n        <path d=\"M 8 0 A 8 8 90 1 0 8 16 z\" fill=\"orange\" />\n      ) : null}\n      <Train color={relSpeed ? 'black' : 'red'} size=\"16px\" />\n    </g>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  ListGroup,\n  ListGroupItem,\n} from 'reactstrap';\n\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nimport { BLOQUE, SEMAFORO } from 'Store/constantes';\nimport { useCondicionesFaltantes } from 'Store';\nimport styles from './styles.module.css';\n\nexport default function CondicionesFaltantes({ idCelda, setShowFaltantes }) {\n  const faltantes = useCondicionesFaltantes(idCelda);\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowFaltantes(false);\n    }\n  };\n\n  return faltantes.length ? (\n    <Popover isOpen={!!idCelda} target={idCelda}>\n      <PopoverHeader>\n        Condiciones Faltantes\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        <ListGroup>\n          {faltantes.map((falta, idx) => {\n            switch (falta.tipo) {\n              case BLOQUE:\n                return (\n                  <ListGroupItem\n                    key={idx}\n                  >{`Bloque ocupado ${falta.bloque}`}</ListGroupItem>\n                );\n              case SEMAFORO:\n                return (\n                  <ListGroupItem key={idx}>{`Semforo libre: ${nombreEntity(\n                    falta\n                  )}`}</ListGroupItem>\n                );\n              default:\n                break;\n            }\n            return '????';\n          })}\n        </ListGroup>\n      </PopoverBody>\n    </Popover>\n  ) : null;\n}\n","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, useLongPress } from 'Utils';\n\nimport {\n  useCelda,\n  useShowCoords,\n  useEstado,\n  useBloque,\n  useSetPosicion,\n  useToggleRebota,\n  useCondicionesFaltantes,\n} from 'Store';\nimport Semaforo from 'Components/Semaforo';\nimport { LINEA, CAMBIO, PARAGOLPE, CRUCE, EMPALME } from 'Store/constantes';\n\nimport { ANCHO_CELDA, CENTRO_CELDA, ANG } from 'Components/common';\nimport styles from './styles.module.css';\n\nimport Linea from './Linea';\nimport Cambio from './Cambio';\nimport Paragolpe from './Paragolpe';\nimport Cruce from './Cruce';\nimport Empalme from './Empalme';\nimport { Despachador, Tren } from 'Components/Trenes';\nimport CondicionesFaltantes from 'Components/Enclavamientos';\n\nexport function ActualCelda({\n  celda,\n  minX,\n  maxX,\n  minY,\n  maxY,\n  cellWidth,\n  padLeft,\n  padTop,\n}) {\n  const idCelda = celda.idCelda;\n  const setPosicion = useSetPosicion(idCelda);\n  const toggleRebota = useToggleRebota(idCelda);\n  const bloque = useBloque(celda.idBloque);\n  const [showCoords] = useShowCoords();\n  const { showEstado } = useEstado();\n  const condicionesFaltantes = useCondicionesFaltantes(idCelda);\n  const [showFaltantes, setShowFaltantes] = useState();\n  const longPressProps = useLongPress({\n    onClick: (ev) => {\n      switch (celda.tipo) {\n        case CAMBIO:\n          if (condicionesFaltantes.length) {\n            setShowFaltantes(true);\n          } else {\n            setPosicion((celda.posicion + 1) % celda.ramas.length);\n          }\n          break;\n        case PARAGOLPE:\n          toggleRebota();\n          break;\n        default:\n          break;\n      }\n    },\n    onLongPress: (ev) => {\n      showEstado({\n        tipo: celda.tipo,\n        idCelda,\n        placement,\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (showFaltantes && !condicionesFaltantes.length) {\n      setShowFaltantes(false);\n    }\n  }, [showFaltantes, condicionesFaltantes.length]);\n\n  if (!cellWidth || !celda) return null;\n  const placement = celda.x > (maxX - minX) / 2 ? 'left' : 'right';\n\n  const coords = showCoords ? `[${celda.x},${celda.y}]` : '';\n  const title = [];\n  if (celda.nombre) {\n    title.push(`Celda: ${celda.nombre}`);\n  }\n  title.push(`Coordenadas: [${celda.x},${celda.y}]`);\n\n  if (bloque) {\n    title.push(`Bloque: ${bloque.nombre}`);\n  }\n  if (celda.idTren) {\n    title.push(`Con tren ${celda.idTren}`);\n  }\n\n  let Renderer;\n  let dirs;\n\n  switch (celda.tipo) {\n    case LINEA:\n      dirs = celda.puntas;\n      Renderer = Linea;\n      break;\n    case CAMBIO:\n      dirs = celda.ramas.concat(celda.punta);\n      Renderer = Cambio;\n      break;\n    case PARAGOLPE:\n      dirs = [celda.punta];\n      Renderer = Paragolpe;\n      break;\n    case CRUCE:\n      dirs = celda.linea1.puntas.concat(celda.linea2.puntas);\n      Renderer = Cruce;\n      break;\n    case EMPALME:\n      Renderer = Empalme;\n      dirs = [];\n      break;\n    default:\n  }\n\n  console.log(celda.tipo, dirs);\n  return (\n    <>\n      <div\n        id={idCelda}\n        className={classNames(styles.rect, {\n          [styles.manual]: celda.manual,\n        })}\n        style={{\n          left: padLeft + celda.x * cellWidth,\n          top: celda.y * cellWidth + padTop,\n          width: cellWidth,\n          height: cellWidth,\n        }}\n        title={title.join('\\n')}\n        {...longPressProps}\n      >\n        <svg\n          viewBox={`0 0 ${ANCHO_CELDA} ${ANCHO_CELDA}`}\n          width={cellWidth}\n          height={cellWidth}\n          className={styles.svg}\n        >\n          <text x=\"0\" y=\"95\" className={styles.text}>\n            {coords}\n          </text>\n          {celda.nombre && (\n            <text textAnchor=\"end\" x={95} y={95} className={styles.text}>\n              {celda.nombre}\n            </text>\n          )}\n          <Renderer idCelda={idCelda} />\n          {dirs.map((dir) => (\n            <g\n              key={dir}\n              transform={`rotate(${ANG[dir]}, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n            >\n              <Semaforo\n                idSemaforo={buildId({\n                  ...celda,\n                  dir,\n                })}\n                placement={placement}\n              />\n              {!!celda.despachador && <Despachador celda={celda} dir={dir} />}\n            </g>\n          ))}\n          {celda.idTren ? <Tren celda={celda} /> : null}\n        </svg>\n      </div>\n      {showFaltantes && (\n        <CondicionesFaltantes\n          idCelda={idCelda}\n          setShowFaltantes={setShowFaltantes}\n        />\n      )}\n    </>\n  );\n}\n\nexport default function Celda({ idCelda, ...rest }) {\n  const celda = useCelda(idCelda);\n  if (celda) {\n    return <ActualCelda celda={celda} {...rest} />;\n  }\n  return null;\n}\n\nCelda.whyDidYouRender = false;\n","import React, { useEffect } from 'react';\nimport { useResize } from 'Utils';\n\nimport { useSector, useCeldas } from 'Store';\n\nimport Celda from 'Components/Celda';\nimport loadingIcon from 'Components/Icons/loading.gif';\nimport { LOADED } from 'Store/constantes';\n\nimport styles from './styles.module.css';\n\nfunction ActualSector({ sector }) {\n  const celdas = useCeldas(sector.idSector);\n  const size = useResize();\n  const { descrCorta, minX, maxX, minY, maxY } = sector;\n  const ancho = maxX - minX + 1;\n  const alto = maxY - minY + 1;\n  const cellWidth = Math.min(Math.ceil((size.width - 50) / ancho), 200);\n  const padLeft = (size.width - ancho * cellWidth) / 2;\n  const padTop = Math.max(0, -minY * cellWidth) + 60; // 60 to allow for space for menu\n\n  useEffect(() => {\n    document.title = `CTC - ${descrCorta}`;\n  });\n  const attrs = {\n    minX,\n    maxX,\n    minY,\n    maxY,\n    cellWidth,\n    padLeft,\n    padTop,\n  };\n  return (\n    <>\n      <div className={styles.sector}>\n        {celdas.map((c) => (\n          <Celda key={c.idCelda} idCelda={c.idCelda} {...attrs} />\n        ))}\n      </div>\n      <div style={{ height: (alto + 2) * cellWidth }}></div>\n    </>\n  );\n}\n\nexport default function Sector({ idSector }) {\n  const { sector, loading, error, load } = useSector(idSector);\n\n  useEffect(() => {\n    if (!error && loading !== LOADED) load();\n  }, [error, load, loading]);\n\n  if (error) {\n    return <pre>Error cargando 'sector': {JSON.stringify(error, null, 2)}</pre>;\n  }\n  if (loading !== LOADED) {\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualSector sector={sector} />;\n}\n","import React from 'react';\n\nimport { ButtonGroup, Button, PopoverBody } from 'reactstrap';\n\nimport {\n  CambioNormal,\n  CambioDesviado,\n  TripleIzq,\n  TripleNormal,\n  TripleDer,\n  Locked,\n  Unlocked,\n} from 'Components/Icons';\n\nimport { isPlainClick } from 'Utils';\nimport { useCeldaManual, useSetPosicion } from 'Store';\n\nimport { NORMAL, DESVIADO, ALTERNATIVA } from 'Store/constantes';\nimport styles from './styles.module.css';\n\nexport default function EstadoCambio({ celda }) {\n  const { posicion, idCelda } = celda;\n  const setPosicion = useSetPosicion(idCelda);\n  const [celdaIsManual, toggleCeldaManual] = useCeldaManual(idCelda);\n\n  const onSetCambioNormal = (ev) => isPlainClick(ev) && setPosicion(NORMAL);\n  const onSetCambioDesviado = (ev) => isPlainClick(ev) && setPosicion(DESVIADO);\n  const onSetCambioAlternativa = (ev) =>\n    isPlainClick(ev) && setPosicion(ALTERNATIVA);\n  const onSetManual = (ev) => isPlainClick(ev) && toggleCeldaManual();\n\n  return (\n    <PopoverBody>\n      <ButtonGroup className={styles.cambio}>\n        {celda.ramas.length === 2 ? (\n          <>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <CambioNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <CambioDesviado />\n            </Button>\n          </>\n        ) : (\n          <>\n            {' '}\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <TripleIzq />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <TripleNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioAlternativa}\n              color={posicion === ALTERNATIVA ? 'primary' : 'outline-secondary'}\n            >\n              <TripleDer />\n            </Button>\n          </>\n        )}\n      </ButtonGroup>\n      <Button\n        className={styles.manual}\n        size=\"sm\"\n        color={celdaIsManual ? 'danger' : 'outline-info'}\n        onClick={onSetManual}\n      >\n        {celdaIsManual ? <Unlocked /> : <Locked />}\n      </Button>\n    </PopoverBody>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Locked, Unlocked, Circle } from 'Components/Icons';\nimport { LIBRE, PRECAUCION, ALTO, MANIOBRA } from 'Store/constantes';\nimport { isPlainClick } from 'Utils';\n\nimport {\n  useSetAspectoSenal,\n  useModoSemaforo,\n  useRunAutomatizaciones,\n} from 'Store';\n\nimport {\n  ButtonGroup,\n  Button,\n  PopoverBody,\n  Container,\n  Row,\n  Col,\n} from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { AUTOMATICO } from '../../Store/constantes';\n\nexport function EstadoSenal({ senal, aspecto, onSetAspecto }) {\n  const onSetAlto = (ev) => isPlainClick(ev) && onSetAspecto(senal, ALTO);\n  const onSetPrecaucion = (ev) =>\n    isPlainClick(ev) && onSetAspecto(senal, PRECAUCION);\n  const onSetLibre = (ev) => isPlainClick(ev) && onSetAspecto(senal, LIBRE);\n\n  return (\n    <>\n      <ButtonGroup vertical>\n        <Button\n          size=\"sm\"\n          color={aspecto === ALTO ? 'danger' : 'outline-danger'}\n          onClick={onSetAlto}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === PRECAUCION ? 'warning' : 'outline-warning'}\n          onClick={onSetPrecaucion}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === LIBRE ? 'success' : 'outline-success'}\n          onClick={onSetLibre}\n        >\n          <Circle />\n        </Button>\n      </ButtonGroup>\n    </>\n  );\n}\n\nexport default function EstadoSemaforo({ semaforo }) {\n  const { izq, soloManiobra, centro, der, idSemaforo } = semaforo;\n  const setAspectoSenal = useSetAspectoSenal();\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onSetAspecto = (senal, aspecto) => {\n    if (modoSemaforo === MANIOBRA || soloManiobra) {\n      setAspectoSenal(idSemaforo, senal, aspecto);\n    }\n    if (soloManiobra) {\n      runAutomatizaciones(idSemaforo);\n    }\n  };\n\n  const onSetManual = () => {\n    setModoSemaforo(modoSemaforo === AUTOMATICO ? MANIOBRA : AUTOMATICO);\n  };\n\n  return (\n    <PopoverBody>\n      <Container>\n        <div\n          className={classNames({\n            [styles.disabled]: !soloManiobra && !modoSemaforo,\n          })}\n        >\n          <Row>\n            <Col>\n              <div\n                className={classNames(styles.pushDown, {\n                  [styles.hidden]: !izq,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"izq\"\n                  aspecto={izq}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames({\n                  [styles.hidden]: !centro,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"centro\"\n                  aspecto={centro}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames(styles.semaforo, styles.pushDown, {\n                  [styles.hidden]: !der,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"der\"\n                  aspecto={der}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n          </Row>\n        </div>\n        {!soloManiobra && (\n          <Row>\n            <Button\n              className={styles.manual}\n              size=\"sm\"\n              color={modoSemaforo ? 'danger' : 'outline-info'}\n              onClick={onSetManual}\n            >\n              {modoSemaforo ? <Unlocked /> : <Locked />}\n            </Button>\n          </Row>\n        )}\n      </Container>\n    </PopoverBody>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport classnames from 'classnames';\n\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  TabContent,\n  TabPane,\n  Nav,\n  NavItem,\n  NavLink,\n} from 'reactstrap';\n\nimport {\n  useCelda,\n  useSemaforo,\n  useShowConfig,\n  useEstado,\n  useSelAutomatizacion,\n} from 'Store';\n\nimport { CAMBIO } from 'Store/constantes';\n\nimport EstadoCambio from './Cambio';\nimport EstadoSemaforo from './Semaforo';\n\nimport styles from './styles.module.css';\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nconst TAB_SEMAFORO = 'Semaforo';\nconst TAB_CELDA = 'Celda';\nconst TAB_AUTOM = 'Autom.';\nconst TAB_COMANDO = 'Cmd.';\n\nexport default function Estado() {\n  const {\n    estado: { show, ...more },\n  } = useEstado();\n  // Had to break it in two because selectors don't work with invalid ids\n  // so, if no show, no Popover.\n  // I can't call useSelector conditionally so I render the component conditionally\n  return show && <EstadoPopover {...more} />;\n}\n\nfunction EstadoPopover({ idCelda, idSemaforo, placement }) {\n  const [oldId, setOldId] = useState();\n  const celda = useCelda(idCelda);\n  const semaforo = useSemaforo(idSemaforo);\n  const [showConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const automatizacion = useSelAutomatizacion(idSemaforo || idCelda);\n\n  const [activeTab, setActiveTab] = useState();\n\n  const activeElement = semaforo || celda.tipo === CAMBIO;\n\n  useEffect(() => {\n    if (oldId !== idCelda) {\n      setActiveTab(\n        activeElement ? TAB_COMANDO : idSemaforo ? TAB_SEMAFORO : TAB_CELDA\n      );\n      setOldId(idCelda);\n    }\n  }, [oldId, idCelda, activeElement, idSemaforo]);\n\n  const toggle = (tab) => {\n    if (activeTab !== tab) setActiveTab(tab);\n  };\n\n  const onClose = (ev) => isPlainClick(ev) && hideEstado();\n\n  const Command = () => (\n    <>\n      {semaforo && <EstadoSemaforo semaforo={semaforo} />}\n      {!semaforo && celda.tipo === CAMBIO && <EstadoCambio celda={celda} />}\n    </>\n  );\n  // See: https://github.com/reactstrap/reactstrap/issues/1404#issuecomment-602011689\n  // I am using a patched Popover.\n  return (\n    <Popover\n      isOpen={!!(showConfig || activeElement)}\n      target={idCelda}\n      placement={placement}\n    >\n      <PopoverHeader>\n        {semaforo\n          ? `Semforo ${nombreEntity(semaforo)}`\n          : `Celda ${nombreEntity(celda)}`}\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        {showConfig ? (\n          <>\n            <Nav pills className={styles.solapas}>\n              {activeElement && (\n                <NavItem title=\"Mostrar Comandos\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_COMANDO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_COMANDO);\n                    }}\n                  >\n                    {TAB_COMANDO}\n                  </NavLink>\n                </NavItem>\n              )}\n              {semaforo && (\n                <NavItem title=\"Mostrar COnfiguracin Semaforo\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_SEMAFORO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_SEMAFORO);\n                    }}\n                  >\n                    {TAB_SEMAFORO}\n                  </NavLink>\n                </NavItem>\n              )}\n              <NavItem title=\"Mostrar Configuracin Celda\">\n                <NavLink\n                  className={classnames(styles.solapa, {\n                    active: activeTab === TAB_CELDA,\n                  })}\n                  onClick={() => {\n                    toggle(TAB_CELDA);\n                  }}\n                >\n                  {TAB_CELDA}\n                </NavLink>\n              </NavItem>\n              {automatizacion && (\n                <NavItem title=\"Mostrar Configuracin Automatizacin\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_AUTOM,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_AUTOM);\n                    }}\n                  >\n                    {TAB_AUTOM}\n                  </NavLink>\n                </NavItem>\n              )}{' '}\n            </Nav>\n            <TabContent activeTab={activeTab}>\n              {activeElement && (\n                <TabPane tabId={TAB_COMANDO}>\n                  <Command />\n                </TabPane>\n              )}\n              {semaforo && (\n                <TabPane tabId={TAB_SEMAFORO}>\n                  <pre>{JSON.stringify(semaforo, null, 2)}</pre>\n                </TabPane>\n              )}\n              <TabPane tabId={TAB_CELDA}>\n                <pre>{JSON.stringify(celda, null, 2)}</pre>\n              </TabPane>\n              {automatizacion && (\n                <TabPane tabId={TAB_AUTOM}>\n                  <pre>{JSON.stringify(automatizacion, null, 2)}</pre>\n                </TabPane>\n              )}\n            </TabContent>\n          </>\n        ) : (\n          <Command />\n        )}\n      </PopoverBody>\n    </Popover>\n  );\n}\n","import React from 'react';\nimport { useAlarma, useDelTrenes, useRunAutomatizaciones } from 'Store';\nimport { Button, Popover, PopoverHeader, PopoverBody } from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { isPlainClick } from 'Utils';\n\nexport default function Alarma() {\n  const [{ idCelda, numero, msg, fecha }, clearAlarma] = useAlarma();\n  const delTrenes = useDelTrenes();\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      clearAlarma();\n      delTrenes();\n      runAutomatizaciones();\n    }\n  };\n\n  return (\n    !!idCelda && (\n      <Popover isOpen={!!idCelda} target={idCelda}>\n        <PopoverHeader className={styles.alarma}>\n          Tren {numero}\n          <Button close className={styles.close} onClick={onClose} />\n        </PopoverHeader>\n        <PopoverBody>\n          <p>{new Date(fecha).toLocaleString()}</p>\n          {msg}\n        </PopoverBody>\n      </Popover>\n    )\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Sector from 'Components/Sector';\nimport Estado from 'Components/Estado';\nimport Alarma from 'Components/Alarma';\nimport { useCurrentSector } from 'Store';\n\nexport default function Mimico() {\n  const { idSector } = useParams();\n  const [currentIdSector, setCurrentIdSector] = useCurrentSector();\n\n  useEffect(() => {\n    if (idSector !== currentIdSector) {\n      setCurrentIdSector(idSector);\n    }\n  }, [idSector, currentIdSector, setCurrentIdSector]);\n\n  return currentIdSector ? (\n    <>\n      <Estado />\n      <Sector idSector={currentIdSector} />\n      <Alarma />\n    </>\n  ) : null;\n}\n","import React, { useEffect, useState } from 'react';\nimport { useMoveTrenes, usePlayRate } from 'Store';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport styles from './styles.module.css';\n\nexport default function Animador() {\n  const moveTrenes = useMoveTrenes();\n  const [playRate, setPlayRate] = usePlayRate();\n\n  const [timer, setTimer] = useState();\n\n  useEffect(() => {\n    if (playRate && !timer) {\n      setTimer(setInterval(moveTrenes, 1000 / playRate));\n    }\n\n    return () => {\n      if (timer) {\n        clearInterval(timer);\n        setTimer(0);\n      }\n    };\n  }, [moveTrenes, timer, playRate]);\n\n  return (\n    <ButtonGroup\n      title={'Velocidad de la animacin\\n(ciclos por segundo)'}\n      className={styles.rate}\n    >\n      <Button\n        outline={playRate !== 0}\n        color={playRate ? 'secondary' : 'danger'}\n        onClick={() => setPlayRate(0)}\n      >\n        0\n      </Button>\n      <Button outline={playRate !== 0.5} onClick={() => setPlayRate(0.5)}>\n        \n      </Button>\n      <Button outline={playRate !== 1} onClick={() => setPlayRate(1)}>\n        1\n      </Button>\n      <Button outline={playRate !== 2} onClick={() => setPlayRate(2)}>\n        2\n      </Button>\n      <Button outline={playRate !== 5} onClick={() => setPlayRate(5)}>\n        5\n      </Button>\n    </ButtonGroup>\n  );\n}\n","import React, { useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { isPlainClick } from 'Utils';\nimport {\n  useSectores,\n  useSector,\n  useShowTeletipo,\n  useAutomatizacionesActive,\n  useShowCoords,\n  useShowConfig,\n  useEstado,\n} from 'Store';\n\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap';\n\nimport { LOADED } from 'Store/constantes';\nimport Animador from 'Components/Animador';\nimport { GitHub } from 'Components/Icons';\n\nimport loadingIcon from 'Components/Icons/loading.gif';\n\nfunction ActualMenu({ sectores }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const match = useRouteMatch('/sector/:idSector');\n  const idSector = match && match.params.idSector;\n  const { sector } = useSector(idSector);\n  const [\n    automatizacionesActive,\n    setAutomatizaciones,\n  ] = useAutomatizacionesActive();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [showCoords, setShowCoords] = useShowCoords();\n  const [showConfig, setShowConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const [oldIdSector, setOldIdSector] = useState();\n\n  const onClickSector = (ev) => {\n    if (idSector !== oldIdSector) {\n      hideEstado();\n      setOldIdSector(idSector);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowAutomatizaciones = (ev) => {\n    if (isPlainClick(ev)) {\n      setAutomatizaciones(!automatizacionesActive);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowTeletipo = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowTeletipo(!showTeletipo);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowCoords = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowCoords(!showCoords);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowConfig = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowConfig(!showConfig);\n      setIsOpen(false);\n    }\n  };\n  const toggleOpen = () => setIsOpen(!isOpen);\n\n  return (\n    <Navbar color=\"light\" light expand=\"md\" fixed=\"top\">\n      <NavbarBrand\n        color=\"default\"\n        href={\n          process.env.NODE_ENV === 'production' ? process.env.PUBLIC_URL : '/'\n        }\n        title=\"Volver al inicio\"\n      >\n        CTC\n      </NavbarBrand>\n      <Animador />\n\n      <NavbarToggler onClick={toggleOpen} />\n      <Collapse isOpen={isOpen} navbar>\n        <Nav className=\"mr-auto\" navbar>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle\n              nav\n              caret\n              title={sector ? sector.descr : 'Seleccione sector a visualizar'}\n            >\n              {sector ? sector.descrCorta : 'Sectores'}\n            </DropdownToggle>\n            <DropdownMenu>\n              {sectores.map((sect) => (\n                <DropdownItem\n                  tag={Link}\n                  to={`/sector/${sect.idSector}`}\n                  key={sect.idSector}\n                  title={sect.descr}\n                  active={idSector === sect.idSector}\n                  onClick={onClickSector}\n                >\n                  {sect.descrCorta}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle nav caret title=\"Opciones de visualizacin\">\n              Opciones\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={onClickShowTeletipo} active={showTeletipo}>\n                Teletipo\n              </DropdownItem>\n              <DropdownItem\n                onClick={onClickShowAutomatizaciones}\n                active={automatizacionesActive}\n              >\n                Automatizaciones\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowCoords} active={showCoords}>\n                Coordenadas\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowConfig} active={showConfig}>\n                Mostrar Config.\n              </DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </Nav>\n        <Nav navbar>\n          <NavItem>\n            <NavLink\n              href=\"https://github.com/Satyam/reactc2\"\n              title=\"Ver cdigo fuente en GitHub\"\n              target=\"_blank\"\n            >\n              <GitHub /> Github\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n}\n\nexport default function Menu() {\n  const { sectores, loading, error, load } = useSectores();\n  if (error) {\n    return (\n      <pre>Error cargando 'sectores': {JSON.stringify(error, null, 2)}</pre>\n    );\n  }\n  if (loading !== LOADED) {\n    load();\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualMenu sectores={sectores} />;\n}\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Teletipo from 'Components/Teletipo';\nimport Mimico from 'Components/Mimico';\nimport Menu from 'Components/Menu';\n\nimport { useShowTeletipo } from 'Store';\n\n// import styles from './styles.module.css';\n\nexport default function App({ username = '', sector, photoURL }) {\n  const [showTeletipo] = useShowTeletipo();\n\n  return (\n    <Router\n      basename={\n        process.env.NODE_ENV === 'production'\n          ? process.env.PUBLIC_URL\n          : undefined\n      }\n    >\n      <Menu />\n      <Route path=\"/sector/:idSector\">\n        <Mimico idSector=\"constitucion\" />\n      </Route>\n      {showTeletipo && <Teletipo />}\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'Components/App';\r\nimport store from 'Store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n// if (process.env.NODE_ENV === 'development') {\r\n//   const whyDidYouRender = require('@welldone-software/why-did-you-render');\r\n//   whyDidYouRender(React, {\r\n//     trackAllPureComponents: true,\r\n//     trackExtraHooks: [[require('react-redux'), 'useSelector']],\r\n//   });\r\n// }\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}