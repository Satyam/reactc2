{"version":3,"sources":["Store/constantes.js","Utils/index.js","Utils/createSetOptionAdapter.js","Store/options/index.js","Store/actions.js","Store/pendientes/selectors.js","Store/sectores/actions.js","Components/Estado/styles.module.css","Components/Icons/styles.module.css","Store/semaforos/selectors.js","Store/sectores/selectors.js","Store/trenes/actions.js","Components/Celda/styles.module.css","Store/options/actions.js","Store/alertas/actions.js","Store/bloques/selectors.js","Store/semaforos/actions.js","Store/celdas/selectors.js","Components/Semaforo/styles.module.css","Store/bloques/actions.js","Store/celdas/actions.js","Store/enclavamientos/selectors.js","Store/bloques/adapter.js","Store/celdas/adapter.js","Store/semaforos/adapter.js","Components/Teletipo/styles.module.css","Store/alertas/selectors.js","Store/trenes/selectors.js","Store/automatizaciones/actions.js","Store/pendientes/actions.js","Store/automatizaciones/adapter.js","Store/empalmes/adapter.js","Store/enclavamientos/adapter.js","Store/sectores/adapter.js","Components/Trenes/styles.module.css","Store/automatizaciones/selectors.js","Store/empalmes/selectors.js","Store/options/selectors.js","Components/Icons/loading.gif","Components/Alarma/styles.module.css","Components/Enclavamientos/styles.module.css","Components/Empalme/styles.module.css","Components/Sector/styles.module.css","Components/Animador/styles.module.css","Store/data/_salida lazy /^/.//.*$/ groupOptions: {} namespace object","Store/alertas/reducer.js","Store/bloques/reducer.js","Store/celdas/reducer.js","Store/automatizaciones/reducer.js","Store/empalmes/reducer.js","Store/enclavamientos/reducer.js","Store/options/reducer.js","Store/pendientes/reducer.js","Store/sectores/reducer.js","Store/semaforos/reducer.js","Store/trenes/reducer.js","Store/bloques/hooks.js","Store/celdas/hooks.js","Store/enclavamientos/hooks.js","Store/automatizaciones/hooks.js","Store/options/hooks.js","Store/sectores/hooks.js","Store/semaforos/hooks.js","Store/index.js","Components/Icons/index.jsx","Components/Teletipo/index.jsx","Store/alertas/hooks.js","Components/Semaforo/index.jsx","Components/common.js","Components/Celda/Tramo.jsx","Components/Celda/Linea.jsx","Components/Celda/Cambio.jsx","Components/Celda/Paragolpe.jsx","Components/Celda/Cruce.jsx","Components/Trenes/Despachador.jsx","Store/trenes/hooks.js","Components/Trenes/Tren.jsx","Components/Enclavamientos/index.jsx","Components/Empalme/index.js","Store/empalmes/hooks.js","Components/Celda/index.jsx","Components/Sector/index.jsx","Components/Estado/Cambio.jsx","Components/Estado/Semaforo.jsx","Components/Estado/index.jsx","Components/Alarma/index.jsx","Components/Mimico/index.jsx","Components/Animador/index.jsx","Components/Menu/index.jsx","Components/App/index.jsx","serviceWorker.js","index.js"],"names":["LINEA","CAMBIO","CRUCE","PARAGOLPE","SEMAFORO","LIBRE","PRECAUCION","ALTO","AUTOMATICO","MANIOBRA","BLOQUEADO","NORMAL","DESVIADO","ALTERNATIVA","IZQ","CENTRO","DER","N","NE","E","SE","S","SW","W","NW","BLOQUE","FIJO","INFO","WARNING","DANGER","UNLOADED","LOADING","LOADED","useLongPress","onClick","onLongPress","ms","timerRef","useRef","eventRef","callback","useCallback","current","start","ev","isPlainClick","persist","setTimeout","stop","clearTimeout","useMemo","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","stopProp","stopPropagation","holdPropagation","button","shiftKey","altKey","metaKey","ctrlKey","preventDefault","buildId","idSector","x","y","dir","join","replace","buildIdBloque","bloque","useResize","useState","width","window","innerWidth","height","innerHeight","size","setSize","useEffect","handleResize","addEventListener","removeEventListener","nombreEntity","entity","nombre","createSetOptionAdapter","name","defaultValue","options","sliceName","selector","state","action","createAction","reducer","payload","dispatch","useDispatch","useSelector","value","default","toString","playRate","currentSector","showConfig","showCoords","automatizacionesActive","showTeletipo","selPendiente","id","pendientes","includes","loadSectores","createAsyncThunk","then","data","condition","_","getState","selSectoresLoading","loadSector","selSectorLoading","module","exports","selectors","adapter","getSelectors","semaforos","selSemaforo","selectById","selModoSemaforo","createSelector","semaforo","modo","selSemaforos","selectAll","celda","ss","filter","length","sectorAdapter","sectores","selSector","loadStatusEachSector","selErrorSector","errorSector","selSectores","loadStatusSectores","selErrorSectores","errorSectores","doAddTren","maxSpeed","idTren","numero","idCelda","speed","addTren","setAviso","addTrenToCelda","runAutomatizaciones","doDelTren","delTren","tren","selCelda","removeTrenFromCelda","delTrenes","selTrenes","forEach","setTren","moveTren","selTren","oldCelda","falta","empalme","selEmpalme","nextCoords","newX","newY","newDir","nextSpeed","newIdCelda","newIdSemaforo","newCelda","newSemaforo","newPermiso","reduce","permiso","senal","Math","min","Error","newTren","setAlarma","trenEnBloque","selBloqueOcupado","idBloque","nextDir","other","puntas","tipo","punta","ramas","posicion","rebota","linea1","linea2","solveNewDir","longitud","moveTrenes","Promise","all","map","showEstado","hideEstado","doSetAlarma","msg","fecha","Date","now","clearAlarma","nivel","clearAvisos","clearAviso","bloques","selBloque","updateSemaforo","doSetAspectoSenal","idSemaforo","aspecto","setAspectoSenal","clearPendientes","setModoSemaforo","s","celdas","selCeldas","e","selCeldaIsManual","manual","setBloqueOcupado","vecino","updateCelda","doSetPosicion","rawSetPosicion","setPendiente","setPosicion","doSetCambioManual","setCambioManual","doRemoveTrenFromCelda","doAddTrenToCelda","setRebota","enclavamientos","selEnclavamientos","selEnclavamiento","selCondicionesFaltantes","encl","deps","salida","dep","concat","createEntityAdapter","selectId","selAlarma","alertas","alarma","selAvisos","avisos","Object","values","trenes","automate","idTarget","autom","celdaTarget","p1","idSource","celdaSource","alt","alts","find","cuando","posicionEsperada","r1","resolve","automatizacionesCambio","semaforoTarget","aspectoEsperado","izq","centro","der","keys","max","semaforoSource","estadoSource","senales","senalAfectada","p2","r2","automatizacionesSemaforo","bloqueTarget","p3","bloqueSource","automatizacionesBloque","runAutomatizacion","a","selAutomatizacion","idOrigen","browseAutomatizaciones","selAutomatizaciones","p","r","countDown","automatizacion","idAutom","sortComparer","b","idPunta","enclavamiento","idEncl","sector","sa","sb","descrA","descrCorta","toUpperCase","descrB","automatizaciones","empalmes","selShowEstado","webpackAsyncContext","req","__webpack_require__","o","code","ids","createReducer","unshift","idx","findIndex","av","splice","getInitialState","fulfilled","addMany","upsertOne","show","push","pending","setAll","rejected","error","meta","arg","loadStatus","useBloqueOcupado","useCelda","useSetPosicion","useCondicionesFaltantes","useRunAutomatizaciones","useEstado","estado","hideEstadoAction","args","showEstadoAction","usePlayRate","useCurrentSector","useShowConfig","useShowCoords","useAutomatizacionesActive","useShowTeletipo","useSector","loading","load","useSemaforo","useModoSemaforo","modoSemaforo","configureStore","CambioNormal","viewBox","className","styles","svg","d","main","CambioDesviado","TripleIzq","TripleNormal","TripleDer","Item","toLocaleString","colSpan","Teletipo","useAvisos","mensajes","setShowTeletipo","info","setInfo","Table","fixed","Label","Input","type","checked","onChange","i","buttons","Button","close","title","row","key","estilosAspectos","Semaforo","placement","longPressProps","soloManiobra","classNames","maniobra","blink","x1","y1","x2","y2","cy","cx","xTope","X","ANCHO_CELDA","Y","ANG","DIR","Tramo","estilo","Linea","ocupado","index","Cambio","Paragolpe","fill","CENTRO_CELDA","transform","Cruce","whyDidYouRender","ActualDespachador","useAddTren","bloqueOcupado","trenDespachador","flechaDespachador","Despachador","Array","isArray","despachador","Tren","relSpeed","color","CondicionesFaltantes","setShowFaltantes","faltantes","Popover","isOpen","target","PopoverHeader","PopoverBody","ListGroup","ListGroupItem","ActualEmpalme","otraCelda","flecha","Empalme","useEmpalme","ActualCelda","cellsAcross","cellWidth","padLeft","padTop","toggleRebota","useToggleRebota","condicionesFaltantes","showFaltantes","coords","Renderer","linea","cambio","paragolpe","cruce","rect","style","left","top","text","textAnchor","Celda","rest","ActualSector","ancho","alto","floor","document","c","Sector","JSON","stringify","src","loadingIcon","EstadoCambio","celdaIsManual","toggleCeldaManual","useCeldaManual","onSetCambioNormal","onSetCambioDesviado","ButtonGroup","EstadoSenal","onSetAspecto","vertical","EstadoSemaforo","useSetAspectoSenal","Container","disabled","Row","Col","pushDown","hidden","Estado","more","EstadoPopover","oldId","setOldId","activeTab","setActiveTab","activeElement","toggle","tab","Command","Nav","pills","solapas","NavItem","NavLink","classnames","solapa","active","TabContent","TabPane","tabId","Alarma","useAlarma","useDelTrenes","Mimico","useParams","currentIdSector","setCurrentIdSector","Animador","useMoveTrenes","setPlayRate","timer","setTimer","setInterval","clearInterval","rate","outline","ActualMenu","setIsOpen","match","useRouteMatch","params","setAutomatizaciones","setShowCoords","setShowConfig","oldIdSector","setOldIdSector","onClickSector","Navbar","light","expand","NavbarBrand","href","process","NavbarToggler","Collapse","navbar","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","descr","DropdownMenu","sect","DropdownItem","tag","Link","to","Menu","useSectores","App","username","photoURL","basename","path","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","store","getElementById","URL","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.4acbde7f.chunk.js","sourcesContent":["// Tipos de celda\nexport const LINEA = 'linea';\nexport const CAMBIO = 'cambio';\nexport const CRUCE = 'cruce';\nexport const PARAGOLPE = 'paragolpe';\nexport const SEMAFORO = 'semaforo';\n// Aspectos señales:\nexport const LIBRE = 1;\nexport const PRECAUCION = 2;\nexport const ALTO = 3;\n// Modos Semaforos\nexport const AUTOMATICO = 0;\nexport const MANIOBRA = 1;\nexport const BLOQUEADO = 2;\n// Cambio:\nexport const NORMAL = 0;\nexport const DESVIADO = 1;\nexport const ALTERNATIVA = 2;\n// Señales\nexport const IZQ = 'izq';\nexport const CENTRO = 'centro';\nexport const DER = 'der';\n// Direcciones:\nexport const N = 'N';\nexport const NE = 'NE';\nexport const E = 'E';\nexport const SE = 'SE';\nexport const S = 'S';\nexport const SW = 'SW';\nexport const W = 'W';\nexport const NW = 'NW';\n// para tipo de automatización\n// se reutilizan CAMBIO y SEMAFORO de antes\nexport const BLOQUE = 'bloque';\nexport const FIJO = 'fijo';\n// Tipos de avisos\nexport const INFO = 'info';\nexport const WARNING = 'warning';\nexport const DANGER = 'danger';\n// Estados de carga de datos\nexport const UNLOADED = 'unloaded';\nexport const LOADING = 'loading';\nexport const LOADED = 'loaded';\n","import { useState, useEffect, useCallback, useRef, useMemo } from 'react';\n\n/* Usage:\n\nhttps://stackoverflow.com/questions/48048957/react-long-press-eventRef\n\nfunction MyComponent (props) {\n  const longPressProps = useLongPress({\n    onClick: () => void console.log('on click'),\n    onLongPress: () => void console.log('long press'),\n  });\n\n\n  return (\n      <button {...longPressProps} >\n        click me\n      </button>  );\n};\n*/\n\nexport function useLongPress({ onClick, onLongPress, ms = 300 } = {}) {\n  const timerRef = useRef(false);\n  const eventRef = useRef({});\n\n  const callback = useCallback(() => {\n    if (typeof onLongPress === 'function') {\n      onLongPress(eventRef.current);\n    }\n    eventRef.current = {};\n    timerRef.current = false;\n  }, [onLongPress]);\n\n  const start = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        timerRef.current = setTimeout(callback, ms);\n      }\n    },\n    [callback, ms]\n  );\n\n  const stop = useCallback(\n    (ev) => {\n      if (isPlainClick(ev)) {\n        ev.persist();\n        eventRef.current = ev;\n        if (timerRef.current) {\n          clearTimeout(timerRef.current);\n          if (typeof onClick === 'function') {\n            onClick(ev);\n          }\n          timerRef.current = false;\n          eventRef.current = {};\n        }\n      }\n    },\n    [onClick]\n  );\n\n  return useMemo(\n    () => ({\n      onMouseDown: start,\n      onMouseUp: stop,\n      onMouseLeave: stop,\n      onTouchStart: start,\n      onTouchEnd: stop,\n    }),\n    [start, stop]\n  );\n}\n\nconst stopProp = (ev) => ev.stopPropagation();\n\nexport const holdPropagation = {\n  onMouseDown: stopProp,\n  onMouseUp: stopProp,\n  onMouseLeave: stopProp,\n  onTouchStart: stopProp,\n  onTouchEnd: stopProp,\n};\n\nexport const isPlainClick = (ev) => {\n  if (ev.button || ev.shiftKey || ev.altKey || ev.metaKey || ev.ctrlKey)\n    return false;\n  ev.stopPropagation();\n  ev.preventDefault();\n  return true;\n};\n\n// Ids should be valid DOM id attributes.\n// Ids starting with a digit are prefixed with an underscore\nexport const buildId = ({ idSector, x, y, dir }) =>\n  (dir ? [idSector, x, y, dir].join('_') : [idSector, x, y].join('_'))\n    .replace(/\\W/g, '_')\n    .replace(/(^\\d)/, '_$1');\n\nexport const buildIdBloque = (idSector, bloque) =>\n  `${idSector}__${bloque}`.replace(/\\W/g, '_').replace(/(^\\d)/, '_$1');\n\nexport function useResize() {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () =>\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return size;\n}\n\nexport function nombreEntity(entity) {\n  return (\n    entity.nombre ||\n    `[${entity.x},${entity.y}]` + (entity.dir ? `-${entity.dir}` : '')\n  );\n}\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createAction } from '@reduxjs/toolkit';\n\nexport default function createSetOptionAdapter(\n  name,\n  defaultValue,\n  options = {}\n) {\n  const { sliceName = 'options' } = options;\n\n  const selector = (state) => state[sliceName][name];\n  const action = createAction(name);\n  const reducer = (state, action) => {\n    state[name] = action.payload;\n  };\n  const useState = () => {\n    const dispatch = useDispatch();\n    return [\n      useSelector(selector),\n      useCallback((value) => dispatch(action(value)), [dispatch]),\n    ];\n  };\n\n  return {\n    selector,\n    action,\n    reducer,\n    useState,\n    default: defaultValue,\n    toString: () => name,\n  };\n}\n","import createSetOptionAdapter from 'Utils/createSetOptionAdapter';\n\nexport const playRate = createSetOptionAdapter('playRate', 1);\nexport const currentSector = createSetOptionAdapter('currIdSector');\nexport const showConfig = createSetOptionAdapter('showConfig', false);\nexport const showCoords = createSetOptionAdapter('showCoords', true);\nexport const automatizacionesActive = createSetOptionAdapter(\n  'automatizacionesActive',\n  true\n);\nexport const showTeletipo = createSetOptionAdapter('showTeletipo', true);\n","export * from './alertas/actions';\nexport * from './bloques/actions';\nexport * from './celdas/actions';\nexport * from './automatizaciones/actions';\nexport * from './enclavamientos/actions';\nexport * from './options/actions';\nexport * from './pendientes/actions';\nexport * from './sectores/actions';\nexport * from './semaforos/actions';\nexport * from './trenes/actions';\n","export const selPendiente = (state, id) => state.pendientes.includes(id);\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { selSectoresLoading, selSectorLoading } from './selectors';\nimport { UNLOADED } from 'Store/constantes';\nexport const loadSectores = createAsyncThunk(\n  'loadSectores',\n  () =>\n    import(\n      /* webpackChunkName: \"sectores\" */ 'Store/data/_salida/_sectores'\n    ).then((data) => data.default),\n  {\n    condition: (_, { getState }) => {\n      return selSectoresLoading(getState()) === UNLOADED;\n    },\n  }\n);\n\nexport const loadSector = createAsyncThunk(\n  'loadSector',\n  (idSector) =>\n    import(\n      /* webpackChunkName: \"[request]\" */ `Store/data/_salida/${idSector}`\n    ),\n  {\n    condition: (_, { getState }) => {\n      return selSectorLoading(getState()) === UNLOADED;\n    },\n  }\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"styles_label__3r56c\",\"pushDown\":\"styles_pushDown__1r8Ml\",\"cambio\":\"styles_cambio__K-Ynx\",\"manual\":\"styles_manual__1SN6-\",\"hidden\":\"styles_hidden__1mPWU\",\"close\":\"styles_close__1b-CL\",\"disabled\":\"styles_disabled__3q6v_\",\"solapas\":\"styles_solapas__1cybr\",\"solapa\":\"styles_solapa__1ZYE5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"styles_main__QJA2q\",\"alt\":\"styles_alt__EQPaw\",\"svg\":\"styles_svg__6vY_Q\",\"filled\":\"styles_filled__2ZKFa\"};","import { createSelector } from '@reduxjs/toolkit';\nimport { AUTOMATICO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.semaforos);\n\nexport const selSemaforo = selectors.selectById;\n\nexport const selModoSemaforo = createSelector(\n  selectors.selectById,\n  (semaforo) => (semaforo && semaforo.modo) || AUTOMATICO\n);\n\nexport const selSemaforos = createSelector(\n  selectors.selectAll,\n  (_, celda) => celda,\n  (semaforos, celda) => {\n    const ss = semaforos.filter(\n      (semaforo) =>\n        semaforo.idSector === celda.idSector &&\n        semaforo.x === celda.x &&\n        semaforo.y === celda.y\n    );\n    if (ss.length) return ss;\n    return null;\n  }\n);\n","import sectorAdapter from './adapter';\nimport { UNLOADED } from 'Store/constantes';\nconst selectors = sectorAdapter.getSelectors((state) => state.sectores);\n\nexport const selSector = selectors.selectById;\nexport const selSectorLoading = (state, idSector) =>\n  state.sectores.loadStatusEachSector[idSector] || UNLOADED;\nexport const selErrorSector = (state) => state.sectores.errorSector;\n\nexport const selSectores = selectors.selectAll;\nexport const selSectoresLoading = (state) => state.sectores.loadStatusSectores;\nexport const selErrorSectores = (state) => state.sectores.errorSectores;\n","import { createAction } from '@reduxjs/toolkit';\nimport { selCelda, selSemaforo, selEmpalme } from 'Store/selectors';\nimport {\n  removeTrenFromCelda,\n  addTrenToCelda,\n  setAlarma,\n  runAutomatizaciones,\n  setAviso,\n} from 'Store/actions';\nimport { currentSector } from 'Store/options';\nimport { buildId, nombreEntity } from 'Utils';\n\nimport {\n  LINEA,\n  CAMBIO,\n  CRUCE,\n  PARAGOLPE,\n  IZQ,\n  CENTRO,\n  DER,\n  ALTO,\n  PRECAUCION,\n  LIBRE,\n  N,\n  NE,\n  E,\n  SE,\n  S,\n  SW,\n  W,\n  NW,\n  INFO,\n  WARNING,\n} from 'Store/constantes';\nimport { selTren, selTrenes, selBloqueOcupado } from 'Store/selectors';\n\nlet id = 100;\nexport const doAddTren = createAction(\n  'addTren',\n  (celda, dir, maxSpeed, idTren, numero) => ({\n    payload: {\n      idCelda: celda.idCelda,\n      x: celda.x,\n      y: celda.y,\n      dir,\n      speed: maxSpeed,\n      maxSpeed,\n      idTren,\n      idSector: celda.idSector,\n      numero,\n    },\n  })\n);\n\nexport function addTren(celda, dir, maxSpeed = 1) {\n  return (dispatch) => {\n    const numero = id;\n    id += 2;\n    const idTren = `_tren_${numero}`;\n    const { idCelda } = celda;\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Parte tren ${numero} desde ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doAddTren(celda, dir, maxSpeed, idTren, numero));\n    dispatch(addTrenToCelda(idCelda, idTren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport const doDelTren = createAction('doDelTren');\n\nexport function delTren(tren) {\n  return (dispatch, getState) => {\n    const { idCelda, numero } = tren;\n    const celda = selCelda(getState(), idCelda);\n    if (idCelda) dispatch(removeTrenFromCelda(idCelda));\n    dispatch(\n      setAviso(\n        INFO,\n        idCelda,\n        numero,\n        `Borrado el tren ${numero} en ${nombreEntity(celda)}`\n      )\n    );\n    dispatch(doDelTren(tren.idTren));\n  };\n}\n\nexport function delTrenes() {\n  return (dispatch, getState) => {\n    selTrenes(getState()).forEach((tren) => dispatch(delTren(tren)));\n  };\n}\n\nexport const setTren = createAction('setTren');\n\nfunction nextCoords({ x, y, dir }, getState) {\n  const empalme = selEmpalme(\n    getState(),\n    buildId({\n      idSector: currentSector.selector(getState()),\n      x,\n      y,\n      dir,\n    })\n  );\n  if (empalme) {\n    return [empalme.x, empalme.y, empalme.dir];\n  }\n  switch (dir) {\n    case N:\n      return [x, y - 1, S];\n    case NE:\n      return [x + 1, y - 1, SW];\n    case E:\n      return [x + 1, y, W];\n    case SE:\n      return [x + 1, y + 1, NW];\n    case S:\n      return [x, y + 1, N];\n    case SW:\n      return [x - 1, y + 1, NE];\n    case W:\n      return [x - 1, y, E];\n    case NW:\n      return [x - 1, y - 1, SE];\n    default:\n  }\n}\n\nfunction solveNewDir(newDir, newCelda) {\n  function other({ puntas }) {\n    if (puntas.includes(newDir)) {\n      return puntas[0] === newDir ? puntas[1] : puntas[0];\n    } else return;\n  }\n  switch (newCelda.tipo) {\n    case LINEA:\n      return other(newCelda);\n    case CAMBIO:\n      if (newCelda.punta === newDir) return newCelda.ramas[newCelda.posicion];\n      else if (newCelda.ramas[newCelda.posicion] === newDir)\n        return newCelda.punta;\n      else return;\n    case PARAGOLPE:\n      if (newCelda.rebota) return newCelda.punta;\n      if (newCelda.punta === newDir) return 'X';\n      else return;\n    case CRUCE:\n      return other(newCelda.linea1) || other(newCelda.linea2);\n    default:\n      break;\n  }\n}\n\nexport function moveTren(idTren) {\n  return (dispatch, getState) => {\n    const tren = selTren(getState(), idTren);\n    if (!tren) return;\n    if (tren.dir === 'X') {\n      return dispatch(delTren(tren));\n    }\n\n    const oldCelda = selCelda(getState(), tren.idCelda);\n    if (tren.falta) {\n      dispatch(\n        setTren({\n          idTren,\n          falta: tren.speed > tren.falta ? 0 : tren.falta - tren.speed,\n        })\n      );\n      return;\n    }\n    const [newX, newY, newDir] = nextCoords(tren, getState);\n    let nextSpeed = tren.speed;\n\n    if (oldCelda.x !== newX || oldCelda.y !== newY) {\n      const newIdCelda = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n      });\n      const newIdSemaforo = buildId({\n        idSector: oldCelda.idSector,\n        x: newX,\n        y: newY,\n        dir: newDir,\n      });\n      const newCelda = selCelda(getState(), newIdCelda);\n\n      if (newCelda) {\n        const newSemaforo = selSemaforo(getState(), newIdSemaforo);\n        if (newSemaforo) {\n          const newPermiso = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in newSemaforo\n              ? Math.min(permiso, newSemaforo[senal])\n              : permiso;\n          }, ALTO);\n          switch (newPermiso) {\n            case ALTO:\n              if (tren.speed)\n                dispatch(\n                  setAviso(\n                    WARNING,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} detenido en ${nombreEntity(oldCelda)}`\n                  )\n                );\n              dispatch(setTren({ idTren, speed: 0 }));\n\n              return;\n            case PRECAUCION:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed / 2 }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed / 2;\n              break;\n            case LIBRE:\n              if (tren.speed === 0) {\n                dispatch(\n                  setAviso(\n                    INFO,\n                    tren.idCelda,\n                    tren.numero,\n                    `Tren ${tren.numero} reanuda la marcha en ${nombreEntity(\n                      oldCelda\n                    )}`\n                  )\n                );\n                dispatch(setTren({ idTren, speed: tren.maxSpeed }));\n                return;\n              }\n              nextSpeed = tren.maxSpeed;\n              break;\n            default:\n              throw new Error(\n                `Semáforo ${newIdSemaforo} dá semáforo imposible ${newPermiso}`\n              );\n          }\n        }\n\n        if (newCelda.idTren) {\n          const newTren = selTren(getState(), newCelda.idTren);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Colisión en ${nombreEntity(newCelda)} entre trenes ${\n                tren.numero\n              } y ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const trenEnBloque = selBloqueOcupado(getState(), newCelda.idBloque);\n        if (trenEnBloque && trenEnBloque !== idTren) {\n          const newTren = selTren(getState(), trenEnBloque);\n          dispatch(\n            setAlarma(\n              newIdCelda,\n              tren.numero,\n              `Tren ${tren.numero} invade el bloque ${newCelda.idBloque} ocupado por el tren ${newTren.numero}`\n            )\n          );\n          return;\n        }\n        const nextDir = solveNewDir(newDir, newCelda);\n        if (!nextDir) {\n          dispatch(\n            setAlarma(\n              newCelda.idCelda,\n              tren.numero,\n              `Tren ${\n                tren.numero\n              } no encuentra vía correspondiente en celda ${nombreEntity(\n                newCelda\n              )}`\n            )\n          );\n          return;\n        }\n        dispatch(removeTrenFromCelda(oldCelda.idCelda));\n        dispatch(addTrenToCelda(newIdCelda, idTren));\n        dispatch(\n          setTren({\n            idTren,\n            dir: nextDir,\n            x: newX,\n            y: newY,\n            speed: nextSpeed,\n            idCelda: newIdCelda,\n            falta: newCelda.longitud || 1,\n          })\n        );\n      } else {\n        dispatch(delTren(tren));\n      }\n    } else dispatch(setTren(tren));\n    dispatch(runAutomatizaciones());\n  };\n}\n\nexport function moveTrenes() {\n  return (dispatch, getState) => {\n    const idSector = currentSector.selector(getState());\n    return Promise.all(\n      selTrenes(getState(), idSector).map((tren) =>\n        dispatch(moveTren(tren.idTren))\n      )\n    );\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rect\":\"styles_rect__1zG3J\",\"manual\":\"styles_manual__139ZI\",\"text\":\"styles_text__JdA5Q\",\"svg\":\"styles_svg__rOGuq\",\"tramo-normal\":\"styles_tramo-normal__JZdRz\",\"tramo-muerto\":\"styles_tramo-muerto__LXymi\",\"tramo-ocupado\":\"styles_tramo-ocupado__LrGlb\",\"rebota\":\"styles_rebota__323Gf\",\"close\":\"styles_close__I-x5K\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const showEstado = createAction('showEstado');\nexport const hideEstado = createAction('hideEstado');\n","import { createAction } from '@reduxjs/toolkit';\nimport { playRate } from 'Store/options';\nimport { DANGER } from 'Store/constantes';\n\nexport const doSetAlarma = createAction('doSetAlarma');\n\nexport function setAlarma(idCelda, numero, msg) {\n  return (dispatch) => {\n    dispatch(setAviso(DANGER, idCelda, numero, msg));\n    dispatch(doSetAlarma({ idCelda, numero, msg, fecha: Date.now() }));\n    dispatch(playRate.action(0));\n  };\n}\n\nexport const clearAlarma = createAction('clearAlarma');\n\nexport const setAviso = createAction(\n  'setAviso',\n  (nivel, idCelda, numero, msg) => ({\n    payload: {\n      nivel,\n      idCelda,\n      numero,\n      msg,\n      fecha: Date.now(),\n    },\n  })\n);\n\nexport const clearAvisos = createAction('clearAvisos');\n\nexport const clearAviso = createAction('clearAviso');\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.bloques);\n\nexport const selBloque = selectors.selectById;\n\nexport const selBloqueOcupado = createSelector(\n  selectors.selectById,\n  (bloque) => bloque && bloque.idTren\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { clearPendientes, runAutomatizaciones } from 'Store/actions';\nimport { selModoSemaforo, selSemaforo } from './selectors';\nimport {\n  AUTOMATICO,\n  BLOQUEADO,\n  ALTO,\n  IZQ,\n  CENTRO,\n  DER,\n} from 'Store/constantes';\n\nconst UPDATE_SEMAFORO = 'updateSemaforo';\nexport const updateSemaforo = createAction(UPDATE_SEMAFORO);\n\nexport function doSetAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (!semaforo[senal]) {\n      throw new Error(`Semaforo ${idSemaforo} no tiene senal ${senal}`);\n    }\n    if (semaforo[senal] === aspecto) return false;\n    return dispatch(\n      updateSemaforo({\n        ...semaforo,\n        [senal]: aspecto,\n      })\n    );\n  };\n}\n\nexport function setAspectoSenal(idSemaforo, senal, aspecto) {\n  return (dispatch, getState) => {\n    dispatch(doSetAspectoSenal(idSemaforo, senal, aspecto));\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones(idSemaforo));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport function setModoSemaforo(idSemaforo, modo) {\n  return (dispatch, getState) => {\n    const semaforo = selSemaforo(getState(), idSemaforo);\n    if (modo === BLOQUEADO) {\n      dispatch(\n        updateSemaforo(\n          [IZQ, CENTRO, DER].reduce(\n            (s, dir) => (dir in semaforo ? { ...s, [dir]: ALTO } : s),\n            { idSemaforo, modo }\n          )\n        )\n      );\n    } else {\n      dispatch(updateSemaforo({ idSemaforo, modo }));\n    }\n    if (selModoSemaforo(getState(), idSemaforo) === AUTOMATICO) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { NORMAL } from 'Store/constantes';\n\nimport { currentSector } from 'Store/options';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.celdas);\n\nexport const selCeldas = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (celdas, idSector) => celdas.filter((e) => e.idSector === idSector)\n);\n\nexport const selCelda = createSelector(selectors.selectById, (celda) => {\n  if (celda)\n    return {\n      posicion: NORMAL,\n      ...celda,\n    };\n});\n\nexport const selCeldaIsManual = createSelector(\n  selectors.selectById,\n  (celda) => celda && celda.manual\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"semaforo\":\"styles_semaforo__1oD_-\",\"verde\":\"styles_verde__3jxOB\",\"rojo\":\"styles_rojo__19OcT\",\"amarillo\":\"styles_amarillo__EBZgn\",\"maniobra\":\"styles_maniobra__1WLEL\",\"blink\":\"styles_blink__1pyu2\",\"blinker\":\"styles_blinker__2Ms7j\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const setBloqueOcupado = createAction(\n  'setBloqueOcupado',\n  (idBloque, idTren, vecino) => ({\n    payload: {\n      idBloque,\n      idTren,\n      vecino,\n    },\n  })\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  setPendiente,\n  runAutomatizaciones,\n  clearPendientes,\n  setBloqueOcupado,\n} from 'Store/actions';\nimport { selCelda, selPendiente, selCeldaIsManual } from 'Store/selectors';\nimport { CAMBIO } from 'Store/constantes';\n\nconst UPDATE_CELDA = 'updateCelda';\nexport const updateCelda = createAction(UPDATE_CELDA);\n\nconst doSetPosicion = createAction(UPDATE_CELDA, (idCelda, posicion) => ({\n  payload: {\n    idCelda,\n    posicion,\n  },\n}));\n\nexport function rawSetPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    const celda = selCelda(getState(), idCelda);\n    if (celda.tipo !== CAMBIO) {\n      throw new Error(`Celda ${idCelda}  no es un cambio`);\n    }\n    if (celda.posicion === posicion) {\n      return false;\n    }\n    if (selPendiente(getState(), idCelda)) return false;\n    dispatch(setPendiente(idCelda));\n    return dispatch(doSetPosicion(idCelda, posicion));\n  };\n}\n\nexport function setPosicion(idCelda, posicion) {\n  return (dispatch, getState) => {\n    dispatch(rawSetPosicion(idCelda, posicion));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones(idCelda));\n    }\n    return dispatch(clearPendientes());\n  };\n}\n\nexport const doSetCambioManual = createAction(\n  UPDATE_CELDA,\n  (idCelda, manual) => ({\n    payload: {\n      idCelda,\n      manual,\n    },\n  })\n);\n\nexport function setCambioManual(idCelda, manual) {\n  return (dispatch, getState) => {\n    dispatch(doSetCambioManual(idCelda, manual));\n    if (!selCeldaIsManual(getState(), idCelda)) {\n      dispatch(runAutomatizaciones());\n    }\n  };\n}\n\nexport const doRemoveTrenFromCelda = createAction(UPDATE_CELDA, (idCelda) => ({\n  payload: {\n    idCelda,\n    idTren: null,\n  },\n}));\n\nexport function removeTrenFromCelda(idCelda) {\n  return (dispatch, getState) => {\n    dispatch(doRemoveTrenFromCelda(idCelda));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, false));\n    }\n  };\n}\n\nexport const doAddTrenToCelda = createAction(\n  UPDATE_CELDA,\n  (idCelda, idTren) => ({\n    payload: {\n      idCelda,\n      idTren,\n    },\n  })\n);\n\nexport function addTrenToCelda(idCelda, idTren) {\n  return (dispatch, getState) => {\n    dispatch(doAddTrenToCelda(idCelda, idTren));\n    const celda = selCelda(getState(), idCelda);\n    if (celda.idBloque) {\n      dispatch(setBloqueOcupado(celda.idBloque, idTren));\n    }\n  };\n}\n\nexport const setRebota = createAction(UPDATE_CELDA, (idCelda, rebota) => ({\n  payload: {\n    idCelda,\n    rebota,\n  },\n}));\n","import { createSelector } from '@reduxjs/toolkit';\nimport { currentSector } from 'Store/options';\nimport { selBloqueOcupado } from 'Store/bloques/selectors';\nimport { selSemaforo } from 'Store/semaforos/selectors';\nimport { buildId, buildIdBloque } from 'Utils';\nimport { BLOQUE, SEMAFORO, IZQ, CENTRO, DER, ALTO } from 'Store/constantes';\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.enclavamientos);\n\nexport const selEnclavamientos = selectors.selectAll;\nexport const selEnclavamiento = selectors.selectById;\n\nexport const selCondicionesFaltantes = createSelector(\n  (state) => state,\n  currentSector.selector,\n  selEnclavamiento,\n  (state, idSector, encl) =>\n    encl\n      ? encl.deps.reduce((salida, dep) => {\n          switch (dep.tipo) {\n            case BLOQUE:\n              const idBloque = buildIdBloque(idSector, dep.bloque);\n              const idTren = selBloqueOcupado(state, idBloque);\n              if (idTren) {\n                return salida.concat({\n                  ...dep,\n                  idTren,\n                  idBloque,\n                });\n              }\n              break;\n            case SEMAFORO:\n              const idSemaforo = buildId({ ...dep, idSector });\n              const semaforo = selSemaforo(state, idSemaforo);\n              const aspecto = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n                return senal in semaforo\n                  ? Math.min(permiso, semaforo[senal])\n                  : permiso;\n              }, ALTO);\n              if (aspecto !== dep.aspecto) {\n                return salida.concat({\n                  ...dep,\n                  ...semaforo,\n                });\n              }\n              break;\n            default:\n              break;\n          }\n          return salida;\n        }, [])\n      : []\n);\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (bloque) => bloque.idBloque,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (celda) => celda.idCelda,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (semaforo) => semaforo.idSemaforo,\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"styles_info__2eaPP\",\"warning\":\"styles_warning__Y2zSC\",\"danger\":\"styles_danger__3Ef8R\",\"fixed\":\"styles_fixed__3IULb\",\"buttons\":\"styles_buttons__Of--i\"};","export const selAlarma = (state) => state.alertas.alarma;\n\nexport const selAvisos = (state) => state.alertas.avisos;\n","export const selTrenes = (state, idSector) =>\n  Object.values(state.trenes).filter((tren) =>\n    idSector ? tren.idSector === idSector : true\n  );\nexport const selTren = (state, idTren) => state.trenes[idTren];\n","import { buildId, buildIdBloque } from 'Utils';\n\nimport {\n  selCelda,\n  selSemaforo,\n  selAutomatizacion,\n  selAutomatizaciones,\n  selBloqueOcupado,\n  selBloque,\n} from 'Store/selectors';\n\nimport { automatizacionesActive } from 'Store/options';\n\nimport {\n  LIBRE,\n  ALTO,\n  CAMBIO,\n  SEMAFORO,\n  BLOQUE,\n  FIJO,\n  IZQ,\n  CENTRO,\n  DER,\n  AUTOMATICO,\n} from 'Store/constantes';\n\nimport {\n  rawSetPosicion,\n  doSetAspectoSenal,\n  setBloqueOcupado,\n} from 'Store/actions';\n\nfunction automate(dispatch, getState, idTarget, autom) {\n  const idSector = autom.idSector;\n\n  function automatizacionesCambio(idTarget, deps) {\n    const celdaTarget = selCelda(getState(), idTarget);\n    return deps.reduce((p1, dep) => {\n      const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n      const celdaSource = selCelda(getState(), idSource);\n      const alt = dep.alts.find((alt) => alt.cuando === celdaSource.posicion);\n      if (!alt) return p1;\n      const posicionEsperada = alt.posicion;\n      if (posicionEsperada === celdaTarget.posicion) return p1;\n      if (celdaTarget.manual) return p1;\n      return p1.then(\n        (r1) => !!dispatch(rawSetPosicion(idTarget, posicionEsperada)) || r1\n      );\n    }, Promise.resolve(false));\n  }\n\n  function automatizacionesSemaforo(idTarget, deps) {\n    const semaforoTarget = selSemaforo(getState(), idTarget);\n    if (semaforoTarget.modo !== AUTOMATICO) return false;\n    const aspectoEsperado = {\n      izq: LIBRE,\n      centro: LIBRE,\n      der: LIBRE,\n    };\n    deps.forEach((dep) => {\n      const idSource = buildId({\n        idSector,\n        x: dep.x,\n        y: dep.y,\n        dir: dep.dir,\n      });\n      switch (dep.tipo) {\n        case CAMBIO:\n          const celdaSource = selCelda(getState(), idSource);\n          const alt = dep.alts.find(\n            (alt) => alt.cuando === celdaSource.posicion\n          );\n          if (alt) {\n            Object.keys(aspectoEsperado).forEach((senal) => {\n              if (alt[senal])\n                aspectoEsperado[senal] = Math.max(\n                  aspectoEsperado[senal],\n                  alt[senal]\n                );\n            });\n          }\n          break;\n        case SEMAFORO:\n          const semaforoSource = selSemaforo(getState(), idSource);\n          const estadoSource = [IZQ, CENTRO, DER].reduce((permiso, senal) => {\n            return senal in semaforoSource\n              ? Math.min(permiso, semaforoSource[senal])\n              : permiso;\n          }, ALTO);\n          dep.senales.forEach(({ cuando, senalAfectada, aspecto }) => {\n            if (estadoSource === cuando) {\n              aspectoEsperado[senalAfectada] = Math.max(\n                aspectoEsperado[senalAfectada],\n                aspecto\n              );\n            }\n          });\n          break;\n        case BLOQUE:\n          const ocupado = !!selBloqueOcupado(\n            getState(),\n            buildIdBloque(idSector, dep.bloque)\n          );\n          if (ocupado) {\n            aspectoEsperado[dep.senalAfectada] = ALTO;\n          }\n          break;\n        case FIJO:\n          aspectoEsperado[dep.senalAfectada] = Math.max(\n            dep.aspecto,\n            aspectoEsperado[dep.senalAfectada]\n          );\n          break;\n        default:\n          throw new Error(\n            `Dependencia ${dep.idSource} de ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n          );\n      }\n    });\n    return Object.keys(aspectoEsperado).reduce((p2, senal) => {\n      if (!(senal in semaforoTarget)) return p2;\n      if (semaforoTarget[senal] === aspectoEsperado[senal]) return p2;\n\n      return p2.then(\n        (r2) =>\n          !!dispatch(\n            doSetAspectoSenal(idTarget, senal, aspectoEsperado[senal])\n          ) || r2\n      );\n    }, Promise.resolve(false));\n  }\n\n  const automatizacionesBloque = (idTarget, deps) => {\n    const bloqueTarget = selBloque(getState(), idTarget);\n    deps.reduce(\n      (p3, dep) => {\n        switch (dep.tipo) {\n          case BLOQUE:\n            const idSource = buildId({ idSector, x: dep.x, y: dep.y });\n            const celdaSource = selCelda(getState(), idSource);\n            if (celdaSource.posicion === dep.posicion) {\n              const bloqueSource = selBloque(\n                getState(),\n                buildIdBloque(idSector, dep.bloque)\n              );\n              if (bloqueSource.idTren && !bloqueSource.vecino) {\n                return dispatch(\n                  setBloqueOcupado(idTarget, bloqueSource.idTren, true)\n                );\n              }\n            }\n            return p3;\n          default:\n            throw new Error(\n              `Dependencia de  ${idTarget} tiene tipo desconocido: ${dep.tipo}`\n            );\n        }\n      },\n      bloqueTarget.vecino\n        ? dispatch(setBloqueOcupado(idTarget, false, false))\n        : Promise.resolve(false)\n    );\n  };\n\n  switch (autom.tipo) {\n    case CAMBIO:\n      return automatizacionesCambio(idTarget, autom.deps);\n    case SEMAFORO:\n      return automatizacionesSemaforo(idTarget, autom.deps);\n    case BLOQUE:\n      return automatizacionesBloque(idTarget, autom.deps);\n    default:\n      throw new Error(\n        `Celda ${idTarget} tiene automatización desconocido ${autom.tipo}`\n      );\n  }\n}\n\nexport function runAutomatizacion(idTarget) {\n  return async (dispatch, getState) => {\n    const autom = selAutomatizacion(getState(), idTarget);\n    automate(dispatch, getState, idTarget, autom);\n  };\n}\n\nexport function runAutomatizaciones(idOrigen) {\n  return async (dispatch, getState) => {\n    if (!automatizacionesActive.selector(getState())) return;\n\n    const browseAutomatizaciones = () => {\n      const automatizaciones = selAutomatizaciones(getState());\n      return automatizaciones.reduce((p, autom) => {\n        const { x, y, dir, tipo, bloque, idSector } = autom;\n        const idTarget =\n          tipo === BLOQUE\n            ? buildIdBloque(idSector, bloque)\n            : buildId({ idSector, x, y, dir });\n        if (idOrigen && idTarget === idOrigen) return p;\n        return p.then(\n          (r) => automate(dispatch, getState, idTarget, autom) || r\n        );\n      }, Promise.resolve(false));\n    };\n\n    let countDown = 9;\n    while (countDown && (await browseAutomatizaciones())) countDown--;\n    if (!countDown) throw new Error(`Automatización en loop por ${idOrigen}`);\n    return !!countDown;\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const setPendiente = createAction('setPendiente');\nexport const clearPendientes = createAction('clearPendientes');\n","import { createEntityAdapter } from '@reduxjs/toolkit';\nimport { CAMBIO, SEMAFORO } from 'Store/constantes';\n\nexport default createEntityAdapter({\n  selectId: (automatizacion) => automatizacion.idAutom,\n  sortComparer: (a, b) => {\n    if (a.tipo === CAMBIO && b.tipo === SEMAFORO) return -1;\n    if (a.tipo === SEMAFORO && b.tipo === CAMBIO) return 1;\n    return 0;\n  },\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (empalme) => empalme.idPunta,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (enclavamiento) => enclavamiento.idEncl,\n});\n","import { createEntityAdapter } from '@reduxjs/toolkit';\n\nexport default createEntityAdapter({\n  selectId: (sector) => sector.idSector,\n  sortComparer: (sa, sb) => {\n    var descrA = sa.descrCorta.toUpperCase();\n    var descrB = sb.descrCorta.toUpperCase();\n    if (descrA < descrB) return -1;\n    if (descrA > descrB) return 1;\n    return 0;\n  },\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flechaDespachador\":\"styles_flechaDespachador__jpfOH\",\"trenDespachador\":\"styles_trenDespachador__1G3VE\",\"disabled\":\"styles_disabled__10sbm\",\"tren\":\"styles_tren__25vJ9\"};","import { createSelector } from '@reduxjs/toolkit';\n\nimport { currentSector } from 'Store/options';\n\nimport adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.automatizaciones);\n\nexport const selAutomatizaciones = createSelector(\n  selectors.selectAll,\n  currentSector.selector,\n  (automatizaciones, idSector) =>\n    automatizaciones.filter((e) => e.idSector === idSector)\n);\n\nexport const selAutomatizacion = selectors.selectById;\n","import adapter from './adapter';\n\nconst selectors = adapter.getSelectors((state) => state.empalmes);\n\nexport const selEmpalmes = selectors.selectAll;\nexport const selEmpalme = selectors.selectById;\n","export const selShowEstado = (state) => state.options.showEstado;\n","module.exports = \"data:image/gif;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alarma\":\"styles_alarma__1_-OE\",\"close\":\"styles_close__1Zwow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close\":\"styles_close__3wiH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flecha\":\"styles_flecha__1UfOk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sector\":\"styles_sector__1v7a1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rate\":\"styles_rate__26o7Y\"};","var map = {\n\t\"./_sectores\": [\n\t\t94,\n\t\t0\n\t],\n\t\"./_sectores.js\": [\n\t\t94,\n\t\t0\n\t],\n\t\"./circulo\": [\n\t\t123,\n\t\t1\n\t],\n\t\"./circulo.js\": [\n\t\t123,\n\t\t1\n\t],\n\t\"./constitucion\": [\n\t\t124,\n\t\t2\n\t],\n\t\"./constitucion.js\": [\n\t\t124,\n\t\t2\n\t],\n\t\"./cruceDobleCambio\": [\n\t\t125,\n\t\t3\n\t],\n\t\"./cruceDobleCambio.js\": [\n\t\t125,\n\t\t3\n\t],\n\t\"./dosVias\": [\n\t\t126,\n\t\t4\n\t],\n\t\"./dosVias.js\": [\n\t\t126,\n\t\t4\n\t],\n\t\"./empalmes\": [\n\t\t127,\n\t\t5\n\t],\n\t\"./empalmes.js\": [\n\t\t127,\n\t\t5\n\t],\n\t\"./semaforosEncadenados\": [\n\t\t128,\n\t\t6\n\t],\n\t\"./semaforosEncadenados.js\": [\n\t\t128,\n\t\t6\n\t],\n\t\"./simpleDesvio\": [\n\t\t129,\n\t\t7\n\t],\n\t\"./simpleDesvio.js\": [\n\t\t129,\n\t\t7\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 152;\nmodule.exports = webpackAsyncContext;","import { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  doSetAlarma,\n  clearAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n} from 'Store/actions';\n\nexport default createReducer(\n  { alarma: {}, avisos: [] },\n  {\n    [doSetAlarma]: (state, action) => {\n      state.alarma = action.payload;\n    },\n    [clearAlarma]: (state) => {\n      state.alarma = {};\n    },\n    [setAviso]: (state, action) => {\n      state.avisos.unshift(action.payload);\n    },\n    [clearAviso]: (state, action) => {\n      const idx = state.avisos.findIndex((av) => av.fecha === action.payload);\n      if (idx !== -1) state.avisos.splice(idx, 1);\n    },\n    [clearAvisos]: (state) => {\n      state.avisos = [];\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { setBloqueOcupado } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.bloques);\n  },\n  [setBloqueOcupado]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nimport { updateCelda } from 'Store/actions';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.celdas);\n  },\n  [updateCelda]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.automatizaciones || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.empalmes || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadSector } from 'Store/sectores/actions';\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.enclavamientos || []);\n  },\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { showEstado, hideEstado } from './actions';\n\nimport {\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n  playRate,\n  currentSector,\n} from './';\n\nexport default createReducer(\n  {\n    [automatizacionesActive]: automatizacionesActive.default,\n    [showCoords]: showCoords.default,\n    showEstado: { show: false },\n    [playRate]: playRate.default,\n    [showTeletipo]: showTeletipo.default,\n    [showConfig]: showConfig.default,\n  },\n  {\n    [automatizacionesActive]: automatizacionesActive.reducer,\n    [showTeletipo]: showTeletipo.reducer,\n    [showCoords]: showCoords.reducer,\n    [showEstado]: (state, action) => {\n      state.showEstado = {\n        ...action.payload,\n        show: true,\n      };\n    },\n    [hideEstado]: (state) => {\n      state.showEstado = { show: false };\n    },\n    [showConfig]: showConfig.reducer,\n    [playRate]: playRate.reducer,\n    [currentSector]: currentSector.reducer,\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { setPendiente, clearPendientes } from './actions';\n\nexport default createReducer([], {\n  [setPendiente]: (state, action) => {\n    state.push(action.payload);\n  },\n  [clearPendientes]: () => [],\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { UNLOADED, LOADED, LOADING } from 'Store/constantes';\n\nimport sectorAdapter from './adapter';\nimport { loadSector, loadSectores } from './actions';\n\nexport default createReducer(\n  sectorAdapter.getInitialState({\n    loadStatusSectores: UNLOADED,\n    loadStatusEachSector: {},\n  }),\n  {\n    [loadSectores.pending]: (state) => {\n      if (state.loadStatusSectores === UNLOADED) {\n        state.loadStatusSectores = LOADING;\n        state.errorSectores = null;\n      }\n    },\n    [loadSectores.fulfilled]: (state, action) => {\n      if (state.loadStatusSectores === LOADING) {\n        sectorAdapter.setAll(state, action.payload);\n        state.loadStatusSectores = LOADED;\n      }\n    },\n    [loadSectores.rejected]: (state, action) => {\n      state.loadStatusSectores = UNLOADED;\n      state.errorSectores = action.error;\n    },\n    [loadSector.pending]: (state, action) => {\n      const idSector = action.meta.arg;\n      const loadStatus = state.loadStatusEachSector[idSector];\n      if (!loadStatus || loadStatus === UNLOADED) {\n        state.loadStatusEachSector[idSector] = LOADING;\n        state.errorSector = null;\n      }\n    },\n    [loadSector.fulfilled]: (state, action) => {\n      const idSector = action.meta.arg;\n      if (state.loadStatusEachSector[idSector] === LOADING) {\n        state.loadStatusEachSector[idSector] = LOADED;\n      }\n    },\n    [loadSector.rejected]: (state, action) => {\n      state.loadStatusEachSector[action.meta.arg] = UNLOADED;\n      state.errorSector = action.error;\n    },\n  }\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport { updateSemaforo } from './actions';\nimport { loadSector } from 'Store/sectores/actions';\n\nimport adapter from './adapter';\n\nexport default createReducer(adapter.getInitialState(), {\n  [loadSector.fulfilled]: (state, action) => {\n    adapter.addMany(state, action.payload.semaforos || []);\n  },\n  [updateSemaforo]: adapter.upsertOne,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { doAddTren, setTren, doDelTren } from './actions';\n\nexport default createReducer(\n  {},\n  {\n    [doAddTren]: (state, { payload }) => {\n      state[payload.idTren] = payload;\n    },\n    [setTren]: (state, { payload }) => {\n      state[payload.idTren] = {\n        ...state[payload.idTren],\n        ...payload,\n      };\n    },\n    [doDelTren]: (state, { payload: idTren }) => {\n      delete state[idTren];\n    },\n  }\n);\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selBloque, selBloqueOcupado } from './selectors';\nimport { setBloqueOcupado } from './actions';\n\nexport const useBloque = (idBloque) =>\n  useSelector((state) => selBloque(state, idBloque));\n\nexport const useBloqueOcupado = (idBloque) =>\n  useSelector((state) => selBloqueOcupado(state, idBloque));\n\nexport const useSetBloqueOcupado = () => {\n  const dispatch = useDispatch();\n  return (idBloque, idTren) => dispatch(setBloqueOcupado(idBloque, idTren));\n};\n","import { useSelector, useDispatch } from 'react-redux';\nimport { useCallback } from 'react';\nimport { setCambioManual, setPosicion, setRebota } from './actions';\nimport { selCelda, selCeldas, selCeldaIsManual } from './selectors';\n\nexport const useCelda = (idCelda) =>\n  useSelector((state) => selCelda(state, idCelda));\n\nexport const useCeldas = (idSector) =>\n  useSelector((state) => selCeldas(state, idSector));\n\nexport const useCeldaManual = (idCelda) => {\n  const celdaIsManual = useSelector((state) =>\n    selCeldaIsManual(state, idCelda)\n  );\n  const dispatch = useDispatch();\n  const toggleCeldaManual = useCallback(\n    () => dispatch(setCambioManual(idCelda, !celdaIsManual)),\n    [idCelda, dispatch, celdaIsManual]\n  );\n  return [celdaIsManual, toggleCeldaManual];\n};\n\nexport const useSetPosicion = (idCelda) => {\n  const dispatch = useDispatch();\n  return (posicion) => dispatch(setPosicion(idCelda, posicion));\n};\n\nexport const useToggleRebota = (idCelda) => {\n  const celda = useSelector((state) => selCelda(state, idCelda));\n  const dispatch = useDispatch();\n  return () => dispatch(setRebota(idCelda, !celda.rebota));\n};\n","import {\n  selEnclavamientos,\n  selEnclavamiento,\n  selCondicionesFaltantes,\n} from './selectors';\nimport { useSelector } from 'react-redux';\n\nexport const useSelEnclavamientos = () =>\n  useSelector((state) => selEnclavamientos(state));\n\nexport const useSelEnclavamiento = (idOrigen) =>\n  useSelector((state) => selEnclavamiento(state, idOrigen));\n\nexport const useCondicionesFaltantes = (idOrigen) =>\n  useSelector((state) => selCondicionesFaltantes(state, idOrigen));\n","import { runAutomatizaciones, runAutomatizacion } from './actions';\nimport { selAutomatizacion } from './selectors';\nimport { useDispatch, useSelector } from 'react-redux';\n\nexport const useRunAutomatizaciones = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizaciones(idOrigen));\n};\n\nexport const useRunAutomatizacion = () => {\n  const dispatch = useDispatch();\n  return (idOrigen) => dispatch(runAutomatizacion(idOrigen));\n};\n\nexport const useSelAutomatizacion = (idOrigen) =>\n  useSelector((state) => selAutomatizacion(state, idOrigen));\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  showEstado as showEstadoAction,\n  hideEstado as hideEstadoAction,\n} from './actions';\n\nimport { selShowEstado } from './selectors';\nimport {\n  playRate,\n  currentSector,\n  showConfig,\n  showCoords,\n  automatizacionesActive,\n  showTeletipo,\n} from './';\n\nexport const useEstado = () => {\n  const estado = useSelector(selShowEstado);\n  const dispatch = useDispatch();\n  const hideEstado = () => dispatch(hideEstadoAction());\n  const showEstado = (args) => dispatch(showEstadoAction(args));\n  return { estado, hideEstado, showEstado };\n};\n\nexport const usePlayRate = playRate.useState;\n\nexport const useCurrentSector = currentSector.useState;\n\nexport const useShowConfig = showConfig.useState;\nexport const useShowCoords = showCoords.useState;\nexport const useAutomatizacionesActive = automatizacionesActive.useState;\nexport const useShowTeletipo = showTeletipo.useState;\n","import { useSelector, useDispatch } from 'react-redux';\nimport {\n  selSector,\n  selSectorLoading,\n  selErrorSector,\n  selSectores,\n  selSectoresLoading,\n  selErrorSectores,\n} from './selectors';\nimport { loadSectores, loadSector } from './actions';\n\nexport const useSector = (idSector) => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector((state) => selSectorLoading(state, idSector)),\n    sector: useSelector((state) => selSector(state, idSector)),\n    error: useSelector(selErrorSector),\n    load: () => dispatch(loadSector(idSector)),\n  };\n};\n\nexport const useSectores = () => {\n  const dispatch = useDispatch();\n  return {\n    loading: useSelector(selSectoresLoading),\n    sectores: useSelector(selSectores),\n    error: useSelector(selErrorSectores),\n    load: () => dispatch(loadSectores()),\n  };\n};\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selSemaforo, selSemaforos, selModoSemaforo } from './selectors';\nimport { setAspectoSenal, setModoSemaforo } from './actions';\n\nexport const useSemaforo = (idSemaforo) =>\n  useSelector((state) => selSemaforo(state, idSemaforo));\n\nexport const useSemaforos = (celda) =>\n  useSelector((state) => selSemaforos(state, celda));\n\nexport const useSetAspectoSenal = () => {\n  const dispatch = useDispatch();\n  return (idSemaforo, senal, aspecto) =>\n    dispatch(setAspectoSenal(idSemaforo, senal, aspecto));\n};\n\nexport const useModoSemaforo = (idCelda) => {\n  const modoSemaforo = useSelector((state) => selModoSemaforo(state, idCelda));\n  const dispatch = useDispatch();\n  return [\n    modoSemaforo,\n    useCallback((modo) => dispatch(setModoSemaforo(idCelda, modo)), [\n      idCelda,\n      dispatch,\n    ]),\n  ];\n};\n","import { configureStore } from '@reduxjs/toolkit';\r\n\r\nimport alertas from './alertas/reducer';\r\nimport bloques from './bloques/reducer';\r\nimport celdas from './celdas/reducer';\r\nimport automatizaciones from './automatizaciones/reducer';\r\nimport empalmes from './empalmes/reducer';\r\nimport enclavamientos from './enclavamientos/reducer';\r\nimport options from './options/reducer';\r\nimport pendientes from './pendientes/reducer';\r\nimport sectores from './sectores/reducer';\r\nimport semaforos from './semaforos/reducer';\r\nimport trenes from './trenes/reducer';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    alertas,\r\n    bloques,\r\n    celdas,\r\n    automatizaciones,\r\n    empalmes,\r\n    enclavamientos,\r\n    options,\r\n    pendientes,\r\n    sectores,\r\n    semaforos,\r\n    trenes,\r\n  },\r\n});\r\n\r\nexport * from './alertas/hooks';\r\nexport * from './bloques/hooks';\r\nexport * from './celdas/hooks';\r\nexport * from './empalmes/hooks';\r\nexport * from './enclavamientos/hooks';\r\nexport * from './automatizaciones/hooks';\r\nexport * from './options/hooks';\r\nexport * from './sectores/hooks';\r\nexport * from './semaforos/hooks';\r\nexport * from './trenes/hooks';\r\n","import React from 'react';\nimport styles from './styles.module.css';\n\nexport function CambioNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 0 V 16 32\" className={styles.main} />\n    </svg>\n  );\n}\nexport function CambioDesviado() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 0 V 16 16\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleIzq() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 0 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleNormal() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 L 32 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport function TripleDer() {\n  return (\n    <svg viewBox=\"0 0 32 32\" className={styles.svg}>\n      <path d=\"M 16 16 V 16 0\" className={styles.alt} />\n      <path d=\"M 16 16 L 0 0\" className={styles.alt} />\n      <path d=\"M 16 32 V 16 16 L 32 0\" className={styles.main} />\n    </svg>\n  );\n}\n\nexport { FaLock as Locked, FaLockOpen as Unlocked } from 'react-icons/fa';\nexport { GiPlainCircle as Circle } from 'react-icons/gi';\nexport { GoMarkGithub as GitHub } from 'react-icons/go';\nexport { MdTrain as Train } from 'react-icons/md';\nexport { GoPlay as Play } from 'react-icons/go';\nexport { GoTrashcan as Trash } from 'react-icons/go';\n","import React, { useState } from 'react';\n\nimport { Table, Button, Label, Input } from 'reactstrap';\nimport { useAvisos, useShowTeletipo, useCelda } from 'Store';\nimport { isPlainClick, nombreEntity } from 'Utils';\nimport { Trash } from 'Components/Icons';\nimport styles from './styles.module.css';\nimport { INFO } from 'Store/constantes';\n\nfunction Item({ nivel, fecha, idCelda, numero, msg, clearAviso }) {\n  const celda = useCelda(idCelda);\n  const clear = (ev) => isPlainClick(ev) && clearAviso(fecha);\n  return (\n    <tr className={styles[nivel]}>\n      <td>{new Date(fecha).toLocaleString()}</td>\n      <td>{nombreEntity(celda)}</td>\n      <td>{numero}</td>\n      <td colSpan={2}>{msg}</td>\n      <td>\n        <Trash onClick={clear} />\n      </td>\n    </tr>\n  );\n}\n\nexport default function Teletipo() {\n  const [mensajes, clearAvisos, clearAviso] = useAvisos();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [info, setInfo] = useState(false);\n\n  const clearAll = (ev) => isPlainClick(ev) && clearAvisos();\n  const close = (ev) => isPlainClick(ev) && setShowTeletipo(!showTeletipo);\n  const toggleInfo = (ev) => setInfo((i) => !i);\n\n  return mensajes.length ? (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>Fecha</th>\n          <th>Celda</th>\n          <th>Tren</th>\n          <th>Mensaje</th>\n          <th>\n            <Label>\n              <Input type=\"checkbox\" checked={info} onChange={toggleInfo} />\n              &nbsp;Ver Info\n            </Label>\n          </th>\n          <th className={styles.buttons}>\n            <Button\n              className={styles.close}\n              title=\"Borrar todas las notificaciones\"\n              onClick={clearAll}\n              size=\"sm\"\n            >\n              <Trash />\n            </Button>\n            <Button close onClick={close} title=\"Cerrar Teletipo\" size=\"sm\" />\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {mensajes\n          .filter((row) => (info ? true : row.nivel !== INFO))\n          .map((row) => (\n            <Item {...row} key={row.fecha} clearAviso={clearAviso} />\n          ))}\n      </tbody>\n    </Table>\n  ) : (\n    <Table className={styles.fixed} size=\"sm\">\n      <thead>\n        <tr>\n          <th>No hay mensajes</th>\n        </tr>\n      </thead>\n    </Table>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport {\n  setAlarma,\n  setAviso,\n  clearAviso,\n  clearAvisos,\n  clearAlarma,\n} from './actions';\nimport { selAlarma, selAvisos } from './selectors';\n\nexport const useSetAlarma = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAlarma(...props));\n};\n\nexport const useAlarma = () => {\n  const dispatch = useDispatch();\n  return [useSelector(selAlarma), () => dispatch(clearAlarma())];\n};\n\nexport const useAvisos = () => {\n  const dispatch = useDispatch();\n  return [\n    useSelector(selAvisos),\n    () => dispatch(clearAvisos()),\n    (fecha) => dispatch(clearAviso(fecha)),\n  ];\n};\n\nexport const useSetAviso = () => {\n  const dispatch = useDispatch();\n  return (...props) => dispatch(setAviso(...props));\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, nombreEntity, useLongPress } from 'Utils';\nimport { SEMAFORO, MANIOBRA, BLOQUEADO, AUTOMATICO } from 'Store/constantes';\nimport { useEstado, useSemaforo, useModoSemaforo } from 'Store';\nimport styles from './styles.module.css';\n\nconst estilosAspectos = ['', 'verde', 'amarillo', 'rojo'];\n\nexport default function Semaforo({ idSemaforo, placement }) {\n  const semaforo = useSemaforo(idSemaforo);\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const { idSector, x, y, centro, izq, der } = semaforo || {};\n  const { showEstado } = useEstado();\n  const longPressProps = useLongPress({\n    onClick: () => {\n      if (semaforo.soloManiobra) {\n        showEstado({\n          tipo: SEMAFORO,\n          idCelda: buildId({\n            idSector,\n            x,\n            y,\n          }),\n          idSemaforo: buildId(semaforo),\n          placement,\n        });\n      } else {\n        setModoSemaforo(modoSemaforo === AUTOMATICO ? BLOQUEADO : AUTOMATICO);\n      }\n    },\n    onLongPress: (ev) =>\n      showEstado({\n        tipo: SEMAFORO,\n        idCelda: buildId({\n          idSector,\n          x,\n          y,\n        }),\n        idSemaforo: buildId(semaforo),\n        placement,\n      }),\n  });\n  if (!semaforo) return null;\n\n  /*\n  Todos estos calculos son a ojo, lo cual hace bastante irrelevante las\n  constances como ANCHO_CELDA y demas porque deberían hacerse proporcional\n  y ajustarse segun se quiera\n  */\n  const r = 5;\n  const cy = 38;\n  const xTope = 95;\n  /* eslint-disable no-mixed-operators */\n  const x1 = xTope - 2 * r;\n  const x2 = x1 + 2 - 2 * r;\n  /* eslint-enable no-mixed-operators */\n\n  return (\n    <g\n      className={classNames(styles.semaforo, {\n        [styles.maniobra]: !semaforo.soloManiobra && modoSemaforo === MANIOBRA,\n        [styles.blink]: !semaforo.soloManiobra && modoSemaforo === BLOQUEADO,\n      })}\n      {...longPressProps}\n    >\n      <title>{nombreEntity(semaforo)}</title>\n      <line x1={xTope} y1={cy} x2={x2 + r} y2={cy} />\n      <line x1={xTope} y1={cy - r} x2={xTope} y2={cy + r} />\n      <circle\n        className={styles[estilosAspectos[centro]]}\n        cx={izq || der ? x2 : x1}\n        cy={cy}\n        r={r}\n      />\n      {izq && (\n        <circle\n          className={styles[estilosAspectos[izq]]}\n          cx={x1}\n          cy={cy + r}\n          r={r}\n        />\n      )}\n      {der && (\n        <circle\n          className={styles[estilosAspectos[der]]}\n          cx={x1}\n          cy={cy - r}\n          r={r}\n        />\n      )}\n    </g>\n  );\n}\n","export const ANCHO_CELDA = 100;\nexport const CENTRO_CELDA = ANCHO_CELDA / 2;\nexport const X = {\n  N: CENTRO_CELDA,\n  NE: ANCHO_CELDA,\n  E: ANCHO_CELDA,\n  SE: ANCHO_CELDA,\n  S: CENTRO_CELDA,\n  SW: 0,\n  W: 0,\n  NW: 0,\n};\nexport const Y = {\n  N: 0,\n  NE: 0,\n  E: CENTRO_CELDA,\n  SE: ANCHO_CELDA,\n  S: ANCHO_CELDA,\n  SW: ANCHO_CELDA,\n  W: CENTRO_CELDA,\n  NW: 0,\n};\nexport const ANG = {\n  N: 270,\n  NE: 315,\n  E: 0,\n  SE: 45,\n  S: 90,\n  SW: 135,\n  W: 180,\n  NW: 225,\n};\nexport const DIR = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n","import React from 'react';\n\nimport { CENTRO_CELDA, X, Y } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tramo({ dir, estilo = 'tramo-normal' }) {\n  return (\n    <line\n      x1={CENTRO_CELDA}\n      y1={CENTRO_CELDA}\n      x2={X[dir]}\n      y2={Y[dir]}\n      className={styles[estilo]}\n    />\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Linea({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={index}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n\nLinea.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cambio({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        key=\"punta\"\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      {celda.ramas.map((dir, idx) => (\n        <Tramo\n          key={dir}\n          dir={dir}\n          estilo={\n            celda.posicion === idx\n              ? ocupado\n                ? 'tramo-ocupado'\n                : 'tramo-normal'\n              : 'tramo-muerto'\n          }\n        />\n      ))}\n    </g>\n  );\n}\nCambio.whyDidYouRender = false;\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\nimport { CENTRO_CELDA, ANCHO_CELDA, ANG } from 'Components/common';\n\nimport styles from './styles.module.css';\nexport default function Paragolpe({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      <Tramo\n        dir={celda.punta}\n        estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n      />\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={ANCHO_CELDA / 10}\n        fill={ocupado ? 'yellow' : 'black'}\n      />\n      {celda.rebota && (\n        <line\n          x1={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y1={CENTRO_CELDA - ANCHO_CELDA / 10}\n          x2={CENTRO_CELDA + ANCHO_CELDA / 6}\n          y2={CENTRO_CELDA + ANCHO_CELDA / 10}\n          className={styles.rebota}\n          transform={`rotate(${\n            ANG[celda.punta] + 180\n          }, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n        />\n      )}\n    </g>\n  );\n}\n","import React from 'react';\nimport { useCelda, useBloqueOcupado } from 'Store';\nimport Tramo from './Tramo';\n\nexport default function Cruce({ idCelda }) {\n  const celda = useCelda(idCelda);\n  const ocupado = useBloqueOcupado(celda.idBloque) || celda.idTren;\n  return (\n    <g>\n      {celda.linea1.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n      {celda.linea2.puntas.map((dir, index) => (\n        <Tramo\n          dir={dir}\n          key={`l1${index}`}\n          estilo={ocupado ? 'tramo-ocupado' : 'tramo-normal'}\n        />\n      ))}\n    </g>\n  );\n}\n","import React from 'react';\n\nimport { isPlainClick, holdPropagation } from 'Utils';\nimport { CENTRO_CELDA } from 'Components/common';\nimport { CAMBIO } from 'Store/constantes';\nimport { useAddTren, useBloqueOcupado } from 'Store';\n\nimport styles from './styles.module.css';\n\nfunction ActualDespachador({ celda, dir }) {\n  const addTren = useAddTren();\n  const bloqueOcupado = useBloqueOcupado(celda.idBloque);\n  const despacha = (ev) => {\n    if (isPlainClick(ev)) {\n      if (celda.idTren) return;\n      addTren(celda, dir);\n    }\n  };\n  return (\n    <>\n      <circle\n        cx={CENTRO_CELDA}\n        cy={CENTRO_CELDA}\n        r={9}\n        className={styles.trenDespachador}\n      />\n      {!bloqueOcupado && (\n        <g\n          className={styles.flechaDespachador}\n          onClick={despacha}\n          {...holdPropagation}\n        >\n          <path\n            d=\"M 11,-12 L 29,0 11,12 z\"\n            transform={`translate(${CENTRO_CELDA},${CENTRO_CELDA})`}\n          />\n        </g>\n      )}\n    </>\n  );\n}\n\nexport default function Despachador({ celda, dir }) {\n  return Array.isArray(celda.despachador) &&\n    celda.despachador.includes(dir) &&\n    !celda.idTren &&\n    (celda.tipo !== CAMBIO ||\n      celda.punta === dir ||\n      celda.ramas[celda.posicion] === dir) ? (\n    <ActualDespachador celda={celda} dir={dir} />\n  ) : null;\n}\n","import { useSelector, useDispatch } from 'react-redux';\nimport { selTrenes, selTren } from './selectors';\nimport { addTren, moveTrenes, delTren, delTrenes } from './actions';\n\nexport const useSelTrenes = () => useSelector((state) => selTrenes(state));\n\nexport const useMoveTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(moveTrenes());\n};\nexport const useTren = (idTren) =>\n  useSelector((state) => selTren(state, idTren));\n\nexport const useAddTren = () => {\n  const dispatch = useDispatch();\n  return (celda, dir, maxSpeed = 1) => dispatch(addTren(celda, dir, maxSpeed));\n};\n\nexport const useDelTren = () => {\n  const dispatch = useDispatch();\n  return (tren) => dispatch(delTren(tren));\n};\n\nexport const useDelTrenes = () => {\n  const dispatch = useDispatch();\n  return () => dispatch(delTrenes());\n};\n","import React from 'react';\nimport { Train } from 'Components/Icons';\nimport { useTren } from 'Store';\n\nimport { CENTRO_CELDA } from 'Components/common';\nimport styles from './styles.module.css';\n\nexport default function Tren({ celda }) {\n  const tren = useTren(celda.idTren);\n  const relSpeed = tren.speed / (tren.maxSpeed || 1);\n\n  return (\n    <g transform={`translate(${CENTRO_CELDA - 8}, ${CENTRO_CELDA - 8})`}>\n      <circle cx={8} cy={8} r={9} className={styles.tren}>\n        <title>{`${tren.numero}\\nVelocidad: ${tren.speed}\\nFalta: ${tren.falta}`}</title>\n      </circle>\n      {relSpeed && relSpeed !== 1 ? (\n        <path d=\"M 8 0 A 8 8 90 1 0 8 16 z\" fill=\"orange\" />\n      ) : null}\n      <Train color={relSpeed ? 'black' : 'red'} size=\"16px\" />\n    </g>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  ListGroup,\n  ListGroupItem,\n} from 'reactstrap';\n\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nimport { BLOQUE, SEMAFORO } from 'Store/constantes';\nimport { useCondicionesFaltantes } from 'Store';\nimport styles from './styles.module.css';\n\nexport default function CondicionesFaltantes({ idCelda, setShowFaltantes }) {\n  const faltantes = useCondicionesFaltantes(idCelda);\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowFaltantes(false);\n    }\n  };\n\n  return faltantes.length ? (\n    <Popover isOpen={!!idCelda} target={idCelda}>\n      <PopoverHeader>\n        Condiciones Faltantes\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        <ListGroup>\n          {faltantes.map((falta, idx) => {\n            switch (falta.tipo) {\n              case BLOQUE:\n                return (\n                  <ListGroupItem\n                    key={idx}\n                  >{`Bloque ocupado ${falta.bloque}`}</ListGroupItem>\n                );\n              case SEMAFORO:\n                return (\n                  <ListGroupItem key={idx}>{`Semáforo libre: ${nombreEntity(\n                    falta\n                  )}`}</ListGroupItem>\n                );\n              default:\n                break;\n            }\n            return '????';\n          })}\n        </ListGroup>\n      </PopoverBody>\n    </Popover>\n  ) : null;\n}\n","import React from 'react';\nimport { buildId, nombreEntity } from 'Utils';\nimport { useEmpalme, useCelda } from 'Store';\nimport { CENTRO_CELDA } from 'Components/common';\n\nimport styles from './styles.module.css';\n\nfunction ActualEmpalme({ celda, empalme }) {\n  const otraCelda = useCelda(\n    buildId({\n      idSector: celda.idSector,\n      x: empalme.x,\n      y: empalme.y,\n    })\n  );\n  return (\n    <g>\n      <path\n        d=\"M 33,-10 L 51,0 33,10 z\"\n        transform={`translate(${CENTRO_CELDA},${CENTRO_CELDA})`}\n        className={styles.flecha}\n      >\n        {' '}\n        <title>{`Continúa en: ${nombreEntity({\n          ...otraCelda,\n          dir: empalme.dir,\n        })}`}</title>\n      </path>\n    </g>\n  );\n}\nexport default function Empalme({ celda, dir }) {\n  const idPunta = buildId({\n    ...celda,\n    dir,\n  });\n  const empalme = useEmpalme(idPunta);\n  return empalme ? <ActualEmpalme celda={celda} empalme={empalme} /> : null;\n}\n","import { selEmpalme } from './selectors';\n\nimport { useSelector } from 'react-redux';\n\nexport const useEmpalme = (idPunta) =>\n  useSelector((state) => selEmpalme(state, idPunta));\n","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\n\nimport { buildId, useLongPress } from 'Utils';\n\nimport {\n  useCelda,\n  useShowCoords,\n  useEstado,\n  useBloque,\n  useSetPosicion,\n  useToggleRebota,\n  useCondicionesFaltantes,\n} from 'Store';\nimport Semaforo from 'Components/Semaforo';\nimport { CAMBIO, PARAGOLPE } from 'Store/constantes';\n\nimport { ANCHO_CELDA, DIR, CENTRO_CELDA, ANG } from 'Components/common';\nimport styles from './styles.module.css';\n\nimport Linea from './Linea';\nimport Cambio from './Cambio';\nimport Paragolpe from './Paragolpe';\nimport Cruce from './Cruce';\nimport { Despachador, Tren } from 'Components/Trenes';\nimport CondicionesFaltantes from 'Components/Enclavamientos';\nimport Empalme from 'Components/Empalme';\n\nexport function ActualCelda({\n  celda,\n  cellsAcross,\n  cellWidth,\n  padLeft,\n  padTop,\n}) {\n  const idCelda = celda.idCelda;\n  const setPosicion = useSetPosicion(idCelda);\n  const toggleRebota = useToggleRebota(idCelda);\n  const bloque = useBloque(celda.idBloque);\n  const [showCoords] = useShowCoords();\n  const { showEstado } = useEstado();\n  const condicionesFaltantes = useCondicionesFaltantes(idCelda);\n  const [showFaltantes, setShowFaltantes] = useState();\n  const longPressProps = useLongPress({\n    onClick: (ev) => {\n      switch (celda.tipo) {\n        case CAMBIO:\n          if (condicionesFaltantes.length) {\n            setShowFaltantes(true);\n          } else {\n            setPosicion((celda.posicion + 1) % celda.ramas.length);\n          }\n          break;\n        case PARAGOLPE:\n          toggleRebota();\n          break;\n        default:\n          break;\n      }\n    },\n    onLongPress: (ev) => {\n      showEstado({\n        tipo: celda.tipo,\n        idCelda,\n        placement,\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (showFaltantes && !condicionesFaltantes.length) {\n      setShowFaltantes(false);\n    }\n  }, [showFaltantes, condicionesFaltantes.length]);\n\n  if (!cellWidth || !celda) return null;\n  const placement = celda.x > cellsAcross / 2 ? 'left' : 'right';\n\n  const coords = showCoords ? `[${celda.x},${celda.y}]` : '';\n  const title = [];\n  if (celda.nombre) {\n    title.push(`Celda: ${celda.nombre}`);\n  }\n  title.push(`Coordenadas: [${celda.x},${celda.y}]`);\n\n  if (bloque) {\n    title.push(`Bloque: ${bloque.nombre}`);\n  }\n  if (celda.idTren) {\n    title.push(`Con tren ${celda.idTren}`);\n  }\n\n  const Renderer = {\n    linea: Linea,\n    cambio: Cambio,\n    paragolpe: Paragolpe,\n    cruce: Cruce,\n  }[celda.tipo];\n  return (\n    <>\n      <div\n        id={idCelda}\n        className={classNames(styles.rect, {\n          [styles.manual]: celda.manual,\n        })}\n        style={{\n          left: padLeft + celda.x * cellWidth,\n          top: celda.y * cellWidth + padTop,\n          width: cellWidth,\n          height: cellWidth,\n        }}\n        title={title.join('\\n')}\n        {...longPressProps}\n      >\n        <svg\n          viewBox={`0 0 ${ANCHO_CELDA} ${ANCHO_CELDA}`}\n          width={cellWidth}\n          height={cellWidth}\n          className={styles.svg}\n        >\n          <text x=\"0\" y=\"95\" className={styles.text}>\n            {coords}\n          </text>\n          {celda.nombre && (\n            <text textAnchor=\"end\" x={95} y={95} className={styles.text}>\n              {celda.nombre}\n            </text>\n          )}\n          <Renderer idCelda={idCelda} />\n          {DIR.map((dir) => (\n            <g\n              key={dir}\n              transform={`rotate(${ANG[dir]}, ${CENTRO_CELDA}, ${CENTRO_CELDA})`}\n            >\n              <Semaforo\n                idSemaforo={buildId({\n                  ...celda,\n                  dir,\n                })}\n                placement={placement}\n              />\n              <Empalme celda={celda} dir={dir} />\n              {!!celda.despachador && <Despachador celda={celda} dir={dir} />}\n            </g>\n          ))}\n          {celda.idTren ? <Tren celda={celda} /> : null}\n        </svg>\n      </div>\n      {showFaltantes && (\n        <CondicionesFaltantes\n          idCelda={idCelda}\n          setShowFaltantes={setShowFaltantes}\n        />\n      )}\n    </>\n  );\n}\n\nexport default function Celda({ idCelda, ...rest }) {\n  const celda = useCelda(idCelda);\n  if (celda) {\n    return <ActualCelda celda={celda} {...rest} />;\n  }\n  return null;\n}\n\nCelda.whyDidYouRender = false;\n","import React, { useEffect } from 'react';\nimport { useResize } from 'Utils';\n\nimport { useSector, useCeldas } from 'Store';\n\nimport Celda from 'Components/Celda';\nimport loadingIcon from 'Components/Icons/loading.gif';\nimport { LOADED } from 'Store/constantes';\n\nimport styles from './styles.module.css';\n\nfunction ActualSector({ sector }) {\n  const celdas = useCeldas(sector.idSector);\n  const size = useResize();\n  const { ancho, descrCorta, alto } = sector;\n  const cellWidth = Math.min(\n    Math.floor(size.width / ancho),\n    ancho > 8 ? 100 : 200\n  );\n  const padLeft = (size.width - ancho * cellWidth) / 2;\n  useEffect(() => {\n    document.title = `CTC - ${descrCorta}`;\n  });\n  return (\n    <>\n      <div className={styles.sector}>\n        {celdas.map((c) => (\n          <Celda\n            key={c.idCelda}\n            idCelda={c.idCelda}\n            cellsAcross={ancho}\n            cellWidth={cellWidth}\n            padLeft={padLeft}\n            padTop={60}\n          />\n        ))}\n      </div>\n      <div style={{ height: (alto + 2) * cellWidth }}></div>\n    </>\n  );\n}\n\nexport default function Sector({ idSector }) {\n  const { sector, loading, error, load } = useSector(idSector);\n\n  useEffect(() => {\n    if (!error && loading !== LOADED) load();\n  }, [error, load, loading]);\n\n  if (error) {\n    return <pre>Error cargando 'sector': {JSON.stringify(error, null, 2)}</pre>;\n  }\n  if (loading !== LOADED) {\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualSector sector={sector} />;\n}\n","import React from 'react';\n\nimport { ButtonGroup, Button, PopoverBody } from 'reactstrap';\n\nimport {\n  CambioNormal,\n  CambioDesviado,\n  TripleIzq,\n  TripleNormal,\n  TripleDer,\n  Locked,\n  Unlocked,\n} from 'Components/Icons';\n\nimport { isPlainClick } from 'Utils';\nimport { useCeldaManual, useSetPosicion } from 'Store';\n\nimport { NORMAL, DESVIADO, ALTERNATIVA } from 'Store/constantes';\nimport styles from './styles.module.css';\n\nexport default function EstadoCambio({ celda }) {\n  const { posicion, idCelda } = celda;\n  const setPosicion = useSetPosicion(idCelda);\n  const [celdaIsManual, toggleCeldaManual] = useCeldaManual(idCelda);\n\n  const onSetCambioNormal = (ev) => isPlainClick(ev) && setPosicion(NORMAL);\n  const onSetCambioDesviado = (ev) => isPlainClick(ev) && setPosicion(DESVIADO);\n  const onSetCambioAlternativa = (ev) =>\n    isPlainClick(ev) && setPosicion(ALTERNATIVA);\n  const onSetManual = (ev) => isPlainClick(ev) && toggleCeldaManual();\n\n  return (\n    <PopoverBody>\n      <ButtonGroup className={styles.cambio}>\n        {celda.ramas.length === 2 ? (\n          <>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <CambioNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <CambioDesviado />\n            </Button>\n          </>\n        ) : (\n          <>\n            {' '}\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioDesviado}\n              color={posicion === DESVIADO ? 'primary' : 'outline-secondary'}\n            >\n              <TripleIzq />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioNormal}\n              color={posicion === NORMAL ? 'primary' : 'outline-secondary'}\n            >\n              <TripleNormal />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={onSetCambioAlternativa}\n              color={posicion === ALTERNATIVA ? 'primary' : 'outline-secondary'}\n            >\n              <TripleDer />\n            </Button>\n          </>\n        )}\n      </ButtonGroup>\n      <Button\n        className={styles.manual}\n        size=\"sm\"\n        color={celdaIsManual ? 'danger' : 'outline-info'}\n        onClick={onSetManual}\n      >\n        {celdaIsManual ? <Unlocked /> : <Locked />}\n      </Button>\n    </PopoverBody>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Locked, Unlocked, Circle } from 'Components/Icons';\nimport { LIBRE, PRECAUCION, ALTO, MANIOBRA } from 'Store/constantes';\nimport { isPlainClick } from 'Utils';\n\nimport {\n  useSetAspectoSenal,\n  useModoSemaforo,\n  useRunAutomatizaciones,\n} from 'Store';\n\nimport {\n  ButtonGroup,\n  Button,\n  PopoverBody,\n  Container,\n  Row,\n  Col,\n} from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { AUTOMATICO } from '../../Store/constantes';\n\nexport function EstadoSenal({ senal, aspecto, onSetAspecto }) {\n  const onSetAlto = (ev) => isPlainClick(ev) && onSetAspecto(senal, ALTO);\n  const onSetPrecaucion = (ev) =>\n    isPlainClick(ev) && onSetAspecto(senal, PRECAUCION);\n  const onSetLibre = (ev) => isPlainClick(ev) && onSetAspecto(senal, LIBRE);\n\n  return (\n    <>\n      <ButtonGroup vertical>\n        <Button\n          size=\"sm\"\n          color={aspecto === ALTO ? 'danger' : 'outline-danger'}\n          onClick={onSetAlto}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === PRECAUCION ? 'warning' : 'outline-warning'}\n          onClick={onSetPrecaucion}\n        >\n          <Circle />\n        </Button>\n        <Button\n          size=\"sm\"\n          color={aspecto === LIBRE ? 'success' : 'outline-success'}\n          onClick={onSetLibre}\n        >\n          <Circle />\n        </Button>\n      </ButtonGroup>\n    </>\n  );\n}\n\nexport default function EstadoSemaforo({ semaforo }) {\n  const { izq, soloManiobra, centro, der, idSemaforo } = semaforo;\n  const setAspectoSenal = useSetAspectoSenal();\n  const [modoSemaforo, setModoSemaforo] = useModoSemaforo(idSemaforo);\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onSetAspecto = (senal, aspecto) => {\n    if (modoSemaforo === MANIOBRA || soloManiobra) {\n      setAspectoSenal(idSemaforo, senal, aspecto);\n    }\n    if (soloManiobra) {\n      runAutomatizaciones(idSemaforo);\n    }\n  };\n\n  const onSetManual = () => {\n    setModoSemaforo(modoSemaforo === AUTOMATICO ? MANIOBRA : AUTOMATICO);\n  };\n\n  return (\n    <PopoverBody>\n      <Container>\n        <div\n          className={classNames({\n            [styles.disabled]: !soloManiobra && !modoSemaforo,\n          })}\n        >\n          <Row>\n            <Col>\n              <div\n                className={classNames(styles.pushDown, {\n                  [styles.hidden]: !izq,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"izq\"\n                  aspecto={izq}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames({\n                  [styles.hidden]: !centro,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"centro\"\n                  aspecto={centro}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div\n                className={classNames(styles.semaforo, styles.pushDown, {\n                  [styles.hidden]: !der,\n                })}\n              >\n                <EstadoSenal\n                  senal=\"der\"\n                  aspecto={der}\n                  onSetAspecto={onSetAspecto}\n                />\n              </div>\n            </Col>\n          </Row>\n        </div>\n        {!soloManiobra && (\n          <Row>\n            <Button\n              className={styles.manual}\n              size=\"sm\"\n              color={modoSemaforo ? 'danger' : 'outline-info'}\n              onClick={onSetManual}\n            >\n              {modoSemaforo ? <Unlocked /> : <Locked />}\n            </Button>\n          </Row>\n        )}\n      </Container>\n    </PopoverBody>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport classnames from 'classnames';\n\nimport {\n  Button,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  TabContent,\n  TabPane,\n  Nav,\n  NavItem,\n  NavLink,\n} from 'reactstrap';\n\nimport {\n  useCelda,\n  useSemaforo,\n  useShowConfig,\n  useEstado,\n  useSelAutomatizacion,\n} from 'Store';\n\nimport { CAMBIO } from 'Store/constantes';\n\nimport EstadoCambio from './Cambio';\nimport EstadoSemaforo from './Semaforo';\n\nimport styles from './styles.module.css';\nimport { isPlainClick, nombreEntity } from 'Utils';\n\nconst TAB_SEMAFORO = 'Semaforo';\nconst TAB_CELDA = 'Celda';\nconst TAB_AUTOM = 'Autom.';\nconst TAB_COMANDO = 'Cmd.';\n\nexport default function Estado() {\n  const {\n    estado: { show, ...more },\n  } = useEstado();\n  // Had to break it in two because selectors don't work with invalid ids\n  // so, if no show, no Popover.\n  // I can't call useSelector conditionally so I render the component conditionally\n  return show && <EstadoPopover {...more} />;\n}\n\nfunction EstadoPopover({ idCelda, idSemaforo, placement }) {\n  const [oldId, setOldId] = useState();\n  const celda = useCelda(idCelda);\n  const semaforo = useSemaforo(idSemaforo);\n  const [showConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const automatizacion = useSelAutomatizacion(idSemaforo || idCelda);\n\n  const [activeTab, setActiveTab] = useState();\n\n  const activeElement = semaforo || celda.tipo === CAMBIO;\n\n  useEffect(() => {\n    if (oldId !== idCelda) {\n      setActiveTab(\n        activeElement ? TAB_COMANDO : idSemaforo ? TAB_SEMAFORO : TAB_CELDA\n      );\n      setOldId(idCelda);\n    }\n  }, [oldId, idCelda, activeElement, idSemaforo]);\n\n  const toggle = (tab) => {\n    if (activeTab !== tab) setActiveTab(tab);\n  };\n\n  const onClose = (ev) => isPlainClick(ev) && hideEstado();\n\n  const Command = () => (\n    <>\n      {semaforo && <EstadoSemaforo semaforo={semaforo} />}\n      {!semaforo && celda.tipo === CAMBIO && <EstadoCambio celda={celda} />}\n    </>\n  );\n  // See: https://github.com/reactstrap/reactstrap/issues/1404#issuecomment-602011689\n  // I am using a patched Popover.\n  return (\n    <Popover\n      isOpen={!!(showConfig || activeElement)}\n      target={idCelda}\n      placement={placement}\n    >\n      <PopoverHeader>\n        {semaforo\n          ? `Semáforo ${nombreEntity(semaforo)}`\n          : `Celda ${nombreEntity(celda)}`}\n        <Button close className={styles.close} onClick={onClose} />\n      </PopoverHeader>\n      <PopoverBody>\n        {showConfig ? (\n          <>\n            <Nav pills className={styles.solapas}>\n              {activeElement && (\n                <NavItem title=\"Mostrar Comandos\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_COMANDO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_COMANDO);\n                    }}\n                  >\n                    {TAB_COMANDO}\n                  </NavLink>\n                </NavItem>\n              )}\n              {semaforo && (\n                <NavItem title=\"Mostrar COnfiguración Semaforo\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_SEMAFORO,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_SEMAFORO);\n                    }}\n                  >\n                    {TAB_SEMAFORO}\n                  </NavLink>\n                </NavItem>\n              )}\n              <NavItem title=\"Mostrar Configuración Celda\">\n                <NavLink\n                  className={classnames(styles.solapa, {\n                    active: activeTab === TAB_CELDA,\n                  })}\n                  onClick={() => {\n                    toggle(TAB_CELDA);\n                  }}\n                >\n                  {TAB_CELDA}\n                </NavLink>\n              </NavItem>\n              {automatizacion && (\n                <NavItem title=\"Mostrar Configuración Automatización\">\n                  <NavLink\n                    className={classnames(styles.solapa, {\n                      active: activeTab === TAB_AUTOM,\n                    })}\n                    onClick={() => {\n                      toggle(TAB_AUTOM);\n                    }}\n                  >\n                    {TAB_AUTOM}\n                  </NavLink>\n                </NavItem>\n              )}{' '}\n            </Nav>\n            <TabContent activeTab={activeTab}>\n              {activeElement && (\n                <TabPane tabId={TAB_COMANDO}>\n                  <Command />\n                </TabPane>\n              )}\n              {semaforo && (\n                <TabPane tabId={TAB_SEMAFORO}>\n                  <pre>{JSON.stringify(semaforo, null, 2)}</pre>\n                </TabPane>\n              )}\n              <TabPane tabId={TAB_CELDA}>\n                <pre>{JSON.stringify(celda, null, 2)}</pre>\n              </TabPane>\n              {automatizacion && (\n                <TabPane tabId={TAB_AUTOM}>\n                  <pre>{JSON.stringify(automatizacion, null, 2)}</pre>\n                </TabPane>\n              )}\n            </TabContent>\n          </>\n        ) : (\n          <Command />\n        )}\n      </PopoverBody>\n    </Popover>\n  );\n}\n","import React from 'react';\nimport { useAlarma, useDelTrenes, useRunAutomatizaciones } from 'Store';\nimport { Button, Popover, PopoverHeader, PopoverBody } from 'reactstrap';\n\nimport styles from './styles.module.css';\nimport { isPlainClick } from 'Utils';\n\nexport default function Alarma() {\n  const [{ idCelda, numero, msg, fecha }, clearAlarma] = useAlarma();\n  const delTrenes = useDelTrenes();\n  const runAutomatizaciones = useRunAutomatizaciones();\n\n  const onClose = (ev) => {\n    if (isPlainClick(ev)) {\n      clearAlarma();\n      delTrenes();\n      runAutomatizaciones();\n    }\n  };\n\n  return (\n    !!idCelda && (\n      <Popover isOpen={!!idCelda} target={idCelda}>\n        <PopoverHeader className={styles.alarma}>\n          Tren {numero}\n          <Button close className={styles.close} onClick={onClose} />\n        </PopoverHeader>\n        <PopoverBody>\n          <p>{new Date(fecha).toLocaleString()}</p>\n          {msg}\n        </PopoverBody>\n      </Popover>\n    )\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Sector from 'Components/Sector';\nimport Estado from 'Components/Estado';\nimport Alarma from 'Components/Alarma';\nimport { useCurrentSector } from 'Store';\n\nexport default function Mimico() {\n  const { idSector } = useParams();\n  const [currentIdSector, setCurrentIdSector] = useCurrentSector();\n\n  useEffect(() => {\n    if (idSector !== currentIdSector) {\n      setCurrentIdSector(idSector);\n    }\n  }, [idSector, currentIdSector, setCurrentIdSector]);\n\n  return currentIdSector ? (\n    <>\n      <Estado />\n      <Sector idSector={currentIdSector} />\n      <Alarma />\n    </>\n  ) : null;\n}\n","import React, { useEffect, useState } from 'react';\nimport { useMoveTrenes, usePlayRate } from 'Store';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport styles from './styles.module.css';\n\nexport default function Animador() {\n  const moveTrenes = useMoveTrenes();\n  const [playRate, setPlayRate] = usePlayRate();\n\n  const [timer, setTimer] = useState();\n\n  useEffect(() => {\n    if (playRate && !timer) {\n      setTimer(setInterval(moveTrenes, 1000 / playRate));\n    }\n\n    return () => {\n      if (timer) {\n        clearInterval(timer);\n        setTimer(0);\n      }\n    };\n  }, [moveTrenes, timer, playRate]);\n\n  return (\n    <ButtonGroup\n      title={'Velocidad de la animación\\n(ciclos por segundo)'}\n      className={styles.rate}\n    >\n      <Button\n        outline={playRate !== 0}\n        color={playRate ? 'secondary' : 'danger'}\n        onClick={() => setPlayRate(0)}\n      >\n        0\n      </Button>\n      <Button outline={playRate !== 0.5} onClick={() => setPlayRate(0.5)}>\n        ½\n      </Button>\n      <Button outline={playRate !== 1} onClick={() => setPlayRate(1)}>\n        1\n      </Button>\n      <Button outline={playRate !== 2} onClick={() => setPlayRate(2)}>\n        2\n      </Button>\n      <Button outline={playRate !== 5} onClick={() => setPlayRate(5)}>\n        5\n      </Button>\n    </ButtonGroup>\n  );\n}\n","import React, { useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { isPlainClick } from 'Utils';\nimport {\n  useSectores,\n  useSector,\n  useShowTeletipo,\n  useAutomatizacionesActive,\n  useShowCoords,\n  useShowConfig,\n  useEstado,\n} from 'Store';\n\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap';\n\nimport { LOADED } from 'Store/constantes';\nimport Animador from 'Components/Animador';\nimport { GitHub } from 'Components/Icons';\n\nimport loadingIcon from 'Components/Icons/loading.gif';\n\nfunction ActualMenu({ sectores }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const match = useRouteMatch('/sector/:idSector');\n  const idSector = match && match.params.idSector;\n  const { sector } = useSector(idSector);\n  const [\n    automatizacionesActive,\n    setAutomatizaciones,\n  ] = useAutomatizacionesActive();\n  const [showTeletipo, setShowTeletipo] = useShowTeletipo();\n  const [showCoords, setShowCoords] = useShowCoords();\n  const [showConfig, setShowConfig] = useShowConfig();\n  const { hideEstado } = useEstado();\n  const [oldIdSector, setOldIdSector] = useState();\n\n  const onClickSector = (ev) => {\n    if (idSector !== oldIdSector) {\n      hideEstado();\n      setOldIdSector(idSector);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowAutomatizaciones = (ev) => {\n    if (isPlainClick(ev)) {\n      setAutomatizaciones(!automatizacionesActive);\n      setIsOpen(false);\n    }\n  };\n\n  const onClickShowTeletipo = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowTeletipo(!showTeletipo);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowCoords = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowCoords(!showCoords);\n      setIsOpen(false);\n    }\n  };\n  const onClickShowConfig = (ev) => {\n    if (isPlainClick(ev)) {\n      setShowConfig(!showConfig);\n      setIsOpen(false);\n    }\n  };\n  const toggleOpen = () => setIsOpen(!isOpen);\n\n  return (\n    <Navbar color=\"light\" light expand=\"md\" fixed=\"top\">\n      <NavbarBrand\n        color=\"default\"\n        href={\n          process.env.NODE_ENV === 'production' ? process.env.PUBLIC_URL : '/'\n        }\n        title=\"Volver al inicio\"\n      >\n        CTC\n      </NavbarBrand>\n      <Animador />\n\n      <NavbarToggler onClick={toggleOpen} />\n      <Collapse isOpen={isOpen} navbar>\n        <Nav className=\"mr-auto\" navbar>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle\n              nav\n              caret\n              title={sector ? sector.descr : 'Seleccione sector a visualizar'}\n            >\n              {sector ? sector.descrCorta : 'Sectores'}\n            </DropdownToggle>\n            <DropdownMenu>\n              {sectores.map((sect) => (\n                <DropdownItem\n                  tag={Link}\n                  to={`/sector/${sect.idSector}`}\n                  key={sect.idSector}\n                  title={sect.descr}\n                  active={idSector === sect.idSector}\n                  onClick={onClickSector}\n                >\n                  {sect.descrCorta}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle nav caret title=\"Opciones de visualización\">\n              Opciones\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={onClickShowTeletipo} active={showTeletipo}>\n                Teletipo\n              </DropdownItem>\n              <DropdownItem\n                onClick={onClickShowAutomatizaciones}\n                active={automatizacionesActive}\n              >\n                Automatizaciones\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowCoords} active={showCoords}>\n                Coordenadas\n              </DropdownItem>\n              <DropdownItem onClick={onClickShowConfig} active={showConfig}>\n                Mostrar Config.\n              </DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </Nav>\n        <Nav navbar>\n          <NavItem>\n            <NavLink\n              href=\"https://github.com/Satyam/reactc2\"\n              title=\"Ver código fuente en GitHub\"\n              target=\"_blank\"\n            >\n              <GitHub /> Github\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n}\n\nexport default function Menu() {\n  const { sectores, loading, error, load } = useSectores();\n  if (error) {\n    return (\n      <pre>Error cargando 'sectores': {JSON.stringify(error, null, 2)}</pre>\n    );\n  }\n  if (loading !== LOADED) {\n    load();\n    return <img alt=\"loading...\" src={loadingIcon} />;\n  }\n  return <ActualMenu sectores={sectores} />;\n}\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Teletipo from 'Components/Teletipo';\nimport Mimico from 'Components/Mimico';\nimport Menu from 'Components/Menu';\n\nimport { useShowTeletipo } from 'Store';\n\n// import styles from './styles.module.css';\n\nexport default function App({ username = '', sector, photoURL }) {\n  const [showTeletipo] = useShowTeletipo();\n\n  return (\n    <Router\n      basename={\n        process.env.NODE_ENV === 'production'\n          ? process.env.PUBLIC_URL\n          : undefined\n      }\n    >\n      <Menu />\n      <Route path=\"/sector/:idSector\">\n        <Mimico idSector=\"constitucion\" />\n      </Route>\n      {showTeletipo && <Teletipo />}\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'Components/App';\r\nimport store from 'Store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n// if (process.env.NODE_ENV === 'development') {\r\n//   const whyDidYouRender = require('@welldone-software/why-did-you-render');\r\n//   whyDidYouRender(React, {\r\n//     trackAllPureComponents: true,\r\n//     trackExtraHooks: [[require('react-redux'), 'useSelector']],\r\n//   });\r\n// }\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}